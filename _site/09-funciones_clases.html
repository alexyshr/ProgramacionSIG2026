<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Programación SIG: Python, R y Julia - 9&nbsp; Funciones y Clases: El camino a la Modularización</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./12-introduccion_python_r_julia.html" rel="next">
<link href="./08-ciclos_condicionales.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="site_libs/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.2.3/leaflet.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./05-variables_tipos_de_datos.html">Fundamentos</a></li><li class="breadcrumb-item"><a href="./09-funciones_clases.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Funciones y Clases: El camino a la Modularización</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Programación SIG: Python, R y Julia</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-prefacio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Instalación y Entornos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduccion-entornos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a Entornos de Desarrollo SIG</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-guia_instalacion_A_docker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Guía de Instalación. Opción A: Docker (Python, R, Julia)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-guia_instalacion_B_qgis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Guía de Instalación. Opción B: QGIS y PyQGIS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-guia_instalacion_C_ArcGIS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Guía de Instalación. Opción C: ArcGIS Pro y ArcPy</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Fundamentos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-variables_tipos_de_datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Variables y tipos de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-estructuras_datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Estructuras de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-operaciones_cadenas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Operaciones con Cadenas de Texto (Strings)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-ciclos_condicionales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Bucles y Declaraciones Condicionales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-funciones_clases.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Funciones y Clases: El camino a la Modularización</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-introduccion_python_r_julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introducción a Python, R y Julia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-estructuras_datos_geo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Estructuras de Datos Geoespaciales</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Prácticas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41-practica_1_benchmark_raster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Evaluación Comparativa de Procesamiento Geoespacial</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Presentaciones</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./61-presentacion_1_clase1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Temas por Charlar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./62-presentacion_2_benchmark.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Benchmark geoespacial: cómo leer los resultados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Apéndices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./80-instalacion_herramientas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Resumen instalación de herramientas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./81-uso_infraestructura_instalada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Uso de la Infraestructura Instalada</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./82-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quarto: Orquestación y Configuración</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./83-docker_desktop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Docker: Gestión de Contenedores e Imágenes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./84-git_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Git y GitHub: Sincronización Local-Remota</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./85-vscode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Visual Studio Code (VScode): Extensiones e Interfaz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./86-windows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Temas técnicos sobre Windows</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./87-linux_ubuntu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Temas Técnicos sobre Linux</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./88-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Adicionales Sobre Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./89-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">J</span>&nbsp; <span class="chapter-title">Adicionales Sobre R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./90-julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">Adicionales Sobre Julia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./91-qgis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">L</span>&nbsp; <span class="chapter-title">Adicionales Sobre QGIS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./92-arcgispro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">M</span>&nbsp; <span class="chapter-title">Adicionales sobre ArcGIS Pro</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./93-postgresql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">N</span>&nbsp; <span class="chapter-title">Adicionales sobre ArcGIS Pro</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-errata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">O</span>&nbsp; <span class="chapter-title">Errata</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-referencias.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias Bibliográficas</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de Contenidos</h2>
   
  <ul>
  <li><a href="#funciones-j_eval-y-j_plot-en-r" id="toc-funciones-j_eval-y-j_plot-en-r" class="nav-link active" data-scroll-target="#funciones-j_eval-y-j_plot-en-r"><span class="header-section-number">9.1</span> Funciones j_eval y j_plot en R</a></li>
  <li><a href="#introducción" id="toc-introducción" class="nav-link" data-scroll-target="#introducción"><span class="header-section-number">9.2</span> Introducción</a></li>
  <li><a href="#objetivos-de-aprendizaje" id="toc-objetivos-de-aprendizaje" class="nav-link" data-scroll-target="#objetivos-de-aprendizaje"><span class="header-section-number">9.3</span> Objetivos de aprendizaje</a></li>
  <li><a href="#funciones-bloques-de-código-reutilizables" id="toc-funciones-bloques-de-código-reutilizables" class="nav-link" data-scroll-target="#funciones-bloques-de-código-reutilizables"><span class="header-section-number">9.4</span> 1. Funciones: bloques de código reutilizables</a>
  <ul class="collapse">
  <li><a href="#la-matemática-detrás-de-nuestra-calculadora-espacial" id="toc-la-matemática-detrás-de-nuestra-calculadora-espacial" class="nav-link" data-scroll-target="#la-matemática-detrás-de-nuestra-calculadora-espacial">La matemática detrás de nuestra calculadora espacial</a></li>
  <li><a href="#resumen-de-sintaxis-estructura-de-funciones" id="toc-resumen-de-sintaxis-estructura-de-funciones" class="nav-link" data-scroll-target="#resumen-de-sintaxis-estructura-de-funciones">Resumen de sintaxis: estructura de funciones</a></li>
  </ul></li>
  <li><a href="#clases-organizando-datos-y-comportamiento-juntos" id="toc-clases-organizando-datos-y-comportamiento-juntos" class="nav-link" data-scroll-target="#clases-organizando-datos-y-comportamiento-juntos"><span class="header-section-number">9.5</span> 2. Clases: organizando datos y comportamiento juntos</a>
  <ul class="collapse">
  <li><a href="#analogía-entre-clasesobjetos-y-moldesarepas" id="toc-analogía-entre-clasesobjetos-y-moldesarepas" class="nav-link" data-scroll-target="#analogía-entre-clasesobjetos-y-moldesarepas">Analogía entre clases/objetos y moldes/arepas</a></li>
  <li><a href="#el-reto-de-simples-números-a-entidades-inteligentes" id="toc-el-reto-de-simples-números-a-entidades-inteligentes" class="nav-link" data-scroll-target="#el-reto-de-simples-números-a-entidades-inteligentes">El reto: de simples números a entidades inteligentes</a></li>
  <li><a href="#python-y-la-programación-orientada-a-objetos-oop" id="toc-python-y-la-programación-orientada-a-objetos-oop" class="nav-link" data-scroll-target="#python-y-la-programación-orientada-a-objetos-oop">Python y la Programación Orientada a Objetos (OOP)</a></li>
  <li><a href="#r-y-el-sistema-s3-la-ilusión-del-molde-y-el-poder-de-la-etiqueta" id="toc-r-y-el-sistema-s3-la-ilusión-del-molde-y-el-poder-de-la-etiqueta" class="nav-link" data-scroll-target="#r-y-el-sistema-s3-la-ilusión-del-molde-y-el-poder-de-la-etiqueta">R y el sistema S3: la ilusión del molde y el poder de la etiqueta</a></li>
  <li><a href="#julia-y-el-despacho-múltiple-separando-los-ingredientes-de-la-receta" id="toc-julia-y-el-despacho-múltiple-separando-los-ingredientes-de-la-receta" class="nav-link" data-scroll-target="#julia-y-el-despacho-múltiple-separando-los-ingredientes-de-la-receta">Julia y el despacho múltiple: separando los ingredientes de la receta</a></li>
  <li><a href="#laboratorio-comparativo-implementación-del-código-completo" id="toc-laboratorio-comparativo-implementación-del-código-completo" class="nav-link" data-scroll-target="#laboratorio-comparativo-implementación-del-código-completo">Laboratorio comparativo: implementación del código completo</a></li>
  <li><a href="#los-pilares-de-la-poo-en-geomática-sin-complicaciones" id="toc-los-pilares-de-la-poo-en-geomática-sin-complicaciones" class="nav-link" data-scroll-target="#los-pilares-de-la-poo-en-geomática-sin-complicaciones">Los pilares de la POO en Geomática (sin complicaciones)</a></li>
  <li><a href="#el-motor-bajo-el-capó-despacho-y-velocidad" id="toc-el-motor-bajo-el-capó-despacho-y-velocidad" class="nav-link" data-scroll-target="#el-motor-bajo-el-capó-despacho-y-velocidad">El motor bajo el capó: Despacho y Velocidad</a></li>
  <li><a href="#resumen-de-sintaxis-programación-orientada-a-objetos" id="toc-resumen-de-sintaxis-programación-orientada-a-objetos" class="nav-link" data-scroll-target="#resumen-de-sintaxis-programación-orientada-a-objetos">Resumen de sintaxis: programación orientada a objetos</a></li>
  </ul></li>
  <li><a href="#guías-de-diseño-para-funciones-y-clases" id="toc-guías-de-diseño-para-funciones-y-clases" class="nav-link" data-scroll-target="#guías-de-diseño-para-funciones-y-clases"><span class="header-section-number">9.6</span> Guías de diseño para funciones y clases</a>
  <ul class="collapse">
  <li><a href="#el-diseño-de-funciones-los-obreros-de-la-obra" id="toc-el-diseño-de-funciones-los-obreros-de-la-obra" class="nav-link" data-scroll-target="#el-diseño-de-funciones-los-obreros-de-la-obra">1. El diseño de Funciones: los obreros de la obra</a></li>
  <li><a href="#el-diseño-de-clases-y-estructuras-los-cimientos-del-edificio" id="toc-el-diseño-de-clases-y-estructuras-los-cimientos-del-edificio" class="nav-link" data-scroll-target="#el-diseño-de-clases-y-estructuras-los-cimientos-del-edificio">2. El diseño de Clases (y Estructuras): los cimientos del edificio</a></li>
  <li><a href="#comentarios-y-documentación" id="toc-comentarios-y-documentación" class="nav-link" data-scroll-target="#comentarios-y-documentación">3. Comentarios y documentación</a></li>
  </ul></li>
  <li><a href="#resumen-de-aprendizajes-cheat-sheet" id="toc-resumen-de-aprendizajes-cheat-sheet" class="nav-link" data-scroll-target="#resumen-de-aprendizajes-cheat-sheet"><span class="header-section-number">9.7</span> Resumen de aprendizajes (cheat sheet)</a>
  <ul class="collapse">
  <li><a href="#estructura-de-funciones" id="toc-estructura-de-funciones" class="nav-link" data-scroll-target="#estructura-de-funciones">1. Estructura de funciones</a></li>
  <li><a href="#programación-orientada-a-objetos-poo" id="toc-programación-orientada-a-objetos-poo" class="nav-link" data-scroll-target="#programación-orientada-a-objetos-poo">2. Programación Orientada a Objetos (POO)</a></li>
  </ul></li>
  <li><a href="#ejercicios" id="toc-ejercicios" class="nav-link" data-scroll-target="#ejercicios"><span class="header-section-number">9.8</span> Ejercicios</a>
  <ul class="collapse">
  <li><a href="#ejercicio-1-el-cazador-de-coordenadas-funciones-y-abstracción" id="toc-ejercicio-1-el-cazador-de-coordenadas-funciones-y-abstracción" class="nav-link" data-scroll-target="#ejercicio-1-el-cazador-de-coordenadas-funciones-y-abstracción">Ejercicio 1: El cazador de coordenadas (Funciones y abstracción)</a></li>
  <li><a href="#ejercicio-2-modelando-una-ruta-espacial-clases-e-interacción" id="toc-ejercicio-2-modelando-una-ruta-espacial-clases-e-interacción" class="nav-link" data-scroll-target="#ejercicio-2-modelando-una-ruta-espacial-clases-e-interacción">Ejercicio 2: Modelando una ruta espacial (Clases e interacción)</a></li>
  <li><a href="#entregables-y-criterios-de-evaluación" id="toc-entregables-y-criterios-de-evaluación" class="nav-link" data-scroll-target="#entregables-y-criterios-de-evaluación">Entregables y criterios de evaluación</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./05-variables_tipos_de_datos.html">Fundamentos</a></li><li class="breadcrumb-item"><a href="./09-funciones_clases.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Funciones y Clases: El camino a la Modularización</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-funciones_clases" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Funciones y Clases: El camino a la Modularización</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="funciones-j_eval-y-j_plot-en-r" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="funciones-j_eval-y-j_plot-en-r"><span class="header-section-number">9.1</span> Funciones j_eval y j_plot en R</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| include: false</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"./docs/j_eval_j_plot.r"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="introducción" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="introducción"><span class="header-section-number">9.2</span> Introducción</h2>
<p>Hasta ahora, hemos escrito código que se ejecuta de arriba hacia abajo, como una lista de mercado. Pero en proyectos reales de geomática, necesitamos reutilizar lógica. Si tienes un cálculo complejo para medir distancias o para valuar un predio, no quieres copiar y pegar ese código cien veces.</p>
<p>Para eso existen las <strong>funciones</strong> (máquinas que procesan datos) y las <strong>clases</strong> (moldes para crear objetos complejos). En este capítulo aprenderás a encapsular tu lógica para que tu código sea modular, limpio y fácil de mantener.</p>
</section>
<section id="objetivos-de-aprendizaje" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="objetivos-de-aprendizaje"><span class="header-section-number">9.3</span> Objetivos de aprendizaje</h2>
<ul>
<li>Crear funciones reutilizables para automatizar cálculos espaciales recurrentes.</li>
<li>Manejar parámetros opcionales, valores por defecto y argumentos dinámicos.</li>
<li>Entender los principios básicos de la Programación Orientada a Objetos (POO) para modelar elementos del mundo real.</li>
</ul>
</section>
<section id="funciones-bloques-de-código-reutilizables" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="funciones-bloques-de-código-reutilizables"><span class="header-section-number">9.4</span> 1. Funciones: bloques de código reutilizables</h2>
<p>Una función es como una receta de cocina: tú le pasas los ingredientes (parámetros de entrada), ella realiza un proceso interno (cuerpo de la función) y te entrega un resultado (valor de retorno).</p>
<p>Para ilustrar el poder de las funciones, vamos a construir tres herramientas fundamentales para cualquier analista espacial. Cada una nos enseñará un concepto nuevo de programación:</p>
<ol type="1">
<li><strong>La calculadora matemática (<code>haversine</code>):</strong> Resolveremos el cálculo de la distancia entre dos ciudades. Como la Tierra no es plana, no podemos usar una simple línea recta (Pitágoras).</li>
<li><strong>El procesador por lotes (<code>medir_ruta</code>):</strong> Crearemos una función que reciba una lista completa de coordenadas, la recorra con un ciclo <code>for</code> y llame a nuestra primera función (<code>haversine</code>) repetidas veces para medir los tramos de una ruta.</li>
<li><strong>El recolector dinámico (<code>describir_punto</code>):</strong> Crearemos una función que use <strong>argumentos dinámicos</strong> (<code>**kwargs</code> en Python, <code>...</code> en R y <code>kwargs...</code> en Julia) para atrapar cualquier cantidad de variables extra (clima, población, etc.) que el usuario decida enviarnos.</li>
</ol>
<section id="la-matemática-detrás-de-nuestra-calculadora-espacial" class="level3">
<h3 class="anchored" data-anchor-id="la-matemática-detrás-de-nuestra-calculadora-espacial">La matemática detrás de nuestra calculadora espacial</h3>
<p>La <strong>fórmula de Haversine</strong> calcula la distancia de círculo máximo (<em>great-circle distance</em>) (<a href="#fig-great_circle" class="quarto-xref">Figura&nbsp;<span>9.1</span></a>) entre dos puntos en la superficie de una esfera, como la Tierra, a partir de sus coordenadas de latitud y longitud. La fórmula tiene en cuenta la curvatura de la esfera, lo que la hace mucho más precisa que una simple distancia euclidiana (línea recta) para aplicaciones geoespaciales.</p>
<div id="fig-great_circle" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-great_circle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/great_circle_distance.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-great_circle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.1: Distancia de Círculo Máximo - fórmula de Haversine
</figcaption>
</figure>
</div>
<p>Matemáticamente, adaptada a las variables de nuestro código, la ecuación general se ve así:</p>
<p><span class="math display">\[distancia = 2 \cdot radio \cdot \arcsin\left(\sqrt{\sin^2\left(\frac{lat2 - lat1}{2}\right) + \cos(lat1) \cdot \cos(lat2) \cdot \sin^2\left(\frac{lon2 - lon1}{2}\right)}\right)\]</span></p>
<p>Donde:</p>
<ul>
<li><strong><span class="math inline">\(distancia\)</span></strong>: Distancia física entre los dos puntos a lo largo de la curva de la esfera.</li>
<li><strong><span class="math inline">\(radio\)</span></strong>: Radio de la esfera de referencia (para la Tierra, aproximadamente 6371.0 km).</li>
<li><strong><span class="math inline">\(lat1\)</span>, <span class="math inline">\(lat2\)</span></strong>: Latitudes del punto de origen y destino, estrictamente en radianes.</li>
<li><strong><span class="math inline">\(lon1\)</span>, <span class="math inline">\(lon2\)</span></strong>: Longitudes del punto de origen y destino, estrictamente en radianes.</li>
</ul>
<p><em>El truco del radio:</em> El cálculo trigonométrico interno solo produce un ángulo sin unidad física (radianes). Para convertirlo en distancia real, lo multiplicamos por el radio de la Tierra. Si metemos el radio en kilómetros (6371.0), sale en kilómetros; si lo metemos en millas (3958.8), sale en millas.</p>
<p>En programación, solemos dividir esta gran fórmula en partes más pequeñas (las variables <code>dlat</code>, <code>dlon</code>, <code>a</code> y <code>c</code>) para facilitar la lectura del código y evitar errores, reemplazando el <span class="math inline">\(\arcsin\)</span> por la función <code>atan2</code> que es computacionalmente más estable.</p>
<p>En la práctica, para que el computador procese esta gran ecuación sin ahogarse (y para evitar errores de paréntesis), los programadores la dividen en tres pasos secuenciales usando las variables <code>a</code>, <code>c</code> y <code>distancia</code>:</p>
<ol type="1">
<li><p><strong>El ajuste esférico (<span class="math inline">\(a\)</span>):</strong> Calcula el cuadrado de la mitad de la cuerda recta entre los dos puntos. <span class="math display">\[a = \sin^2\left(\frac{dlat}{2}\right) + \cos(lat1) \cdot \cos(lat2) \cdot \sin^2\left(\frac{dlon}{2}\right)\]</span></p></li>
<li><p><strong>El ángulo central (<span class="math inline">\(c\)</span>):</strong> Usa la función arcotangente (<code>atan2</code>) para hallar el ángulo exacto en radianes desde el centro de la Tierra. <span class="math display">\[c = 2 \cdot \text{atan2}\left(\sqrt{a}, \sqrt{1 - a}\right)\]</span></p></li>
<li><p><strong>La distancia física (<span class="math inline">\(distancia\)</span>):</strong> Convierte el ángulo en una longitud real multiplicándolo por el radio. <span class="math display">\[distancia = radio \cdot c\]</span></p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota técnica: ¿Por qué usamos atan2 en lugar de arcsin en el código?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si buscas la fórmula matemática clásica de Haversine en un libro, notarás que utiliza la función arcoseno (<span class="math inline">\(\arcsin\)</span>). Sin embargo, en nuestro código de programación usamos la función arcotangente (<code>atan2</code>). ¿Por qué esta diferencia?</p>
<p>Todo se reduce a la <strong>precisión computacional (punto flotante)</strong>. Cuando dos coordenadas están muy cerca la una de la otra, usar <span class="math inline">\(\arcsin(\sqrt{a})\)</span> puede generar imprecisiones severas de redondeo en el procesador.</p>
<p>Para solucionarlo, la programación aprovecha la trigonometría básica (<span class="math inline">\(\tan = \frac{\sin}{\cos}\)</span>) usando la función <code>atan2(y, x)</code>:</p>
<ul>
<li>Sabiendo que <span class="math inline">\(a = \sin^2\)</span>, entonces el seno (cateto opuesto, <span class="math inline">\(y\)</span>) es <span class="math inline">\(\sqrt{a}\)</span>.</li>
<li>Por la regla pitagórica (<span class="math inline">\(\sin^2 + \cos^2 = 1\)</span>), el coseno (cateto adyacente, <span class="math inline">\(x\)</span>) es <span class="math inline">\(\sqrt{1 - a}\)</span>.</li>
</ul>
<p>Al ingresar <span class="math inline">\(c = 2 \cdot \text{atan2}\left(\sqrt{a}, \sqrt{1 - a}\right)\)</span>, obligamos al computador a calcular el ángulo exacto usando ambos lados del triángulo, garantizando mediciones perfectas ya sea que midamos la distancia entre dos continentes o entre dos pasos en la calle.</p>
</div>
</div>
<p>Veamos cómo se programan estas máquinas paso a paso, explicando cada línea de su funcionamiento:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Python</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Julia</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos la librería matemática nativa de Python para usar senos, cosenos y radianes</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haversine(lat1, lon1, lat2, lon2, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: 4 números (lat/lon de dos puntos) y un radio opcional (por defecto 6371.0)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de latitudes a radianes (el idioma de los computadores)</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    dlat <span class="op">=</span> math.radians(lat2 <span class="op">-</span> lat1)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    dlon <span class="op">=</span> math.radians(lon2 <span class="op">-</span> lon1)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'a': el cuadrado de la mitad de la cuerda recta entre los puntos</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> (math.sin(dlat <span class="op">/</span> <span class="dv">2</span>) <span class="op">**</span> <span class="dv">2</span> <span class="op">+</span> </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>         math.cos(math.radians(lat1)) <span class="op">*</span> math.cos(math.radians(lat2)) <span class="op">*</span> math.sin(dlon <span class="op">/</span> <span class="dv">2</span>) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'c': la distancia angular central usando la función arcotangente (atan2)</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> math.atan2(math.sqrt(a), math.sqrt(<span class="dv">1</span> <span class="op">-</span> a))</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La multiplicación del ángulo por el radio, dando la distancia física real</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> c</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Cálculo de distancia simple ---"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función. Como no le damos el radio, usa el defecto en km.</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>distancia_km <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia Bogotá-Medellín: </span><span class="sc">{</span>distancia_km<span class="sc">:.2f}</span><span class="ss"> km"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>distancia_millas <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">3958.8</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia en millas: </span><span class="sc">{</span>distancia_millas<span class="sc">:.2f}</span><span class="ss"> mi"</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>distancia_metros <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia en metros: </span><span class="sc">{</span>distancia_metros<span class="sc">:.2f}</span><span class="ss"> m"</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> medir_ruta(lista_coords):</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Una lista que contiene múltiples tuplas de coordenadas</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos una lista vacía para ir guardando las distancias calculadas</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    distancias_tramos <span class="op">=</span> []</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos un ciclo que recorre la lista. Paramos un índice antes del final (- 1)</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># para no desbordar la lista cuando intentemos buscar el punto 'i + 1'</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(lista_coords) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos latitud y longitud del punto actual (donde estamos parados)</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        lat1, lon1 <span class="op">=</span> lista_coords[i]</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos latitud y longitud del punto siguiente (hacia donde vamos)</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        lat2, lon2 <span class="op">=</span> lista_coords[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a nuestra función 'haversine' para calcular la distancia de este tramo</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>        distancia_tramo <span class="op">=</span> haversine(lat1, lon1, lat2, lon2)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos el resultado de este tramo en nuestra lista final</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>        distancias_tramos.append(distancia_tramo)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La lista completa con todas las distancias de los tramos calculados</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distancias_tramos</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>ruta_colombiana <span class="op">=</span> [(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>), (<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>), (<span class="fl">3.4516</span>, <span class="op">-</span><span class="fl">76.5320</span>)]</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos nuestra función procesadora</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>tramos <span class="op">=</span> medir_ruta(ruta_colombiana)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Distancia por tramos en una ruta ---"</span>)</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimimos la lista de resultados usando una comprensión de lista para redondear a 2 decimales</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Tramos (km): </span><span class="sc">{</span>[<span class="bu">round</span>(d, <span class="dv">2</span>) <span class="cf">for</span> d <span class="kw">in</span> tramos]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> describir_punto(lat, lon, <span class="op">**</span>kwargs):</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Latitud, longitud obligatorias, y un diccionario '**kwargs' con datos extra inventados</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos creando un texto base con las coordenadas obligatorias</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    descripcion <span class="op">=</span> <span class="ss">f"Punto (</span><span class="sc">{</span>lat<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>lon<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos un ciclo para "abrir" el diccionario de parámetros extra.</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># .items() nos separa el nombre de la variable (clave) y su contenido (valor)</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> clave, valor <span class="kw">in</span> kwargs.items():</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sumamos al texto base una barrita (|) seguida del nombre y valor del dato extra</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        descripcion <span class="op">+=</span> <span class="ss">f" | </span><span class="sc">{</span>clave<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>valor<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Un solo texto largo que concatena toda la información del punto</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> descripcion</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Creación de atributos dinámicos ---"</span>)</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos enviando variables inventadas (ciudad, elevacion, costero, clima)</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(describir_punto(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, ciudad<span class="op">=</span><span class="st">"Bogotá"</span>, elevacion<span class="op">=</span><span class="dv">2640</span>))</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(describir_punto(<span class="fl">10.3997</span>, <span class="op">-</span><span class="fl">75.4795</span>, ciudad<span class="op">=</span><span class="st">"Cartagena"</span>, costero<span class="op">=</span><span class="va">True</span>, clima<span class="op">=</span><span class="st">"Cálido"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| eval: false</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos la librería matemática nativa de Python para usar senos, cosenos y radianes</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haversine(lat1, lon1, lat2, lon2, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: 4 números (lat/lon de dos puntos) y un radio opcional (por defecto 6371.0)</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de latitudes a radianes (el idioma de los computadores)</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    dlat <span class="op">=</span> math.radians(lat2 <span class="op">-</span> lat1)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    dlon <span class="op">=</span> math.radians(lon2 <span class="op">-</span> lon1)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'a': el cuadrado de la mitad de la cuerda recta entre los puntos</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> (math.sin(dlat <span class="op">/</span> <span class="dv">2</span>) <span class="op">**</span> <span class="dv">2</span> <span class="op">+</span> </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>         math.cos(math.radians(lat1)) <span class="op">*</span> math.cos(math.radians(lat2)) <span class="op">*</span> math.sin(dlon <span class="op">/</span> <span class="dv">2</span>) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'c': la distancia angular central usando la función arcotangente (atan2)</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> math.atan2(math.sqrt(a), math.sqrt(<span class="dv">1</span> <span class="op">-</span> a))</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La multiplicación del ángulo por el radio, dando la distancia física real</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> c</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Cálculo de distancia simple ---"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Cálculo de distancia simple ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función. Como no le damos el radio, usa el defecto en km.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>distancia_km <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia Bogotá-Medellín: </span><span class="sc">{</span>distancia_km<span class="sc">:.2f}</span><span class="ss"> km"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia Bogotá-Medellín: 246.14 km</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>distancia_millas <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">3958.8</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia en millas: </span><span class="sc">{</span>distancia_millas<span class="sc">:.2f}</span><span class="ss"> mi"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia en millas: 152.94 mi</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>distancia_metros <span class="op">=</span> haversine(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Distancia en metros: </span><span class="sc">{</span>distancia_metros<span class="sc">:.2f}</span><span class="ss"> m"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia en metros: 246135.99 m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> medir_ruta(lista_coords):</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Una lista que contiene múltiples tuplas de coordenadas</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos una lista vacía para ir guardando las distancias calculadas</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    distancias_tramos <span class="op">=</span> []</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos un ciclo que recorre la lista. Paramos un índice antes del final (- 1)</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># para no desbordar la lista cuando intentemos buscar el punto 'i + 1'</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(lista_coords) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos latitud y longitud del punto actual (donde estamos parados)</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        lat1, lon1 <span class="op">=</span> lista_coords[i]</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos latitud y longitud del punto siguiente (hacia donde vamos)</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        lat2, lon2 <span class="op">=</span> lista_coords[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a nuestra función 'haversine' para calcular la distancia de este tramo</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        distancia_tramo <span class="op">=</span> haversine(lat1, lon1, lat2, lon2)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos el resultado de este tramo en nuestra lista final</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>        distancias_tramos.append(distancia_tramo)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La lista completa con todas las distancias de los tramos calculados</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distancias_tramos</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>ruta_colombiana <span class="op">=</span> [(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>), (<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>), (<span class="fl">3.4516</span>, <span class="op">-</span><span class="fl">76.5320</span>)]</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos nuestra función procesadora</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>tramos <span class="op">=</span> medir_ruta(ruta_colombiana)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Distancia por tramos en una ruta ---"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Distancia por tramos en una ruta ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimimos la lista de resultados usando una comprensión de lista para redondear a 2 decimales</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Tramos (km): </span><span class="sc">{</span>[<span class="bu">round</span>(d, <span class="dv">2</span>) <span class="cf">for</span> d <span class="kw">in</span> tramos]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tramos (km): [246.14, 327.9]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> describir_punto(lat, lon, <span class="op">**</span>kwargs):</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Latitud, longitud obligatorias, y un diccionario '**kwargs' con datos extra inventados</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos creando un texto base con las coordenadas obligatorias</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    descripcion <span class="op">=</span> <span class="ss">f"Punto (</span><span class="sc">{</span>lat<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>lon<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos un ciclo para "abrir" el diccionario de parámetros extra.</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># .items() nos separa el nombre de la variable (clave) y su contenido (valor)</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> clave, valor <span class="kw">in</span> kwargs.items():</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sumamos al texto base una barrita (|) seguida del nombre y valor del dato extra</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        descripcion <span class="op">+=</span> <span class="ss">f" | </span><span class="sc">{</span>clave<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>valor<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Un solo texto largo que concatena toda la información del punto</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> descripcion</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Creación de atributos dinámicos ---"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Creación de atributos dinámicos ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos enviando variables inventadas (ciudad, elevacion, costero, clima)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(describir_punto(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, ciudad<span class="op">=</span><span class="st">"Bogotá"</span>, elevacion<span class="op">=</span><span class="dv">2640</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Punto (4.6097, -74.0817) | ciudad: Bogotá | elevacion: 2640</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(describir_punto(<span class="fl">10.3997</span>, <span class="op">-</span><span class="fl">75.4795</span>, ciudad<span class="op">=</span><span class="st">"Cartagena"</span>, costero<span class="op">=</span><span class="va">True</span>, clima<span class="op">=</span><span class="st">"Cálido"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Punto (10.3997, -75.4795) | ciudad: Cartagena | costero: True | clima: Cálido</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R no tiene una función nativa directa para radianes, la creamos rápido</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>pasar_a_radianes <span class="ot">&lt;-</span> <span class="cf">function</span>(grados) { </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(grados <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span>) </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>haversine <span class="ot">&lt;-</span> <span class="cf">function</span>(lat1, lon1, lat2, lon2, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: 4 coordenadas decimales y un radio opcional (por defecto 6371.0)</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de latitudes a radianes llamando a nuestra mini-función</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    dlat <span class="ot">&lt;-</span> <span class="fu">pasar_a_radianes</span>(lat2 <span class="sc">-</span> lat1)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    dlon <span class="ot">&lt;-</span> <span class="fu">pasar_a_radianes</span>(lon2 <span class="sc">-</span> lon1)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'a': Ajuste trigonométrico esférico</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> (<span class="fu">sin</span>(dlat <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> </span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">cos</span>(<span class="fu">pasar_a_radianes</span>(lat1)) <span class="sc">*</span> <span class="fu">cos</span>(<span class="fu">pasar_a_radianes</span>(lat2)) <span class="sc">*</span> <span class="fu">sin</span>(dlon <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'c': Ángulo central en radianes usando arcotangente (atan2)</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    c <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">atan2</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="dv">1</span> <span class="sc">-</span> a))</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Multiplica el ángulo por el radio para darnos la distancia física</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    distancia <span class="ot">&lt;-</span> radio <span class="sc">*</span> c</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancia) </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"--- Cálculo de distancia simple ---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función usando el radio en kilómetros por defecto</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>distancia_km <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>)</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia Bogotá-Medellín: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, distancia_km))</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>distancia_millas <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="at">radio =</span> <span class="fl">3958.8</span>)</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia en millas: %.2f mi</span><span class="sc">\n</span><span class="st">"</span>, distancia_millas))</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>distancia_metros <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="at">radio =</span> <span class="fl">6371000.0</span>)</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, distancia_metros))</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>medir_ruta <span class="ot">&lt;-</span> <span class="cf">function</span>(lista_coords) {</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Una lista de listas numéricas (coordenadas)</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos un vector numérico vacío donde depositaremos las respuestas</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    distancias_tramos <span class="ot">&lt;-</span> <span class="fu">c</span>() </span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos el ciclo restando 1 al tamaño total. Si no restamos 1, </span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># al final del ciclo R buscará el punto 'i + 1' que no existe y arrojará error.</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(lista_coords) <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos el punto actual (i)</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>        punto_a <span class="ot">&lt;-</span> lista_coords[[i]]</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos el punto siguiente (i+1)</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>        punto_b <span class="ot">&lt;-</span> lista_coords[[i <span class="sc">+</span> <span class="dv">1</span>]]</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a 'haversine' dándole latitud y longitud de ambos puntos</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>        d <span class="ot">&lt;-</span> <span class="fu">haversine</span>(punto_a[<span class="dv">1</span>], punto_a[<span class="dv">2</span>], punto_b[<span class="dv">1</span>], punto_b[<span class="dv">2</span>])</span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Añadimos (concatenamos) la distancia recién calculada a nuestro vector</span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>        distancias_tramos <span class="ot">&lt;-</span> <span class="fu">c</span>(distancias_tramos, d)</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El vector repleto con las distancias de todos los tramos</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancias_tramos)</span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>ruta_colombiana <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>), <span class="fu">c</span>(<span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>), <span class="fu">c</span>(<span class="fl">3.4516</span>, <span class="sc">-</span><span class="fl">76.5320</span>))</span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función</span></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>tramos <span class="ot">&lt;-</span> <span class="fu">medir_ruta</span>(ruta_colombiana)</span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Distancia por tramos en una ruta ---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Tramos (km): %.2f, %.2f</span><span class="sc">\n</span><span class="st">"</span>, tramos[<span class="dv">1</span>], tramos[<span class="dv">2</span>]))</span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>describir_punto <span class="ot">&lt;-</span> <span class="cf">function</span>(lat, lon, ...) {</span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: lat, lon, y unos tres puntos (...) que atrapan variables extra nombradas</span></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos el texto base principal</span></span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>    descripcion <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"Punto (%.4f, %.4f)"</span>, lat, lon)</span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extraemos las variables atrapadas en los '...' y las metemos a una lista</span></span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a>    args_extra <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verificamos si la lista tiene datos (si el usuario envió algo extra)</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(args_extra) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Recorremos cada nombre de variable (clave) en la lista extra</span></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (clave <span class="cf">in</span> <span class="fu">names</span>(args_extra)) {</span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Pegamos (paste0) la barra, la clave y su valor al texto original</span></span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a>            descripcion <span class="ot">&lt;-</span> <span class="fu">paste0</span>(descripcion, <span class="fu">sprintf</span>(<span class="st">" | %s: %s"</span>, clave, args_extra[[clave]]))</span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El texto unificado</span></span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(descripcion)</span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Creación de atributos dinámicos ---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasamos las coordenadas y le inventamos datos (ciudad, elevacion, etc.)</span></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">describir_punto</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="at">ciudad=</span><span class="st">"Bogotá"</span>, <span class="at">elevacion=</span><span class="dv">2640</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">describir_punto</span>(<span class="fl">10.3997</span>, <span class="sc">-</span><span class="fl">75.4795</span>, <span class="at">ciudad=</span><span class="st">"Cartagena"</span>, <span class="at">costero=</span><span class="cn">TRUE</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| eval: false</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># R no tiene una función nativa directa para radianes, la creamos rápido</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>pasar_a_radianes <span class="ot">&lt;-</span> <span class="cf">function</span>(grados) { </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(grados <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span>) </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>haversine <span class="ot">&lt;-</span> <span class="cf">function</span>(lat1, lon1, lat2, lon2, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: 4 coordenadas decimales y un radio opcional (por defecto 6371.0)</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de latitudes a radianes llamando a nuestra mini-función</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    dlat <span class="ot">&lt;-</span> <span class="fu">pasar_a_radianes</span>(lat2 <span class="sc">-</span> lat1)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    dlon <span class="ot">&lt;-</span> <span class="fu">pasar_a_radianes</span>(lon2 <span class="sc">-</span> lon1)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'a': Ajuste trigonométrico esférico</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> (<span class="fu">sin</span>(dlat <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> </span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>          <span class="fu">cos</span>(<span class="fu">pasar_a_radianes</span>(lat1)) <span class="sc">*</span> <span class="fu">cos</span>(<span class="fu">pasar_a_radianes</span>(lat2)) <span class="sc">*</span> <span class="fu">sin</span>(dlon <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'c': Ángulo central en radianes usando arcotangente (atan2)</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    c <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">atan2</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="dv">1</span> <span class="sc">-</span> a))</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Multiplica el ángulo por el radio para darnos la distancia física</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    distancia <span class="ot">&lt;-</span> radio <span class="sc">*</span> c</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancia) </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"--- Cálculo de distancia simple ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Cálculo de distancia simple ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función usando el radio en kilómetros por defecto</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>distancia_km <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia Bogotá-Medellín: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, distancia_km))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia Bogotá-Medellín: 246.14 km</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>distancia_millas <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="at">radio =</span> <span class="fl">3958.8</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia en millas: %.2f mi</span><span class="sc">\n</span><span class="st">"</span>, distancia_millas))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia en millas: 152.94 mi</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>distancia_metros <span class="ot">&lt;-</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="at">radio =</span> <span class="fl">6371000.0</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Distancia en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, distancia_metros))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Distancia en metros: 246135.99 m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>medir_ruta <span class="ot">&lt;-</span> <span class="cf">function</span>(lista_coords) {</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Una lista de listas numéricas (coordenadas)</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos un vector numérico vacío donde depositaremos las respuestas</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    distancias_tramos <span class="ot">&lt;-</span> <span class="fu">c</span>() </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos el ciclo restando 1 al tamaño total. Si no restamos 1, </span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># al final del ciclo R buscará el punto 'i + 1' que no existe y arrojará error.</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(lista_coords) <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos el punto actual (i)</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>        punto_a <span class="ot">&lt;-</span> lista_coords[[i]]</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos el punto siguiente (i+1)</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        punto_b <span class="ot">&lt;-</span> lista_coords[[i <span class="sc">+</span> <span class="dv">1</span>]]</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a 'haversine' dándole latitud y longitud de ambos puntos</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>        d <span class="ot">&lt;-</span> <span class="fu">haversine</span>(punto_a[<span class="dv">1</span>], punto_a[<span class="dv">2</span>], punto_b[<span class="dv">1</span>], punto_b[<span class="dv">2</span>])</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Añadimos (concatenamos) la distancia recién calculada a nuestro vector</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>        distancias_tramos <span class="ot">&lt;-</span> <span class="fu">c</span>(distancias_tramos, d)</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El vector repleto con las distancias de todos los tramos</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancias_tramos)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>ruta_colombiana <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>), <span class="fu">c</span>(<span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>), <span class="fu">c</span>(<span class="fl">3.4516</span>, <span class="sc">-</span><span class="fl">76.5320</span>))</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>tramos <span class="ot">&lt;-</span> <span class="fu">medir_ruta</span>(ruta_colombiana)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Distancia por tramos en una ruta ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Distancia por tramos en una ruta ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Tramos (km): %.2f, %.2f</span><span class="sc">\n</span><span class="st">"</span>, tramos[<span class="dv">1</span>], tramos[<span class="dv">2</span>]))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tramos (km): 246.14, 327.90</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>describir_punto <span class="ot">&lt;-</span> <span class="cf">function</span>(lat, lon, ...) {</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: lat, lon, y unos tres puntos (...) que atrapan variables extra nombradas</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos el texto base principal</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    descripcion <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"Punto (%.4f, %.4f)"</span>, lat, lon)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extraemos las variables atrapadas en los '...' y las metemos a una lista</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    args_extra <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verificamos si la lista tiene datos (si el usuario envió algo extra)</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(args_extra) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Recorremos cada nombre de variable (clave) en la lista extra</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (clave <span class="cf">in</span> <span class="fu">names</span>(args_extra)) {</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Pegamos (paste0) la barra, la clave y su valor al texto original</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>            descripcion <span class="ot">&lt;-</span> <span class="fu">paste0</span>(descripcion, <span class="fu">sprintf</span>(<span class="st">" | %s: %s"</span>, clave, args_extra[[clave]]))</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El texto unificado</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(descripcion)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Creación de atributos dinámicos ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Creación de atributos dinámicos ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasamos las coordenadas y le inventamos datos (ciudad, elevacion, etc.)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">describir_punto</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="at">ciudad=</span><span class="st">"Bogotá"</span>, <span class="at">elevacion=</span><span class="dv">2640</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Punto (4.6097, -74.0817) | ciudad: Bogotá | elevacion: 2640 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">describir_punto</span>(<span class="fl">10.3997</span>, <span class="sc">-</span><span class="fl">75.4795</span>, <span class="at">ciudad=</span><span class="st">"Cartagena"</span>, <span class="at">costero=</span><span class="cn">TRUE</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Punto (10.3997, -75.4795) | ciudad: Cartagena | costero: TRUE </code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># En Julia, los argumentos opcionales con nombre DEBEN ir después de un punto y coma (;)</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">haversine</span>(lat1, lon1, lat2, lon2; radio<span class="op">=</span><span class="fl">6371.0</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: 4 números flotantes y un radio (por defecto en km)</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de latitudes a radianes con la función nativa 'deg2rad'</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    dlat <span class="op">=</span> <span class="fu">deg2rad</span>(lat2 <span class="op">-</span> lat1)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    dlon <span class="op">=</span> <span class="fu">deg2rad</span>(lon2 <span class="op">-</span> lon1)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'a': Ajuste esférico para la Tierra</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> (<span class="fu">sin</span>(dlat <span class="op">/</span> <span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>         <span class="fu">cos</span>(<span class="fu">deg2rad</span>(lat1)) <span class="op">*</span> <span class="fu">cos</span>(<span class="fu">deg2rad</span>(lat2)) <span class="op">*</span> <span class="fu">sin</span>(dlon <span class="op">/</span> <span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula 'c': Ángulo central en radianes (Ojo: en Julia es solo 'atan', no 'atan2')</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu">atan</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="fl">1</span> <span class="op">-</span> a)) </span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Multiplica el ángulo por el radio para la distancia real</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> c</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"--- Cálculo de distancia simple ---"</span>)</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos con el radio por defecto (km)</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>distancia_km <span class="op">=</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>)</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"Distancia Bogotá-Medellín: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, distancia_km)</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>distancia_millas <span class="op">=</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">3958.8</span>)</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"Distancia en millas: %.2f mi</span><span class="sc">\n</span><span class="st">"</span>, distancia_millas)</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>distancia_metros <span class="op">=</span> <span class="fu">haversine</span>(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"Distancia en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, distancia_metros)</span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">medir_ruta</span>(lista_coords)</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Un arreglo con tuplas de coordenadas</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos un arreglo vacío pero tipado (Float64) para que Julia procese más rápido</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>    distancias_tramos <span class="op">=</span> <span class="dt">Float64</span>[] </span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iniciamos el ciclo restando 1. Si no restamos 1, al final del ciclo</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Julia intentará buscar el punto 'i + 1', el cual no existe, y colapsará.</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>(<span class="fu">length</span>(lista_coords) <span class="op">-</span> <span class="fl">1</span>)</span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extraemos coordenadas iniciales (i) y finales (i+1)</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a>        lat1, lon1 <span class="op">=</span> lista_coords[i]</span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a>        lat2, lon2 <span class="op">=</span> lista_coords[i <span class="op">+</span> <span class="fl">1</span>]</span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Invocamos la función 'haversine' y 'empujamos' (push!) el dato al arreglo final</span></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(distancias_tramos, <span class="fu">haversine</span>(lat1, lon1, lat2, lon2))</span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: Arreglo con las distancias parciales</span></span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distancias_tramos</span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>ruta_colombiana <span class="op">=</span> [(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>), (<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>), (<span class="fl">3.4516</span>, <span class="op">-</span><span class="fl">76.5320</span>)]</span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecutamos la función</span></span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a>tramos <span class="op">=</span> <span class="fu">medir_ruta</span>(ruta_colombiana)</span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Distancia por tramos en una ruta ---"</span>)</span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"Tramos (km): [%.2f, %.2f]</span><span class="sc">\n</span><span class="st">"</span>, tramos[<span class="fl">1</span>], tramos[<span class="fl">2</span>])</span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a><span class="co"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Usamos 'kwargs...' después del punto y coma (;) para atrapar variables extra con nombre</span></span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">describir_punto</span>(lat, lon; kwargs<span class="op">...</span>)</span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RECIBE: Coordenadas y una "bolsa" con parámetros extra</span></span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos la cadena de texto base</span></span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a>    descripcion <span class="op">=</span> <span class="st">"Punto (</span><span class="sc">$</span>lat<span class="st">, </span><span class="sc">$</span>lon<span class="st">)"</span></span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Desempaquetamos la bolsa iterando sobre la clave (nombre de variable) y el valor</span></span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (clave, valor) <span class="kw">in</span> kwargs</span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a>        <span class="co"># En Julia el operador *= sirve para concatenarle más texto a una cadena existente</span></span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a>        descripcion <span class="op">*=</span> <span class="st">" | </span><span class="sc">$</span>clave<span class="st">: </span><span class="sc">$</span>valor<span class="st">"</span></span>
<span id="cb40-84"><a href="#cb40-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb40-85"><a href="#cb40-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-86"><a href="#cb40-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El texto concatenado</span></span>
<span id="cb40-87"><a href="#cb40-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> descripcion</span>
<span id="cb40-88"><a href="#cb40-88" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-89"><a href="#cb40-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-90"><a href="#cb40-90" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Creación de atributos dinámicos ---"</span>)</span>
<span id="cb40-91"><a href="#cb40-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Le mandamos variables extra (ciudad, elevacion, etc)</span></span>
<span id="cb40-92"><a href="#cb40-92" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">describir_punto</span>(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, ciudad<span class="op">=</span><span class="st">"Bogotá"</span>, elevacion<span class="op">=</span><span class="fl">2640</span>))</span>
<span id="cb40-93"><a href="#cb40-93" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">describir_punto</span>(<span class="fl">10.3997</span>, <span class="op">-</span><span class="fl">75.4795</span>, ciudad<span class="op">=</span><span class="st">"Cartagena"</span>, costero<span class="op">=</span><span class="cn">true</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| eval: false</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">j_eval</span>(r<span class="st">"-(</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="st"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="st"># En Julia, los argumentos opcionales con nombre DEBEN ir después de un punto y coma (;)</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="st">function haversine(lat1, lon1, lat2, lon2; radio=6371.0)</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="st">    # RECIBE: 4 números flotantes y un radio (por defecto en km)</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="st">    # Convierte la diferencia de latitudes a radianes con la función nativa 'deg2rad'</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="st">    dlat = deg2rad(lat2 - lat1)</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="st">    # Convierte la diferencia de longitudes a radianes</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="st">    dlon = deg2rad(lon2 - lon1)</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="st">    # Calcula 'a': Ajuste esférico para la Tierra</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="st">    a = (sin(dlat / 2)^2 + </span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="st">         cos(deg2rad(lat1)) * cos(deg2rad(lat2)) * sin(dlon / 2)^2)</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="st">         </span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="st">    # Calcula 'c': Ángulo central en radianes (Ojo: en Julia es solo 'atan', no 'atan2')</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="st">    c = 2 * atan(sqrt(a), sqrt(1 - a)) </span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="st">    # SACA: Multiplica el ángulo por el radio para la distancia real</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="st">    return radio * c</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a><span class="st">end</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a><span class="st">using Printf</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a><span class="st">println("</span><span class="sc">---</span> Cálculo de distancia simple <span class="sc">---</span><span class="st">")</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a><span class="st"># Ejecutamos con el radio por defecto (km)</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a><span class="st">distancia_km = haversine(4.6097, -74.0817, 6.2442, -75.5812)</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a><span class="st">@printf("</span>Distancia Bogotá<span class="sc">-</span>Medellín<span class="sc">:</span> %.<span class="dv">2</span>f km\n<span class="st">", distancia_km)</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a><span class="st"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a><span class="st">distancia_millas = haversine(4.6097, -74.0817, 6.2442, -75.5812, radio=3958.8)</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a><span class="st">@printf("</span>Distancia en millas<span class="sc">:</span> %.<span class="dv">2</span>f mi\n<span class="st">", distancia_millas)</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a><span class="st"># Aplicamos el "</span>truco<span class="st">" matemático: si le pasamos el radio en metros, el resultado sale en metros</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a><span class="st">distancia_metros = haversine(4.6097, -74.0817, 6.2442, -75.5812, radio=6371000.0)</span></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a><span class="st">@printf("</span>Distancia en metros<span class="sc">:</span> %.<span class="dv">2</span>f m\n<span class="st">", distancia_metros)</span></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a><span class="st"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span></span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a><span class="st">function medir_ruta(lista_coords)</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a><span class="st">    # RECIBE: Un arreglo con tuplas de coordenadas</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a><span class="st">    # Creamos un arreglo vacío pero tipado (Float64) para que Julia procese más rápido</span></span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a><span class="st">    distancias_tramos = Float64[] </span></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a><span class="st">    # Iniciamos el ciclo restando 1. Si no restamos 1, al final del ciclo</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a><span class="st">    # Julia intentará buscar el punto 'i + 1', el cual no existe, y colapsará.</span></span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a><span class="st">    for i in 1:(length(lista_coords) - 1)</span></span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a><span class="st">        # Extraemos coordenadas iniciales (i) y finales (i+1)</span></span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a><span class="st">        lat1, lon1 = lista_coords[i]</span></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a><span class="st">        lat2, lon2 = lista_coords[i + 1]</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a><span class="st">        # Invocamos la función 'haversine' y 'empujamos' (push!) el dato al arreglo final</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a><span class="st">        push!(distancias_tramos, haversine(lat1, lon1, lat2, lon2))</span></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a><span class="st">    end</span></span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a><span class="st">    # SACA: Arreglo con las distancias parciales</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a><span class="st">    return distancias_tramos</span></span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a><span class="st">end</span></span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a><span class="st"># Definimos una ruta con 3 puntos (2 tramos)</span></span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a><span class="st">ruta_colombiana = [(4.6097, -74.0817), (6.2442, -75.5812), (3.4516, -76.5320)]</span></span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a><span class="st"># Ejecutamos la función</span></span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a><span class="st">tramos = medir_ruta(ruta_colombiana)</span></span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-69"><a href="#cb41-69" aria-hidden="true" tabindex="-1"></a><span class="st">println("</span>\n<span class="sc">---</span> Distancia por tramos en una ruta <span class="sc">---</span><span class="st">")</span></span>
<span id="cb41-70"><a href="#cb41-70" aria-hidden="true" tabindex="-1"></a><span class="st">@printf("</span><span class="fu">Tramos</span> (km)<span class="sc">:</span> [<span class="sc">%.2f, %</span>.<span class="dv">2</span>f]\n<span class="st">", tramos[1], tramos[2])</span></span>
<span id="cb41-71"><a href="#cb41-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-72"><a href="#cb41-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-73"><a href="#cb41-73" aria-hidden="true" tabindex="-1"></a><span class="st"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span></span>
<span id="cb41-74"><a href="#cb41-74" aria-hidden="true" tabindex="-1"></a><span class="st"># Usamos 'kwargs...' después del punto y coma (;) para atrapar variables extra con nombre</span></span>
<span id="cb41-75"><a href="#cb41-75" aria-hidden="true" tabindex="-1"></a><span class="st">function describir_punto(lat, lon; kwargs...)</span></span>
<span id="cb41-76"><a href="#cb41-76" aria-hidden="true" tabindex="-1"></a><span class="st">    # RECIBE: Coordenadas y una "</span>bolsa<span class="st">" con parámetros extra</span></span>
<span id="cb41-77"><a href="#cb41-77" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-78"><a href="#cb41-78" aria-hidden="true" tabindex="-1"></a><span class="st">    # Creamos la cadena de texto base</span></span>
<span id="cb41-79"><a href="#cb41-79" aria-hidden="true" tabindex="-1"></a><span class="st">    descripcion = "</span><span class="fu">Punto</span> (<span class="sc">$</span>lat, <span class="sc">$</span>lon)<span class="st">"</span></span>
<span id="cb41-80"><a href="#cb41-80" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-81"><a href="#cb41-81" aria-hidden="true" tabindex="-1"></a><span class="st">    # Desempaquetamos la bolsa iterando sobre la clave (nombre de variable) y el valor</span></span>
<span id="cb41-82"><a href="#cb41-82" aria-hidden="true" tabindex="-1"></a><span class="st">    for (clave, valor) in kwargs</span></span>
<span id="cb41-83"><a href="#cb41-83" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb41-84"><a href="#cb41-84" aria-hidden="true" tabindex="-1"></a><span class="st">        # En Julia el operador *= sirve para concatenarle más texto a una cadena existente</span></span>
<span id="cb41-85"><a href="#cb41-85" aria-hidden="true" tabindex="-1"></a><span class="st">        descripcion *= "</span> <span class="sc">|</span> <span class="er">$</span>clave<span class="sc">:</span> <span class="er">$</span>valor<span class="st">"</span></span>
<span id="cb41-86"><a href="#cb41-86" aria-hidden="true" tabindex="-1"></a><span class="st">    end</span></span>
<span id="cb41-87"><a href="#cb41-87" aria-hidden="true" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb41-88"><a href="#cb41-88" aria-hidden="true" tabindex="-1"></a><span class="st">    # SACA: El texto concatenado</span></span>
<span id="cb41-89"><a href="#cb41-89" aria-hidden="true" tabindex="-1"></a><span class="st">    return descripcion</span></span>
<span id="cb41-90"><a href="#cb41-90" aria-hidden="true" tabindex="-1"></a><span class="st">end</span></span>
<span id="cb41-91"><a href="#cb41-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-92"><a href="#cb41-92" aria-hidden="true" tabindex="-1"></a><span class="st">println("</span>\n<span class="sc">---</span> Creación de atributos dinámicos <span class="sc">---</span><span class="st">")</span></span>
<span id="cb41-93"><a href="#cb41-93" aria-hidden="true" tabindex="-1"></a><span class="st"># Le mandamos variables extra (ciudad, elevacion, etc)</span></span>
<span id="cb41-94"><a href="#cb41-94" aria-hidden="true" tabindex="-1"></a><span class="st">println(describir_punto(4.6097, -74.0817, ciudad="</span>Bogotá<span class="st">", elevacion=2640))</span></span>
<span id="cb41-95"><a href="#cb41-95" aria-hidden="true" tabindex="-1"></a><span class="st">println(describir_punto(10.3997, -75.4795, ciudad="</span>Cartagena<span class="st">", costero=true))</span></span>
<span id="cb41-96"><a href="#cb41-96" aria-hidden="true" tabindex="-1"></a><span class="st">)-"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Starting Julia ...</code></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- FUNCIÓN 1: CÁLCULO MATEMÁTICO BÁSICO ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># En Julia, los argumentos opcionales con nombre DEBEN ir después de un punto y coma (;)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function haversine(lat1, lon1, lat2, lon2; radio=6371.0)</span>
       <span style="color:#008b8b;">    # RECIBE: 4 números flotantes y un radio (por defecto en km)</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Convierte la diferencia de latitudes a radianes con la función nativa 'deg2rad'</span>
       <span style="color:#008b8b;">    dlat = deg2rad(lat2 - lat1)</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Convierte la diferencia de longitudes a radianes</span>
       <span style="color:#008b8b;">    dlon = deg2rad(lon2 - lon1)</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Calcula 'a': Ajuste esférico para la Tierra</span>
       <span style="color:#008b8b;">    a = (sin(dlat / 2)^2 + </span>
       <span style="color:#008b8b;">         cos(deg2rad(lat1)) * cos(deg2rad(lat2)) * sin(dlon / 2)^2)</span>
       <span style="color:#008b8b;">         </span>
       <span style="color:#008b8b;">    # Calcula 'c': Ángulo central en radianes (Ojo: en Julia es solo 'atan', no 'atan2')</span>
       <span style="color:#008b8b;">    c = 2 * atan(sqrt(a), sqrt(1 - a)) </span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # SACA: Multiplica el ángulo por el radio para la distancia real</span>
       <span style="color:#008b8b;">    return radio * c</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">haversine (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">using Printf</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println("--- Cálculo de distancia simple ---")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">--- Cálculo de distancia simple ---

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Ejecutamos con el radio por defecto (km)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">distancia_km = haversine(4.6097, -74.0817, 6.2442, -75.5812)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">246.13598981951554

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("Distancia Bogotá-Medellín: %.2f km\n", distancia_km)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Distancia Bogotá-Medellín: 246.14 km

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Sobrescribimos el parámetro 'radio' para obtener el resultado en millas (3958.8)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">distancia_millas = haversine(4.6097, -74.0817, 6.2442, -75.5812, radio=3958.8)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">152.9435185210325

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("Distancia en millas: %.2f mi\n", distancia_millas)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Distancia en millas: 152.94 mi

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Aplicamos el "truco" matemático: si le pasamos el radio en metros, el resultado sale en metros</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">distancia_metros = haversine(4.6097, -74.0817, 6.2442, -75.5812, radio=6371000.0)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">246135.98981951553

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("Distancia en metros: %.2f m\n", distancia_metros)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Distancia en metros: 246135.99 m

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- FUNCIÓN 2: PROCESADOR POR LOTES ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function medir_ruta(lista_coords)</span>
       <span style="color:#008b8b;">    # RECIBE: Un arreglo con tuplas de coordenadas</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Creamos un arreglo vacío pero tipado (Float64) para que Julia procese más rápido</span>
       <span style="color:#008b8b;">    distancias_tramos = Float64[] </span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Iniciamos el ciclo restando 1. Si no restamos 1, al final del ciclo</span>
       <span style="color:#008b8b;">    # Julia intentará buscar el punto 'i + 1', el cual no existe, y colapsará.</span>
       <span style="color:#008b8b;">    for i in 1:(length(lista_coords) - 1)</span>
       <span style="color:#008b8b;">        </span>
       <span style="color:#008b8b;">        # Extraemos coordenadas iniciales (i) y finales (i+1)</span>
       <span style="color:#008b8b;">        lat1, lon1 = lista_coords[i]</span>
       <span style="color:#008b8b;">        lat2, lon2 = lista_coords[i + 1]</span>
       <span style="color:#008b8b;">        </span>
       <span style="color:#008b8b;">        # Invocamos la función 'haversine' y 'empujamos' (push!) el dato al arreglo final</span>
       <span style="color:#008b8b;">        push!(distancias_tramos, haversine(lat1, lon1, lat2, lon2))</span>
       <span style="color:#008b8b;">    end</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # SACA: Arreglo con las distancias parciales</span>
       <span style="color:#008b8b;">    return distancias_tramos</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">medir_ruta (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Definimos una ruta con 3 puntos (2 tramos)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">ruta_colombiana = [(4.6097, -74.0817), (6.2442, -75.5812), (3.4516, -76.5320)]</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">3-element Vector{Tuple{Float64, Float64}}:
 (4.6097, -74.0817)
 (6.2442, -75.5812)
 (3.4516, -76.532)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Ejecutamos la función</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">tramos = medir_ruta(ruta_colombiana)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">2-element Vector{Float64}:
 246.13598981951554
 327.90245361712397

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println("\n--- Distancia por tramos en una ruta ---")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">--- Distancia por tramos en una ruta ---

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("Tramos (km): [%.2f, %.2f]\n", tramos[1], tramos[2])</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Tramos (km): [246.14, 327.90]

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- FUNCIÓN 3: RECOLECTOR DINÁMICO ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Usamos 'kwargs...' después del punto y coma (;) para atrapar variables extra con nombre</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function describir_punto(lat, lon; kwargs...)</span>
       <span style="color:#008b8b;">    # RECIBE: Coordenadas y una "bolsa" con parámetros extra</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Creamos la cadena de texto base</span>
       <span style="color:#008b8b;">    descripcion = "Punto ($lat, $lon)"</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # Desempaquetamos la bolsa iterando sobre la clave (nombre de variable) y el valor</span>
       <span style="color:#008b8b;">    for (clave, valor) in kwargs</span>
       <span style="color:#008b8b;">        </span>
       <span style="color:#008b8b;">        # En Julia el operador *= sirve para concatenarle más texto a una cadena existente</span>
       <span style="color:#008b8b;">        descripcion *= " | $clave: $valor"</span>
       <span style="color:#008b8b;">    end</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    # SACA: El texto concatenado</span>
       <span style="color:#008b8b;">    return descripcion</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">describir_punto (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println("\n--- Creación de atributos dinámicos ---")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">--- Creación de atributos dinámicos ---

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Le mandamos variables extra (ciudad, elevacion, etc)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println(describir_punto(4.6097, -74.0817, ciudad="Bogotá", elevacion=2640))</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Punto (4.6097, -74.0817) | ciudad: Bogotá | elevacion: 2640

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println(describir_punto(10.3997, -75.4795, ciudad="Cartagena", costero=true))</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">Punto (10.3997, -75.4795) | ciudad: Cartagena | costero: true

</pre>
</div>
</div>
</div>
</section>
<section id="resumen-de-sintaxis-estructura-de-funciones" class="level3">
<h3 class="anchored" data-anchor-id="resumen-de-sintaxis-estructura-de-funciones">Resumen de sintaxis: estructura de funciones</h3>
<div id="tbl-funciones_argumentos" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-funciones_argumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;9.1: Diferencias en el empaquetado y argumentos de funciones
</figcaption>
<div aria-describedby="tbl-funciones_argumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Característica</th>
<th style="text-align: left;">Python</th>
<th style="text-align: left;">R</th>
<th style="text-align: left;">Julia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Declaración</strong></td>
<td style="text-align: left;"><code>def calc(x):</code></td>
<td style="text-align: left;"><code>calc &lt;- function(x) { }</code></td>
<td style="text-align: left;"><code>function calc(x) ... end</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Retorno</strong></td>
<td style="text-align: left;"><code>return y</code></td>
<td style="text-align: left;"><code>return(y)</code></td>
<td style="text-align: left;"><code>return y</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Parámetro x defecto</strong></td>
<td style="text-align: left;"><code>def calc(r=6371):</code></td>
<td style="text-align: left;"><code>function(r=6371)</code></td>
<td style="text-align: left;"><code>function calc(; r=6371)</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Múltiples args extra</strong></td>
<td style="text-align: left;"><code>**kwargs</code></td>
<td style="text-align: left;"><code>...</code></td>
<td style="text-align: left;"><code>kwargs...</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="clases-organizando-datos-y-comportamiento-juntos" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="clases-organizando-datos-y-comportamiento-juntos"><span class="header-section-number">9.5</span> 2. Clases: organizando datos y comportamiento juntos</h2>
<p>En el mundo del desarrollo de software, existen diferentes formas de estructurar el código. Tradicionalmente, la programación separaba los datos por un lado y las funciones que operaban sobre esos datos por el otro. Sin embargo, la <strong>Programación Orientada a Objetos (POO)</strong> propone un paradigma distinto: agrupar los datos y los comportamientos relacionados en una sola entidad unificada.</p>
<p>Para dominar este paradigma, primero debemos entender sus conceptos genéricos fundamentales:</p>
<ul>
<li><strong>Clase:</strong> Es el plano, la plantilla o el molde abstracto. No contiene datos reales, sino que define qué estructura tendrán los datos y qué acciones se podrán realizar.</li>
<li><strong>Objeto (o instancia):</strong> Es la materialización de la clase. Es el producto final creado a partir del molde, que ocupa un espacio real en la memoria de la computadora y contiene datos específicos.</li>
<li><strong>Atributos (o estado):</strong> Son las variables internas que guardan las características únicas de cada objeto.</li>
<li><strong>Métodos (o comportamiento):</strong> Son las funciones que viven dentro (o asociadas) al objeto. Definen lo que el objeto “sabe hacer” con sus propios datos.</li>
<li><strong>Constructor:</strong> Es la puerta de entrada. Es el mecanismo inicial que toma los datos crudos y los ensambla siguiendo las reglas de la clase para dar vida a un nuevo objeto.</li>
</ul>
<section id="analogía-entre-clasesobjetos-y-moldesarepas" class="level3">
<h3 class="anchored" data-anchor-id="analogía-entre-clasesobjetos-y-moldesarepas">Analogía entre clases/objetos y moldes/arepas</h3>
<ul>
<li><strong>La Clase (el molde):</strong> Es como el plano arquitectónico de una casa o el molde para hacer arepas. El molde define que toda arepa tendrá un grosor y un diámetro, pero el molde en sí no se puede comer.</li>
<li><strong>El Objeto (la instancia):</strong> Es la arepa ya hecha, salida del molde. Puedes sacar mil arepas distintas (unas de queso, otras de carne) usando el mismo molde. Todas comparten la misma estructura, pero contienen datos (rellenos) diferentes.</li>
</ul>
</section>
<section id="el-reto-de-simples-números-a-entidades-inteligentes" class="level3">
<h3 class="anchored" data-anchor-id="el-reto-de-simples-números-a-entidades-inteligentes">El reto: de simples números a entidades inteligentes</h3>
<p>En el análisis de datos espaciales, solemos trabajar con coordenadas crudas (simples pares de números). Si los dejamos sueltos, son solo texto sin significado. Nuestro objetivo en este ejercicio es aplicar los conceptos de la POO para tomar esos números y “darles vida”.</p>
<p>Queremos tomar dos simples coordenadas geográficas y convertirlas en un <strong>Objeto Espacial Inteligente</strong> que tenga la capacidad intrínseca de realizar tres tareas fundamentales:</p>
<ol type="1">
<li><strong>Representarse a sí mismo (Texto):</strong> Que el objeto pueda decirnos su nombre y ubicación en un formato legible para humanos.</li>
<li><strong>Analítica espacial (Matemáticas):</strong> Que el objeto tenga la capacidad de calcular la distancia hacia otro punto.</li>
<li><strong>Visualización (Gráficos):</strong> Que el objeto, al recibir un punto de destino, sepa cómo dibujar un mapa interactivo mostrando la ruta y la distancia entre ambos.</li>
</ol>
<p>A continuación, ilustramos conceptualmente este flujo de transformación:</p>
<div class="cell" data-fig-width="6" data-out-width="100%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-flujo-conceptual" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-flujo-conceptual-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-flujo-conceptual">flowchart LR
    %% ESTILOS
    classDef raw fill:#FDEBD0,stroke:#F39C12,stroke-width:2px,color:#7E5109,font-size:15px,padding:10px
    classDef obj fill:#E8F8F5,stroke:#2ECC71,stroke-width:3px,color:#145A32,font-size:14px,font-weight:bold,padding:15px
    classDef objSmall fill:#E8F8F5,stroke:#2ECC71,stroke-width:2px,color:#145A32,font-size:14px,font-weight:bold,padding:8px,stroke-dasharray: 4 4
    classDef action fill:#EAEDED,stroke:#34495E,stroke-width:2px,color:#2C3E50,font-size:14px,text-align:left

    %% NODOS DE ORIGEN (PUNTO 1)
    DATOS1["📄 Datos Crudos 1&lt;br/&gt;(Origen)"]:::raw
    OBJETO["📍 Objeto Inteligente&lt;br/&gt;(Origen)"]:::obj

    %% NODOS DE DESTINO (PUNTO 2)
    DATOS2["📄 Datos Crudos 2&lt;br/&gt;(Destino)"]:::raw
    DESTINO["📍 Otro Objeto Punto&lt;br/&gt;(Destino)"]:::objSmall

    %% PROCESOS DE INSTANCIACIÓN
    DATOS1 -- "⚙️ Instanciación" --&gt; OBJETO
    DATOS2 -- "⚙️ Instanciación" --&gt; DESTINO

    %% ACCIÓN A (Interna del objeto)
    OBJETO --&gt; A["💬 a) Imprimirse en texto"]:::action

    %% ACCIONES B y C (Interacción entre objetos)
    OBJETO --&gt; B["📏 b) Medir distancia (numérica)"]:::action
    OBJETO --&gt; C["🗺️📏 c) Mapa con línea de distancia"]:::action

    %% EL DESTINO ENTRA COMO ARGUMENTO A LAS ACCIONES DEL ORIGEN
    DESTINO -.-&gt;|Entrada| B
    DESTINO -.-&gt;|Entrada| C
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-flujo-conceptual-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.2: Flujo conceptual: Transformación de datos crudos en un objeto inteligente con capacidades.
</figcaption>
</figure>
</div>
</div>
</div>
<p>En esta sección, crearemos una Clase llamada <code>PuntoEspacial</code>. Este “molde” le enseñará a la computadora cuatro cosas fundamentales:</p>
</section>
<section id="python-y-la-programación-orientada-a-objetos-oop" class="level3">
<h3 class="anchored" data-anchor-id="python-y-la-programación-orientada-a-objetos-oop">Python y la Programación Orientada a Objetos (OOP)</h3>
<p>En Python, la creación de estructuras de datos y su comportamiento sigue un enfoque clásico y estricto de <strong>Programación Orientada a Objetos (OOP)</strong>. A diferencia de otros lenguajes donde los datos y las funciones operan por separado, Python prefiere encapsularlo todo (el estado y las acciones) dentro de una única fortaleza lógica: <strong>La Clase</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="La Analogía: El Molde y la Arepa">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
La Analogía: El Molde y la Arepa
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para visualizar cómo Python maneja la memoria, imaginemos una cocina:</p>
<ul>
<li><strong>La Clase (<code>class PuntoEspacial</code>):</strong> Es el <strong>molde de hierro</strong>. Por sí solo no contiene ingredientes ni alimenta a nadie; es simplemente un diseño estático que dicta la estructura geométrica, qué datos son obligatorios y qué acciones se pueden realizar.</li>
<li><strong>El Objeto (La Instancia):</strong> Es la <strong>arepa física y calientita</strong>. Cuando pasamos ingredientes reales (latitud, longitud, nombre) a través del molde, el computador reserva un espacio en memoria para crear una instancia concreta y única. Podemos sacar mil “arepas” (objetos) del mismo molde, y cada una tendrá sus propios datos independientes.</li>
</ul>
</div>
</div>
<p><em>Como ilustra la siguiente figura, en Python el paradigma es encapsulado: el objeto nace con sus datos y sus herramientas listas para usar.</em></p>
<div id="fig-analogia-python" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-analogia-python-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/python_classes_analogy.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-analogia-python-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.3: <strong>El paradigma de Python (POO Clásica):</strong> La Clase actúa como una fábrica o molde que estampa objetos. Cada objeto (la arepa) no solo contiene datos, sino que lleva incrustadas sus propias herramientas y métodos (como la navaja suiza o la calculadora) para resolver problemas por sí mismo.
</figcaption>
</figure>
</div>
<section id="la-anatomía-del-molde" class="level4">
<h4 class="anchored" data-anchor-id="la-anatomía-del-molde">La anatomía del molde</h4>
<p>Cuando diseñamos una clase en Python, establecemos un contrato estricto con la máquina a través de métodos mágicos y atributos:</p>
<ol type="1">
<li><p><strong>El Constructor (<code>__init__</code>):</strong> Es la puerta de entrada. Cada vez que intentamos crear un objeto nuevo, Python llama automáticamente a esta función para recibir los parámetros iniciales y “ensamblar” la estructura en la memoria.</p></li>
<li><p><strong>El Auto-reconocimiento (<code>self</code>):</strong> En Python, la clase necesita una forma de referirse a la “arepa” específica que está cocinando en ese momento. El parámetro <code>self</code> es ese ancla; garantiza que si modificamos la latitud del “Punto A”, no estropeemos accidentalmente la latitud del “Punto B”.</p></li>
<li><p><strong>La representación (<code>__str__</code>):</strong> Cómo debe presentarse el objeto si intentamos imprimirlo en pantalla.</p></li>
<li><p><strong>Los Métodos (Comportamiento):</strong> Son las funciones que viven <strong>dentro</strong> de la clase. Una vez instanciado el objeto, este carga consigo mismo todas sus herramientas. Un punto espacial en Python “sabe” cómo calcular su propia distancia hacia otro punto o cómo graficarse a sí mismo en un mapa.</p>
<ul>
<li><strong>Los métodos analíticos (<code>distancia_hacia</code>):</strong> Funciones que viven <em>dentro</em> del objeto. Nuestro punto será tan inteligente que sabrá calcular la distancia hacia otro punto por sí mismo, invocando internamente a la función <code>haversine</code> que programamos en la sección anterior. Además, le agregaremos un parámetro dinámico para que pueda devolver la distancia en <strong>metros</strong> si se lo pedimos.</li>
<li><strong>El método gráfico (<code>graficar_ruta</code>):</strong> Un método que le permite al objeto usar una librería cartográfica para dibujarse a sí mismo en un mapa base. Además, usaremos nuestro método analítico para calcular el punto medio y ¡escribir la distancia calculada directamente sobre la línea de la ruta!</li>
</ul></li>
</ol>
<p>A continuación, visualizamos este ciclo de vida completo: primero, el diagrama estructural del molde (la Clase) y sus métodos internos; y luego, el mapa de ejecución que muestra cómo sacamos las instancias (Objetos) a la memoria para interactuar con ellas.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">%%{init: {"flowchart": {"nodeSpacing": -90, "rankSpacing": -90}}}%%
flowchart TB
    %% ESTILOS
    classDef num fill:#E67E22,color:#FFF,stroke:none,font-weight:bold,font-size:16px
    classDef codeBox fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px
    classDef light fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px
    classDef light2 fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px,white-space:nowrap,width:300px,padding:0px
    classDef input fill:#FDEBD0,color:#7E5109,stroke:#F39C12,stroke-width:2px,font-size:16px
    classDef box fill:none,stroke:#3498DB,stroke-width:3px,stroke-dasharray: 5 5
    classDef giantPin fill:none,stroke:none,font-size:50px
    classDef extNode fill:#EBDEF0,color:#512E5F,stroke:#8E44AD,stroke-width:2px,font-size:14px,text-align:center,text-align:left,white-space:nowrap,width:300px,padding:0px
    classDef codeBoxLeft1 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:300px,padding:0px
    classDef codeBoxLeft2 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:365px,padding:0px
    classDef codeBoxLeft3 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:350px,padding:0px
    classDef codeBoxLeft4 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:260px,padding:0px
    classDef classTitle fill:none,color:#2C3E50,stroke:none,font-weight:bold,font-size:18px
    classDef piso fill:#EAEDED,stroke:transparent,color:transparent,stroke-width:0px
    classDef colchon fill:#EAEDED,stroke:#34495E,height:0px,width:0px

    %% BLOQUE SUPERIOR
    subgraph SUPERIOR [" "]
        direction LR
        style SUPERIOR fill:none,stroke:none

        ENTRADA["📄&amp;nbsp;Entrada:&lt;br/&gt;y,&amp;nbsp;x,&amp;nbsp;'nb'&lt;br/&gt;&lt;br/&gt;📄&amp;nbsp;Entrada especial:&lt;br/&gt;y,&amp;nbsp;x"]:::input

        subgraph CLASE ["(El&amp;nbsp;Molde&amp;nbsp;de&amp;nbsp;Arepas)&amp;nbsp;📦"]
            direction TB
            
            CERO["                          class PuntoEspacial:                     "]:::classTitle

            n1(("1 📍")):::num
            m1["def __init__(self, lt, lg, nb='no name')&lt;br/&gt;&amp;emsp;self.lt = lt&lt;br/&gt;&amp;emsp;self.lg = lg&lt;br/&gt;&amp;emsp;self.nb = nb"]:::codeBoxLeft1
            PIN["📍"]:::giantPin
            r1["📍self (La Arepa 🫓)"]:::light

            n2(("2 💬")):::num
            m2["def __str__(self):&lt;br/&gt;&amp;emsp;return f'[{self.nb}] (Lat: {self.lt}, Lon: {self.lg})'"]:::codeBoxLeft2
            r2["💬 '[nb] (Lat: lt, Lon: lg)'"]:::light
            
            n3(("3 📐")):::num
            m3["def distancia_hacia(self, p2, r):&lt;br/&gt;&amp;emsp;d = haversine(self.lt, self.lg, p2.lt, p2.lg, r)"]:::codeBoxLeft3

            r3["km = p1.distancia_hacia(p2) ➡️ 242.5 km"]:::light2
            
            n4(("4 🗺️📐")):::num
            m4["def graficar_ruta(self, p2):&lt;br/&gt;&amp;emsp;d = self.distancia_hacia(p2)&lt;br/&gt;&amp;emsp;mapa = folium.Map(...)"]:::codeBoxLeft4
            r4["🗺️ Mapa interactivo&lt;br/&gt;(folium)"]:::light
            
            CERO ~~~ n1
            n1 --- m1
            m1 --&gt; PIN
            PIN --&gt; r1
            r1 --&gt; n2
            n2 --- m2
            m2 --&gt; r2
            r2 ~~~ n3
            n3 --- m3
            m3 --&gt; r3
            r3 ~~~ n4
            n4 --- m4
            m4 --&gt; r4
        end

        ENTRADA ==&gt;|'    Instanciación    '| CLASE
        class CLASE box

        %% CONTENEDOR VERTICAL PARA LOS ACCESORIOS DE LA DERECHA
        subgraph DERECHA [" "]
            direction TB
            style DERECHA fill:none,stroke:none

            subgraph EXTERNO[" "]
                direction TB
                HAVERSINE["⚙️&amp;nbsp;Función&amp;nbsp;externa:&lt;br/&gt;def&amp;nbsp;haversine(lt1, lg1, lt2, lg2, r=6371):&lt;br/&gt;&amp;emsp;..."]:::extNode
            end
            style EXTERNO fill:none,stroke:none

            subgraph SEPARADOR[" "]
                direction TB
                SEP[" "]:::colchon
            end
            style SEPARADOR fill:none,stroke:none

            subgraph LEYENDA ["📋&amp;nbsp;Leyenda Python"]
                direction TB
                l1(("1 📍")) --- t1["Constructor"]
                t1 ~~~ l3(("3 📐")) 
                l3 --- t3["Método Analítico"]
                l2(("2 💬")) 
                l2 --- t2["Representación"]
                t2 ~~~ l4(("4 🗺️📐")) 
                l4 --- t4["Método Gráfico"]
            end
            style LEYENDA fill:#FCF3CF,stroke:#D4AC0D,stroke-width:2px,color:#1A1A1A
            
        end
        
        CLASE .-&gt;|3 invoca| HAVERSINE
        CLASE .-&gt;|4 invoca 3, 3 invoca| HAVERSINE
        CLASE ~~~ DERECHA
    end
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Resumen del código necesario para crear una clase en Python:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (LA CLASE) ---</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PuntoEspacial:</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [1 📍] 1.1 EL CONSTRUCTOR (__init__)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, ...):</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (__str__)</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> distancia_hacia(<span class="va">self</span>, ...):</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO (MAPA BASE CON ETIQUETA VISIBLE)</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> graficar_ruta(<span class="va">self</span>, otro_punto):</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>        ...        </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-out-width="50%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-clases-python-codigo" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clases-python-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-clases-python-codigo">flowchart LR
    classDef scriptBox fill:#FFFFFF,color:#000000,stroke:#333333,stroke-width:2px,text-align:left,font-family:monospace,font-size:12px,white-space:nowrap,padding:0px
    
    %% Usamos el símbolo Unicode ＃ en lugar del numeral de teclado #
    SCRIPT["＃ --- EJECUCIÓN DEL CÓDIGO ---&lt;br/&gt;&lt;br/&gt;＃ [1 📍] INSTANCIACIÓN: Sacando arepas del molde&lt;br/&gt;punto_origen = PuntoEspacial(4.6097, -74.0817, 'Bogotá')      ＃ 🫓 Arepa 1&lt;br/&gt;punto_destino = PuntoEspacial(6.2442, -75.5812, 'Medellín')   ＃ 🫓 Arepa 2&lt;br/&gt;punto_misterioso = PuntoEspacial(12.5847, -81.7006)           ＃ 🫓 Arepa Especial 3&lt;br/&gt;&lt;br/&gt;＃ [2 💬] REPRESENTACIÓN: Ver los objetos&lt;br/&gt;print(punto_origen)&lt;br/&gt;print(punto_destino)&lt;br/&gt;print(punto_misterioso)&lt;br/&gt;&lt;br/&gt;＃ [3 📐] MÉTODOS ANALÍTICOS: Uso de la máquina matemática interna&lt;br/&gt;resultado_km = punto_origen.distancia_hacia(punto_destino)&lt;br/&gt;resultado_metros = punto_origen.distancia_hacia(punto_destino, radio=6371000.0)&lt;br/&gt;&lt;br/&gt;＃ [4 🗺️📐] MÉTODO GRÁFICO: Mapas generados por el objeto&lt;br/&gt;mapa_final = punto_origen.graficar_ruta(punto_destino)"]:::scriptBox
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clases-python-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.4: Ejecución del código en Python instanciando los objetos en memoria.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="r-y-el-sistema-s3-la-ilusión-del-molde-y-el-poder-de-la-etiqueta" class="level3">
<h3 class="anchored" data-anchor-id="r-y-el-sistema-s3-la-ilusión-del-molde-y-el-poder-de-la-etiqueta">R y el sistema S3: la ilusión del molde y el poder de la etiqueta</h3>
<p>Mientras que Python utiliza un enfoque estricto donde cada objeto nace de un “molde de hierro” predefinido, R aborda la programación orientada a objetos de una manera mucho más relajada e informal, principalmente a través de su <strong>sistema S3</strong>.</p>
<p>En R, las clases no se definen formalmente. No hay una bóveda blindada que encierre los datos y los métodos juntos. En su lugar, el sistema S3 confía en el “sistema de honor” y en el uso inteligente de etiquetas.</p>
<div class="callout callout-style-default callout-note callout-titled" title="La analogía: el recipiente común y el post-it">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
La analogía: el recipiente común y el post-it
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si en Python teníamos un molde de hierro para hacer arepas, en R la cocina funciona muy distinto:</p>
<ul>
<li><strong>Los ingredientes (la lista):</strong> En lugar de un molde, tomamos un recipiente plástico común y corriente (como el “porta” del almuerzo o una <code>list</code> en R), y echamos ahí nuestros ingredientes crudos (latitud, longitud y nombre).</li>
<li><strong>La “clase” (el post-it):</strong> Para convertir esa lista genérica en un objeto espacial, literalmente le pegamos un “post-it” en la tapa del recipiente. Al asignarle un atributo de clase (<code>class(objeto) &lt;- 'PuntoEspacial'</code>), le estamos diciendo a R: <em>“De ahora en adelante, confía en mí y trata a este recipiente como si fuera una arepa”</em>.</li>
</ul>
</div>
</div>
<p><em>En R, el sistema es mucho más flexible e informal, dependiendo enteramente de cómo etiquetamos nuestros contenedores de datos:</em></p>
<div id="fig-analogia-r" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-analogia-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/r_classes_analogy.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-analogia-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.5: <strong>El paradigma de R (Sistema S3):</strong> Los objetos no tienen herramientas por dentro; son contenedores plásticos estándar (listas) llenos de datos crudos. Lo que les da “poder” es una simple etiqueta o post-it (la Clase S3). Las funciones externas actúan como inspectores que leen esta etiqueta para decidir qué herramienta usar.
</figcaption>
</figure>
</div>
<section id="la-anatomía-del-sistema-s3" class="level4">
<h4 class="anchored" data-anchor-id="la-anatomía-del-sistema-s3">La anatomía del sistema S3</h4>
<p>Dado que no hay un “molde” real, la instanciación y el comportamiento en R se dividen en tres pilares fundamentales que flotan libremente en el entorno:</p>
<ol type="1">
<li><strong>El constructor informal:</strong> Es simplemente una función normal (como <code>nuevo_punto_espacial()</code>) que recibe los datos, los empaqueta en una lista y, lo más importante, le estampa la etiqueta de la clase antes de devolverla.</li>
<li><strong>Las funciones genéricas (los inspectores):</strong> Funciones como <code>print()</code> o <code>distancia_hacia()</code> son genéricas. No saben cómo calcular nada por sí mismas; su único trabajo es mirar el “post-it” del objeto que reciben y decir: <em>“Ah, eres un PuntoEspacial, déjame buscar al experto que sabe tratar contigo”</em>. Esto se logra mediante el comando interno <code>UseMethod()</code>.</li>
<li><strong>Los métodos específicos (el despacho):</strong> Son las funciones que realmente hacen el trabajo duro, y se nombran uniendo el genérico y la clase (por ejemplo, <code>distancia_hacia.PuntoEspacial()</code>). El genérico le “despacha” el objeto a esta función especializada.</li>
</ol>
<p>A continuación, visualizamos este paradigma en acción: primero, el diagrama arquitectónico que muestra cómo los métodos flotan fuera de la estructura de datos; y luego, el bloque de ejecución donde vemos la magia del etiquetado y el despacho S3 en tiempo real.</p>
<div class="cell" data-fig-width="6" data-out-width="20%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-clases-r-final-vertical" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clases-r-final-vertical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-clases-r-final-vertical">%% COMPRESIÓN TOTAL: La misma fórmula maestra de Python
%%{init: {"flowchart": {"nodeSpacing": -60, "rankSpacing": -60}}}%%

flowchart TB
    %% ESTILOS ADAPTADOS A R
    classDef num fill:#E67E22,color:#FFF,stroke:none,font-weight:bold,font-size:16px
    classDef codeBox fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px
    classDef light fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px
    classDef light2 fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px,white-space:nowrap,width:320px,padding:0px    
    classDef input fill:#FDEBD0,color:#7E5109,stroke:#F39C12,stroke-width:2px,font-size:16px
    %%classDef box fill:none,stroke:#3498DB,stroke-width:3px,stroke-dasharray: 5 5
    classDef box fill:none,stroke:#3498DB,stroke-width:3px,stroke-dasharray: 10 30
    classDef giantPin fill:none,stroke:none,font-size:50px
    classDef extNode fill:#EBDEF0,color:#512E5F,stroke:#8E44AD,stroke-width:2px,font-size:14px,text-align:left,white-space:nowrap,width:360px,padding:0px
    
    %% ANCHOS ESCULPIDOS PARA LA SINTAXIS S3 (UseMethod ocupa más espacio)
    classDef codeBoxLeft1 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:440px,padding:0px
    classDef codeBoxLeft2 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:440px,padding:0px
    classDef codeBoxLeft3 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:430px,padding:0px
    classDef codeBoxLeft4 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:380px,padding:0px            
    
    classDef classTitle fill:none,color:#2C3E50,stroke:none,font-weight:bold,font-size:18px

    %%classDef classTitle fill:none,color:#2C3E50,stroke:none,font-weight:bold,font-size:18px,width:450px,white-space:nowrap

    %%classDef piso fill:transparent,stroke:transparent,color:transparent,stroke-width:0px
    classDef piso fill:none,stroke:none,color:transparent,font-size:1px,line-height:0px
    classDef colchon fill:none,stroke:none,height:25px,width:0px
    %% ESTILO PARA EL NODO FANTASMA ENSANCHADOR",
    %% height:0px y font-size:1px aseguran que no agregue altura visible",
    %% width:500px es el ancho forzado que queremos para la caja",
    %%classDef widener fill:none,stroke:none,color:transparent,font-size:1px,height:0px,width:1000px
    
    %% BLOQUE SUPERIOR
    subgraph SUPERIOR [" "]
        direction LR
        style SUPERIOR fill:none,stroke:none

        ENTRADA["📄&amp;nbsp;Entrada:&lt;br/&gt;lt,&amp;nbsp;lg,&amp;nbsp;'nb'&lt;br/&gt;&lt;br/&gt;📄&amp;nbsp;Entrada mínima:&lt;br/&gt;lt,&amp;nbsp;lg"]:::input

        %% TÍTULO CORTO
        subgraph CLASE ["(Entidad&amp;nbsp;Lógica&amp;nbsp;S3)&amp;nbsp;📦"]
            direction TB
            
            CERO["class 'PuntoEspacial'"]:::classTitle

            n1(("1 📍")):::num
            m1["nuevo_punto_espacial &lt;- function(lt, lg, nb='no name') {&lt;br/&gt;&amp;emsp;obj &lt;- list(lt=lt, lg=lg, nb=nb)&lt;br/&gt;&amp;emsp;class(obj) &lt;- 'PuntoEspacial'&lt;br/&gt;&amp;emsp;return(obj)&lt;br/&gt;}"]:::codeBoxLeft1
            PIN["📍"]:::giantPin
            r1["📍obj (Lista Etiquetada 🫓)"]:::light

            n2(("2 💬")):::num
            m2["print.PuntoEspacial &lt;- function(x) {&lt;br/&gt;&amp;emsp;cat(sprintf('[%s] (Lat: %.4f, Lon: %.4f)', x$nb, x$lt, x$lg))&lt;br/&gt;}"]:::codeBoxLeft2
            r2["💬 '[nb] (Lat: lt, Lon: lg)'"]:::light
            
            n3(("3 📐")):::num
            m3["distancia_hacia &lt;- function(o, d, r=6371) {&lt;br/&gt;&amp;emsp;UseMethod('distancia_hacia')&lt;br/&gt;}&lt;br/&gt;distancia_hacia.PuntoEspacial &lt;- function(o, d, r=6371) {&lt;br/&gt;&amp;emsp;d &lt;- haversine(o$lt, o$lg, d$lt, d$lg, r=r)&lt;br/&gt;}"]:::codeBoxLeft3

            r3["km = distancia_hacia(p1, p2) ➡️ 242.5 km"]:::light2
            
            n4(("4 🗺️📐")):::num
            m4["graficar_ruta &lt;- function(o, d) {&lt;br/&gt;&amp;emsp;UseMethod('graficar_ruta')&lt;br/&gt;}&lt;br/&gt;graficar_ruta.PuntoEspacial &lt;- function(o, d) {&lt;br/&gt;&amp;emsp;d &lt;- distancia_hacia(o, d)&lt;br/&gt;&amp;emsp;mapa &lt;- leaflet(...)&lt;br/&gt;}"]:::codeBoxLeft4
            r4["🗺️ Mapa interactivo (leaflet)"]:::light
            %%PISO["..........................................................................................................................."]:::piso
            %% NODO FANTASMA: Invisible, sin altura, pero muy ancho
            %% WIDENER[" "]:::widener

            %% SU CONEXIÓN LINEAL INTACTA
            CERO ~~~ n1
            n1 --- m1
            m1 --&gt; PIN
            PIN --&gt; r1
            r1 --&gt; n2
            n2 --- m2
            m2 --&gt; r2
            r2 ~~~ n3
            n3 --- m3
            m3 --&gt; r3
            r3 ~~~ n4
            n4 --- m4
            m4 --&gt; r4
            %% r4 ~~~ WIDENER
        end

        ENTRADA ==&gt;|Creación S3| CLASE
        class CLASE box

        %% SU CONTENEDOR VERTICAL INTACTO
        subgraph DERECHA [" "]
            direction TB
            style DERECHA fill:none,stroke:none

            subgraph EXTERNO[" "]
                direction TB
                HAVERSINE["⚙️&amp;nbsp;Función&amp;nbsp;externa:&lt;br/&gt;haversine &lt;- function(lt1, lg1, lt2, lg2, r=6371) {&lt;br/&gt;&amp;emsp;...&lt;br/&gt;}"]:::extNode
            end
            style EXTERNO fill:none,stroke:none

            subgraph SEPARADOR[" "]
                direction TB
                SEP[" "]:::colchon
            end
            style SEPARADOR fill:none,stroke:none

            subgraph LEYENDA ["📋&amp;nbsp;Leyenda R"]
                direction TB
                l1(("1 📍")) --- t1["Constructor S3"]
                t1 ~~~ l3(("3 📐")) 
                l3 --- t3["Método S3 (Analítico)"]
                l2(("2 💬")) 
                l2 --- t2["Representación"]
                t2 ~~~ l4(("4 🗺️📐")) 
                l4 --- t4["Método S3 (Gráfico)"]
            end
            style LEYENDA fill:#FCF3CF,stroke:#D4AC0D,stroke-width:2px,color:#1A1A1A
        end
        
        %% CONEXIONES DE DEPENDENCIA
        CLASE -.-&gt;|3 invoca| HAVERSINE
        CLASE -.-&gt;|4 invoca 3, 3 invoca| HAVERSINE
        CLASE ~~~ DERECHA
    end
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clases-r-final-vertical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.6: Diagrama del flujo de instanciación en R (S3): El molde y las arepas.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Resumen del código para una clase en R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (FUNCIÓN CONSTRUCTORA) ---</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] 1.1 EL CONSTRUCTOR INFORMAL</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>nuevo_punto_espacial <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos una lista para los atributos</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    objeto <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">latitud =</span> ...,</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Etiquetado de clase (MAGIA)</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(objeto) <span class="ot">&lt;-</span> <span class="st">"PuntoEspacial"</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(objeto)</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (Sobrescribir 'print')</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>print.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj) {</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co"># función genérica</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>distancia_hacia <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"distancia_hacia"</span>)</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Ese método SOLO para la clase "PuntoEspacial"</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>distancia_hacia.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>graficar_ruta <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"graficar_ruta"</span>)</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Ese método SOLO para la clase PuntoEspacial</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>graficar_ruta.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-out-width="50%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-clases-r-codigo" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clases-r-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-clases-r-codigo">flowchart LR
    %% Agregamos el mismo blindaje de estilo que en Python
    classDef scriptBox fill:#FFFFFF,color:#000000,stroke:#333333,stroke-width:2px,text-align:left,font-family:monospace,font-size:12px,white-space:nowrap,padding:5px
    
    %% Usamos el símbolo Unicode ＃ en lugar de &amp;#35;
    SCRIPT["＃ --- EJECUCIÓN DEL CÓDIGO EN R (S3) ---&lt;br/&gt;&lt;br/&gt;＃ [1 📍] INSTANCIACIÓN: Etiquetando listas con el molde&lt;br/&gt;punto_origen = nuevo_punto_espacial(4.6097, -74.0817, 'Bogotá')      ＃ 🫓 Arepa 1&lt;br/&gt;punto_destino = nuevo_punto_espacial(6.2442, -75.5812, 'Medellín')   ＃ 🫓 Arepa 2&lt;br/&gt;punto_misterioso = nuevo_punto_espacial(12.5847, -81.7006)           ＃ 🫓 Arepa Especial 3&lt;br/&gt;&lt;br/&gt;＃ [2 💬] REPRESENTACIÓN: R busca el método 'print.PuntoEspacial'&lt;br/&gt;print(punto_origen)&lt;br/&gt;print(punto_destino)&lt;br/&gt;print(punto_misterioso)&lt;br/&gt;&lt;br/&gt;＃ [3 📐] MÉTODOS ANALÍTICOS: Uso del UseMethod() para despachar&lt;br/&gt;resultado_km = distancia_hacia(punto_origen, punto_destino)&lt;br/&gt;resultado_metros = distancia_hacia(punto_origen, punto_destino, radio = 6371000.0)&lt;br/&gt;&lt;br/&gt;＃ [4 🗺️📐] MÉTODO GRÁFICO: Mapa interactivo leaflet&lt;br/&gt;mapa_final = graficar_ruta(punto_origen, punto_destino)"]:::scriptBox
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clases-r-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.7: Ejecución del código en R (S3) instanciando los objetos en memoria.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="julia-y-el-despacho-múltiple-separando-los-ingredientes-de-la-receta" class="level3">
<h3 class="anchored" data-anchor-id="julia-y-el-despacho-múltiple-separando-los-ingredientes-de-la-receta">Julia y el despacho múltiple: separando los ingredientes de la receta</h3>
<p>Julia rechaza por completo el concepto tradicional de clases que vimos en Python. En su lugar, abraza un paradigma donde los datos (las variables) y el comportamiento (las funciones) están estrictamente separados, pero trabajan en una armonía perfecta gracias al núcleo absoluto del lenguaje: el <strong>despacho múltiple</strong> (Multiple Dispatch).</p>
<div class="callout callout-style-default callout-tip callout-titled" title="La analogía: el contenedor rígido y los chefs expertos">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
La analogía: el contenedor rígido y los chefs expertos
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si Python es un molde de hierro y R es un post-it, Julia es una cocina de alta eficiencia:</p>
<ul>
<li><strong>El contenedor (<code>struct</code>):</strong> Es un contenedor plástico rígido (como un “porta” de cristal). Su única función es guardar los ingredientes (latitud, longitud, nombre) de forma organizada y con etiquetas de tipo muy estrictas (<code>Float64</code>, <code>String</code>). El <code>struct</code> es “tonto”; no sabe hacer absolutamente nada por sí solo, no tiene métodos ni recetas grabadas en sus paredes.</li>
<li><strong>El comportamiento (las funciones libres):</strong> Son un batallón de chefs expertos que están esperando en la cocina. Cuando usted grita “¡Quiero la distancia!”, el jefe de cocina (el compilador de Julia) mira exactamente qué ingredientes le entregó en el porta. Dependiendo de los tipos de datos que usted mande, le asigna el trabajo al chef que tenga la receta matemática más optimizada para esos tipos exactos.</li>
</ul>
</div>
</div>
<p><em>Julia lleva la separación entre datos y herramientas al extremo, usando una estrategia de clasificación ultrarrápida:</em></p>
<div id="fig-analogia-julia" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-analogia-julia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/julia_struct_analogy.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-analogia-julia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.8: <strong>El paradigma de Julia (Despacho Múltiple):</strong> Los datos están resguardados en contenedores inmutables (Structs). Las funciones son chefs externos altamente especializados. Cuando pides una operación, el compilador (el “Jefe de Cocina”) escanea con láser los tipos de datos exactos y llama instantáneamente al chef que tiene la receta matemática perfecta para esa combinación.
</figcaption>
</figure>
</div>
<section id="la-anatomía-de-la-arquitectura-en-julia" class="level4">
<h4 class="anchored" data-anchor-id="la-anatomía-de-la-arquitectura-en-julia">La anatomía de la arquitectura en Julia</h4>
<p>En este lenguaje, construimos la estructura definiendo tipos de datos crudos y luego escribimos funciones libres que declaran para qué combinaciones de tipos están preparadas.</p>
<ol type="1">
<li><strong>La estructura base (<code>struct</code>):</strong> A diferencia de las clases, aquí solo organizamos las variables en la memoria. Esto garantiza un tipado fuerte que le permite a Julia ser tan rápido como C o Fortran.</li>
<li><strong>El constructor:</strong> Julia crea un constructor automático básico, pero podemos crear constructores propios si necesitamos reglas especiales (como asignar ‘no name’ si el usuario olvida el nombre al llenar el contenedor).</li>
<li><strong>El despacho múltiple en acción:</strong> La magia ocurre al llamar a una función. Si tenemos una función <code>distancia_hacia(a, b)</code>, Julia analiza el tipo de dato exacto de <strong>todos</strong> los argumentos que le pasamos. Basado en esa combinación de tipos, el lenguaje enruta la ejecución al método más específico de forma instantánea.</li>
</ol>
<p>A continuación, visualizamos este potente paradigma: primero, la representación de cómo el <code>struct</code> y el despacho múltiple interactúan conceptualmente en una “caja virtual” (con líneas muy espaciadas para notar que no es una prisión de código); y luego, el bloque de ejecución donde vemos a Julia activando los métodos correctos al vuelo.</p>
<div class="cell" data-fig-width="6" data-out-width="20%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-clases-julia-final-vertical" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clases-julia-final-vertical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-clases-julia-final-vertical">%% COMPRESIÓN TOTAL: La fórmula maestra
%%{init: {"flowchart": {"nodeSpacing": -30, "rankSpacing": -30}}}%%

flowchart TB
    %% ESTILOS ADAPTADOS A JULIA
    classDef num fill:#E67E22,color:#FFF,stroke:none,font-weight:bold,font-size:16px
    classDef codeBox fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px
    classDef light fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px
    classDef light2 fill:#E8F8F5,color:#145A32,stroke:#2ECC71,stroke-width:2px,font-size:16px,white-space:nowrap,width:330px,padding:0px    
    classDef input fill:#FDEBD0,color:#7E5109,stroke:#F39C12,stroke-width:2px,font-size:16px
    
    %% CAJA VIRTUAL JULIA: Representa el Despacho Múltiple (Agrupación conceptual, no física)
    classDef box fill:none,stroke:#3498DB,stroke-width:3px,stroke-dasharray: 7 45
    
    classDef giantPin fill:none,stroke:none,font-size:50px
    classDef extNode fill:#EBDEF0,color:#512E5F,stroke:#8E44AD,stroke-width:2px,font-size:14px,text-align:left,white-space:nowrap,width:370px,padding:0px
    
    %% ANCHOS ESCULPIDOS PARA LA SINTAXIS JULIA (El tipado ::PuntoEspacial alarga las líneas)
    classDef codeBoxLeft0 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:260px,padding:0px
    classDef codeBoxLeft1 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:430px,padding:0px
    classDef codeBoxLeft2 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:400px,padding:0px
    classDef codeBoxLeft3 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:530px,padding:0px
    classDef codeBoxLeft4 fill:#EAEDED,color:#2C3E50,stroke:#34495E,stroke-width:2px,text-align:left,white-space:nowrap,width:450px,padding:0px            
    
    classDef classTitle fill:none,color:#2C3E50,stroke:none,font-weight:bold,font-size:18px
    classDef piso fill:transparent,stroke:transparent,color:transparent,stroke-width:0px
    classDef colchon fill:none,stroke:none,height:25px,width:0px

    %% BLOQUE SUPERIOR
    subgraph SUPERIOR [" "]
        direction LR
        style SUPERIOR fill:none,stroke:none

        ENTRADA["📄&amp;nbsp;Entrada:&lt;br/&gt;lt,&amp;nbsp;lg,&amp;nbsp;'nb'&lt;br/&gt;&lt;br/&gt;📄&amp;nbsp;Entrada mínima:&lt;br/&gt;lt,&amp;nbsp;lg"]:::input

        %% TÍTULO CORTO
        subgraph CLASE ["(Despacho&amp;nbsp;Múltiple)&amp;nbsp;📦"]
            direction TB
            
            CERO["struct PuntoEspacial"]:::classTitle

            %% EL STRUCT: La base de datos cruda
            m0["struct PuntoEspacial&lt;br/&gt;&amp;emsp;lt::Float64&lt;br/&gt;&amp;emsp;lg::Float64&lt;br/&gt;&amp;emsp;nb::String&lt;br/&gt;end"]:::codeBoxLeft0

            n1(("1 📍")):::num
            m1["PuntoEspacial(lt, lg) = PuntoEspacial(lt, lg, 'no name')"]:::codeBoxLeft1
            PIN["📍"]:::giantPin
            r1["📍obj::PuntoEspacial (Struct 🫓)"]:::light

            n2(("2 💬")):::num
            m2["function Base.show(io::IO, o::PuntoEspacial)&lt;br/&gt;&amp;emsp;print(io, '[$(o.nb)] (Lat: $(o.lt), Lon: $(o.lg))')&lt;br/&gt;end"]:::codeBoxLeft2
            r2["💬 '[nb] (Lat: lt, Lon: lg)'"]:::light
            
            n3(("3 📐")):::num
            m3["function distancia_hacia(o::PuntoEspacial, d::PuntoEspacial, r=6371) = &lt;br/&gt;&amp;emsp;d = haversine(o.lt, o.lg, d.lt, d.lg, r)&lt;br/&gt;end"]:::codeBoxLeft3

            r3["km = distancia_hacia(p1, p2) ➡️ 242.5 km"]:::light2
            
            n4(("4 🗺️📐")):::num
            m4["function graficar_ruta(o::PuntoEspacial, d::PuntoEspacial)&lt;br/&gt;&amp;emsp;d = distancia_hacia(o, d)&lt;br/&gt;&amp;emsp;mapa = plot(...)&lt;br/&gt;end"]:::codeBoxLeft4
            r4["🗺️ Mapa estático&lt;br/&gt;(Plots.jl)"]:::light
            
            %% CONEXIÓN LINEAL INTACTA (El struct encabeza la fila)
            CERO ~~~ m0
            m0 ~~~ n1
            n1 --- m1
            m1 --&gt; PIN
            PIN --&gt; r1
            r1 --&gt; n2
            n2 --- m2
            m2 --&gt; r2
            r2 ~~~ n3
            n3 --- m3
            m3 --&gt; r3
            r3 ~~~ n4
            n4 --- m4
            m4 --&gt; r4
        end

        ENTRADA ==&gt;|Creación Struct| CLASE
        class CLASE box

        %% CONTENEDOR VERTICAL INTACTO
        subgraph DERECHA [" "]
            direction TB
            style DERECHA fill:none,stroke:none

            subgraph EXTERNO[" "]
                direction TB
                HAVERSINE["⚙️&amp;nbsp;Función&amp;nbsp;externa:&lt;br/&gt;function haversine(lt1, lg1, lt2, lg2; r=6371)&lt;br/&gt;&amp;emsp;...&lt;br/&gt;end"]:::extNode
            end
            style EXTERNO fill:none,stroke:none

            subgraph SEPARADOR[" "]
                direction TB
                SEP[" "]:::colchon
            end
            style SEPARADOR fill:none,stroke:none

            subgraph LEYENDA ["📋&amp;nbsp;Leyenda Julia"]
                direction TB
                l1(("1 📍")) --- t1["Struct + Constructor"]
                t1 ~~~ l3(("3 📐")) 
                l3 --- t3["Despacho Múltiple"]                
                l2(("2 💬")) 
                l2 --- t2["Método Base.show"]
                t2 ~~~ l4(("4 🗺️📐")) 
                l4 --- t4["Despacho Múltiple"]
            end           
            style LEYENDA fill:#FCF3CF,stroke:#D4AC0D,stroke-width:2px,color:#1A1A1A
        end
        
        %% CONEXIONES DE DEPENDENCIA
        CLASE -.-&gt;|3 invoca| HAVERSINE
        CLASE -.-&gt;|4 invoca 3, 3 invoca| HAVERSINE
        CLASE ~~~ DERECHA
    end
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clases-julia-final-vertical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.9: Diagrama del flujo de instanciación en Julia (Despacho Múltiple): El molde (Struct) y las arepas.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Resumen del código para un tipo (struct) en Julia</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DE LA CLASE (MOLDE) ---</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] 1.1 EL CONSTRUCTOR (LA ESTRUCTURA)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> PuntoEspacial</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    latitud<span class="op">::</span><span class="dt">Float64   </span><span class="co"># Coordenada Y</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos un método constructor adicional</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">PuntoEspacial</span>(lat, lon) <span class="op">=</span> <span class="fu">PuntoEspacial</span>(lat, lon, <span class="st">"No Name"</span>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">show</span>(io<span class="op">::</span><span class="dt">IO</span>, obj<span class="op">::</span><span class="dt">PuntoEspacial</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="op">...</span>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] 1.3 MÉTODOS ANALÍTICOS (DESPACHO MÚLTIPLE)</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">distancia_hacia</span>(o<span class="op">::</span><span class="dt">PuntoEspacial</span>, d<span class="op">::</span><span class="dt">PuntoEspacial</span>; r<span class="op">=</span><span class="fl">6371.0</span>)</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distancia</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] 1.4 MÉTODO GRÁFICO (DIBUJO Y MANIPULACIÓN DE CADENAS)</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">graficar_ruta</span>(o<span class="op">::</span><span class="dt">PuntoEspacial</span>, d<span class="op">::</span><span class="dt">PuntoEspacial</span>)</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mapa</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-out-width="50%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-clases-julia-codigo" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clases-julia-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-clases-julia-codigo">flowchart LR
    %% Agregamos el blindaje de estilo: nowrap y padding
    classDef scriptBox fill:#FFFFFF,color:#000000,stroke:#333333,stroke-width:2px,text-align:left,font-family:monospace,font-size:12px,white-space:nowrap,padding:5px
    %% Reemplazamos &amp;#35; por el símbolo Unicode ＃
    SCRIPT["＃ --- EJECUCIÓN DEL CÓDIGO EN JULIA ---&lt;br/&gt;&lt;br/&gt;＃ [1 📍] INSTANCIACIÓN: Construyendo la estructura (struct)&lt;br/&gt;punto_origen = PuntoEspacial(4.6097, -74.0817, 'Bogotá')      ＃ 🫓 Arepa 1&lt;br/&gt;punto_destino = PuntoEspacial(6.2442, -75.5812, 'Medellín')   ＃ 🫓 Arepa 2&lt;br/&gt;punto_misterioso = PuntoEspacial(12.5847, -81.7006, '')       ＃ 🫓 Arepa Especial 3&lt;br/&gt;&lt;br/&gt;＃ [2 💬] REPRESENTACIÓN: Julia activa automáticamente Base.show()&lt;br/&gt;println(punto_origen)&lt;br/&gt;println(punto_destino)&lt;br/&gt;println(punto_misterioso)&lt;br/&gt;&lt;br/&gt;＃ [3 📐] MÉTODOS ANALÍTICOS: El Despacho Múltiple elige el método correcto&lt;br/&gt;resultado_km = distancia_hacia(punto_origen, punto_destino)&lt;br/&gt;resultado_metros = distancia_hacia(punto_origen, punto_destino, radio = 6371000.0)&lt;br/&gt;&lt;br/&gt;＃ [4 🗺️📐] MÉTODO GRÁFICO: Ejecutando la función tipada&lt;br/&gt;mapa_final = graficar_ruta(punto_origen, punto_destino)"]:::scriptBox
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clases-julia-codigo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.10: Ejecución del código en Julia instanciando las estructuras en memoria.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="laboratorio-comparativo-implementación-del-código-completo" class="level3">
<h3 class="anchored" data-anchor-id="laboratorio-comparativo-implementación-del-código-completo">Laboratorio comparativo: implementación del código completo</h3>
<p>A continuación, presentamos el código completo y funcional para los tres lenguajes. Te invitamos a navegar entre las pestañas para comparar cómo cada arquitectura resuelve el mismo problema.</p>
<p>💡 <strong>Tip de lectura:</strong> Busca las etiquetas con emojis (<code>[1 📍]</code>, <code>[2 💬]</code>, <code>[3 📐]</code>, <code>[4 🗺️📐]</code>) dentro de los comentarios del código. Estas te ayudarán a conectar cada bloque de código directamente con los diagramas de arquitectura que vimos en las secciones anteriores.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Python</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Julia</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium <span class="co"># Librería indispensable en Python para generar mapas interactivos</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 0. TRAEMOS NUESTRA MÁQUINA MATEMÁTICA ---</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pegamos aquí la función que ya habíamos creado para que este código funcione por sí solo</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haversine(lat1, lon1, lat2, lon2, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    dlat, dlon <span class="op">=</span> math.radians(lat2 <span class="op">-</span> lat1), math.radians(lon2 <span class="op">-</span> lon1)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> math.sin(dlat <span class="op">/</span> <span class="dv">2</span>)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> math.cos(math.radians(lat1)) <span class="op">*</span> math.cos(math.radians(lat2)) <span class="op">*</span> math.sin(dlon <span class="op">/</span> <span class="dv">2</span>)<span class="op">**</span><span class="dv">2</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> (<span class="dv">2</span> <span class="op">*</span> math.atan2(math.sqrt(a), math.sqrt(<span class="dv">1</span> <span class="op">-</span> a)))</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (LA CLASE) ---</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Usamos la palabra reservada 'class' seguida del nombre (en mayúscula por convención)</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PuntoEspacial:</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [1 📍] 1.1 EL CONSTRUCTOR (__init__)</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Esta función especial se ejecuta automáticamente el momento en que "nace" un punto.</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 'self' significa "yo mismo". Es la forma en que el objeto se refiere a sus propios datos.</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Definimos que latitud y longitud son obligatorios, pero el nombre tiene un valor por defecto.</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, latitud, longitud, nombre<span class="op">=</span><span class="st">"Punto sin nombre"</span>):</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos la latitud que nos entregaron dentro del cuerpo del objeto (self)</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.latitud <span class="op">=</span> latitud</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos la longitud dentro del objeto</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.longitud <span class="op">=</span> longitud</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos el nombre dentro del objeto</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.nombre <span class="op">=</span> nombre</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (__str__)</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Si le decimos a Python print(objeto), por defecto imprimirá basura técnica.</span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Esta función especial le enseña a Python cómo queremos que se lea el objeto en pantalla.</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: Un texto bonito combinando el nombre y las coordenadas</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"[</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>nombre<span class="sc">}</span><span class="ss">] (Lat: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>latitud<span class="sc">}</span><span class="ss">, Lon: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>longitud<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Es una función normal, pero como tiene 'self', vive dentro del objeto.</span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Agregamos el parámetro 'radio' para que el usuario pueda pedir el resultado en metros.</span></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> distancia_hacia(<span class="va">self</span>, otro_punto, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a nuestra función haversine externa pasándole el radio solicitado</span></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Le enviamos NUESTRAS coordenadas (self) y las coordenadas DEL OTRO (otro_punto)</span></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>        distancia <span class="op">=</span> haversine(<span class="va">self</span>.latitud, <span class="va">self</span>.longitud, otro_punto.latitud, otro_punto.longitud, radio)</span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: La distancia numérica calculada entre los dos objetos</span></span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> distancia</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO (MAPA BASE CON ETIQUETA VISIBLE)</span></span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Este método le da la habilidad al objeto de dibujarse en un mapa web interactivo.</span></span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> graficar_ruta(<span class="va">self</span>, otro_punto):</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Primero, le decimos al objeto que calcule su propia distancia hacia el destino</span></span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>        distancia_calculada <span class="op">=</span> <span class="va">self</span>.distancia_hacia(otro_punto)</span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Calculamos el punto medio geométrico para centrar la cámara y poner el texto</span></span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>        centro_lat <span class="op">=</span> (<span class="va">self</span>.latitud <span class="op">+</span> otro_punto.latitud) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>        centro_lon <span class="op">=</span> (<span class="va">self</span>.longitud <span class="op">+</span> otro_punto.longitud) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Creamos el lienzo del mapa base (estilo OpenStreetMap por defecto)</span></span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>        mapa <span class="op">=</span> folium.Map(location<span class="op">=</span>[centro_lat, centro_lon], zoom_start<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ponemos un pin en nuestra ubicación de origen (self)</span></span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>        folium.Marker([<span class="va">self</span>.latitud, <span class="va">self</span>.longitud], popup<span class="op">=</span><span class="va">self</span>.nombre).add_to(mapa)</span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ponemos un pin en el destino (otro_punto)</span></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>        folium.Marker([otro_punto.latitud, otro_punto.longitud], popup<span class="op">=</span>otro_punto.nombre).add_to(mapa)</span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Trazamos una línea roja que conecte ambas coordenadas</span></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a>        folium.PolyLine([(<span class="va">self</span>.latitud, <span class="va">self</span>.longitud), (otro_punto.latitud, otro_punto.longitud)], color<span class="op">=</span><span class="st">"red"</span>, weight<span class="op">=</span><span class="dv">3</span>).add_to(mapa)</span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ¡NUEVO!: Ponemos un marcador transparente en el medio con un 'Tooltip' permanente.</span></span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Esto obliga a Folium a mostrar el texto de la distancia sin necesidad de hacer clic.</span></span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true" tabindex="-1"></a>        etiqueta <span class="op">=</span> <span class="ss">f"Distancia: </span><span class="sc">{</span>distancia_calculada<span class="sc">:.2f}</span><span class="ss"> km"</span></span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true" tabindex="-1"></a>        folium.Marker(</span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true" tabindex="-1"></a>            [centro_lat, centro_lon],</span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true" tabindex="-1"></a>            icon<span class="op">=</span>folium.DivIcon(html<span class="op">=</span><span class="st">""</span>), <span class="co"># Ocultamos el ícono tradicional</span></span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">=</span>folium.Tooltip(etiqueta, permanent<span class="op">=</span><span class="va">True</span>, direction<span class="op">=</span><span class="st">"top"</span>)</span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true" tabindex="-1"></a>        ).add_to(mapa)</span>
<span id="cb46-81"><a href="#cb46-81" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-82"><a href="#cb46-82" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: El objeto mapa listo para ser mostrado</span></span>
<span id="cb46-83"><a href="#cb46-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mapa</span>
<span id="cb46-84"><a href="#cb46-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. CREACIÓN DE OBJETOS (INSTANCIACIÓN) ---</span></span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-88"><a href="#cb46-88" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Creando objetos a partir del molde ---"</span>)</span>
<span id="cb46-89"><a href="#cb46-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-90"><a href="#cb46-90" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] INSTANCIACIÓN: Creamos el primer objeto (Bogotá). </span></span>
<span id="cb46-91"><a href="#cb46-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que no le pasamos el parámetro 'self', Python hace eso invisiblemente.</span></span>
<span id="cb46-92"><a href="#cb46-92" aria-hidden="true" tabindex="-1"></a>punto_origen <span class="op">=</span> PuntoEspacial(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="st">"Bogotá"</span>)</span>
<span id="cb46-93"><a href="#cb46-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-94"><a href="#cb46-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el segundo objeto (Medellín). Usamos los mismos planos, pero con otros datos.</span></span>
<span id="cb46-95"><a href="#cb46-95" aria-hidden="true" tabindex="-1"></a>punto_destino <span class="op">=</span> PuntoEspacial(<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, <span class="st">"Medellín"</span>)</span>
<span id="cb46-96"><a href="#cb46-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-97"><a href="#cb46-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un tercer objeto, pero omitimos el nombre para ver si funciona el valor por defecto</span></span>
<span id="cb46-98"><a href="#cb46-98" aria-hidden="true" tabindex="-1"></a>punto_misterioso <span class="op">=</span> PuntoEspacial(<span class="fl">12.5847</span>, <span class="op">-</span><span class="fl">81.7006</span>)</span>
<span id="cb46-99"><a href="#cb46-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-100"><a href="#cb46-100" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] REPRESENTACIÓN: Probamos nuestra función especial __str__ imprimiendo los objetos</span></span>
<span id="cb46-101"><a href="#cb46-101" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_origen)</span>
<span id="cb46-102"><a href="#cb46-102" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_destino)</span>
<span id="cb46-103"><a href="#cb46-103" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_misterioso)</span>
<span id="cb46-104"><a href="#cb46-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-105"><a href="#cb46-105" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Usando los métodos del objeto ---"</span>)</span>
<span id="cb46-106"><a href="#cb46-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-107"><a href="#cb46-107" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] MÉTODOS ANALÍTICOS: Le pedimos al objeto que mida la distancia hacia 'punto_destino'</span></span>
<span id="cb46-108"><a href="#cb46-108" aria-hidden="true" tabindex="-1"></a>resultado_km <span class="op">=</span> punto_origen.distancia_hacia(punto_destino)</span>
<span id="cb46-109"><a href="#cb46-109" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"La distancia desde </span><span class="sc">{</span>punto_origen<span class="sc">.</span>nombre<span class="sc">}</span><span class="ss"> hasta </span><span class="sc">{</span>punto_destino<span class="sc">.</span>nombre<span class="sc">}</span><span class="ss"> es: </span><span class="sc">{</span>resultado_km<span class="sc">:.2f}</span><span class="ss"> km"</span>)</span>
<span id="cb46-110"><a href="#cb46-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-111"><a href="#cb46-111" aria-hidden="true" tabindex="-1"></a><span class="co"># Truco de conversión: Pedimos el resultado en metros modificando el parámetro 'radio' a 6371000.0</span></span>
<span id="cb46-112"><a href="#cb46-112" aria-hidden="true" tabindex="-1"></a>resultado_metros <span class="op">=</span> punto_origen.distancia_hacia(punto_destino, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb46-113"><a href="#cb46-113" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"O expresado en metros: </span><span class="sc">{</span>resultado_metros<span class="sc">:.2f}</span><span class="ss"> m"</span>)</span>
<span id="cb46-114"><a href="#cb46-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-115"><a href="#cb46-115" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] MÉTODO GRÁFICO: Finalmente, le pedimos al objeto que dibuje el mapa de su ruta</span></span>
<span id="cb46-116"><a href="#cb46-116" aria-hidden="true" tabindex="-1"></a>mapa_final <span class="op">=</span> punto_origen.graficar_ruta(punto_destino)</span>
<span id="cb46-117"><a href="#cb46-117" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">¡Mapa interactivo generado con éxito en la variable 'mapa_final'!"</span>)</span>
<span id="cb46-118"><a href="#cb46-118" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: Si estás en un Notebook, basta con escribir 'mapa_final' en una celda para visualizarlo.</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell" data-screenshot="true" data-screenshot-opts="{&quot;delay&quot;:10}">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| echo: false</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># #| eval: false</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium <span class="co"># Librería indispensable en Python para generar mapas interactivos</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 0. TRAEMOS NUESTRA MÁQUINA MATEMÁTICA ---</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pegamos aquí la función que ya habíamos creado para que este código funcione por sí solo</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haversine(lat1, lon1, lat2, lon2, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    dlat, dlon <span class="op">=</span> math.radians(lat2 <span class="op">-</span> lat1), math.radians(lon2 <span class="op">-</span> lon1)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> math.sin(dlat <span class="op">/</span> <span class="dv">2</span>)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> math.cos(math.radians(lat1)) <span class="op">*</span> math.cos(math.radians(lat2)) <span class="op">*</span> math.sin(dlon <span class="op">/</span> <span class="dv">2</span>)<span class="op">**</span><span class="dv">2</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> (<span class="dv">2</span> <span class="op">*</span> math.atan2(math.sqrt(a), math.sqrt(<span class="dv">1</span> <span class="op">-</span> a)))</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (LA CLASE) ---</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Usamos la palabra reservada 'class' seguida del nombre (en mayúscula por convención)</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PuntoEspacial:</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [1 📍] 1.1 EL CONSTRUCTOR (__init__)</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Esta función especial se ejecuta automáticamente el momento en que "nace" un punto.</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 'self' significa "yo mismo". Es la forma en que el objeto se refiere a sus propios datos.</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Definimos que latitud y longitud son obligatorios, pero el nombre tiene un valor por defecto.</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, latitud, longitud, nombre<span class="op">=</span><span class="st">"Punto sin nombre"</span>):</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos la latitud que nos entregaron dentro del cuerpo del objeto (self)</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.latitud <span class="op">=</span> latitud</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos la longitud dentro del objeto</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.longitud <span class="op">=</span> longitud</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Guardamos el nombre dentro del objeto</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.nombre <span class="op">=</span> nombre</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (__str__)</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Si le decimos a Python print(objeto), por defecto imprimirá basura técnica.</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Esta función especial le enseña a Python cómo queremos que se lea el objeto en pantalla.</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: Un texto bonito combinando el nombre y las coordenadas</span></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"[</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>nombre<span class="sc">}</span><span class="ss">] (Lat: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>latitud<span class="sc">}</span><span class="ss">, Lon: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>longitud<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Es una función normal, pero como tiene 'self', vive dentro del objeto.</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Agregamos el parámetro 'radio' para que el usuario pueda pedir el resultado en metros.</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> distancia_hacia(<span class="va">self</span>, otro_punto, radio<span class="op">=</span><span class="fl">6371.0</span>):</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Llamamos a nuestra función haversine externa pasándole el radio solicitado</span></span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Le enviamos NUESTRAS coordenadas (self) y las coordenadas DEL OTRO (otro_punto)</span></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>        distancia <span class="op">=</span> haversine(<span class="va">self</span>.latitud, <span class="va">self</span>.longitud, otro_punto.latitud, otro_punto.longitud, radio)</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: La distancia numérica calculada entre los dos objetos</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> distancia</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO (MAPA BASE CON ETIQUETA VISIBLE)</span></span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Este método le da la habilidad al objeto de dibujarse en un mapa web interactivo.</span></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> graficar_ruta(<span class="va">self</span>, otro_punto):</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Primero, le decimos al objeto que calcule su propia distancia hacia el destino</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>        distancia_calculada <span class="op">=</span> <span class="va">self</span>.distancia_hacia(otro_punto)</span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Calculamos el punto medio geométrico para centrar la cámara y poner el texto</span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>        centro_lat <span class="op">=</span> (<span class="va">self</span>.latitud <span class="op">+</span> otro_punto.latitud) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>        centro_lon <span class="op">=</span> (<span class="va">self</span>.longitud <span class="op">+</span> otro_punto.longitud) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Creamos el lienzo del mapa base (estilo OpenStreetMap por defecto)</span></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>        mapa <span class="op">=</span> folium.Map(location<span class="op">=</span>[centro_lat, centro_lon], zoom_start<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ponemos un pin en nuestra ubicación de origen (self)</span></span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>        folium.Marker([<span class="va">self</span>.latitud, <span class="va">self</span>.longitud], popup<span class="op">=</span><span class="va">self</span>.nombre).add_to(mapa)</span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Ponemos un pin en el destino (otro_punto)</span></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a>        folium.Marker([otro_punto.latitud, otro_punto.longitud], popup<span class="op">=</span>otro_punto.nombre).add_to(mapa)</span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Trazamos una línea roja que conecte ambas coordenadas</span></span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a>        folium.PolyLine([(<span class="va">self</span>.latitud, <span class="va">self</span>.longitud), (otro_punto.latitud, otro_punto.longitud)], color<span class="op">=</span><span class="st">"red"</span>, weight<span class="op">=</span><span class="dv">3</span>).add_to(mapa)</span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ¡NUEVO!: Ponemos un marcador transparente en el medio con un 'Tooltip' permanente.</span></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Esto obliga a Folium a mostrar el texto de la distancia sin necesidad de hacer clic.</span></span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a>        etiqueta <span class="op">=</span> <span class="ss">f"Distancia: </span><span class="sc">{</span>distancia_calculada<span class="sc">:.2f}</span><span class="ss"> km"</span></span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a>        folium.Marker(</span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a>            [centro_lat, centro_lon],</span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a>            icon<span class="op">=</span>folium.DivIcon(html<span class="op">=</span><span class="st">""</span>), <span class="co"># Ocultamos el ícono tradicional</span></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">=</span>folium.Tooltip(etiqueta, permanent<span class="op">=</span><span class="va">True</span>, direction<span class="op">=</span><span class="st">"top"</span>)</span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a>        ).add_to(mapa)</span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-84"><a href="#cb47-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SACA: El objeto mapa listo para ser mostrado</span></span>
<span id="cb47-85"><a href="#cb47-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mapa</span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. CREACIÓN DE OBJETOS (INSTANCIACIÓN) ---</span></span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Creando objetos a partir del molde ---"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Creando objetos a partir del molde ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] INSTANCIACIÓN: Creamos el primer objeto (Bogotá). </span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que no le pasamos el parámetro 'self', Python hace eso invisiblemente.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>punto_origen <span class="op">=</span> PuntoEspacial(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="st">"Bogotá"</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el segundo objeto (Medellín). Usamos los mismos planos, pero con otros datos.</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>punto_destino <span class="op">=</span> PuntoEspacial(<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, <span class="st">"Medellín"</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un tercer objeto, pero omitimos el nombre para ver si funciona el valor por defecto</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>punto_misterioso <span class="op">=</span> PuntoEspacial(<span class="fl">12.5847</span>, <span class="op">-</span><span class="fl">81.7006</span>)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] REPRESENTACIÓN: Probamos nuestra función especial __str__ imprimiendo los objetos</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_origen)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Bogotá] (Lat: 4.6097, Lon: -74.0817)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_destino)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Medellín] (Lat: 6.2442, Lon: -75.5812)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(punto_misterioso)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Punto sin nombre] (Lat: 12.5847, Lon: -81.7006)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">--- Usando los métodos del objeto ---"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Usando los métodos del objeto ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] MÉTODOS ANALÍTICOS: Le pedimos al objeto que mida la distancia hacia 'punto_destino'</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>resultado_km <span class="op">=</span> punto_origen.distancia_hacia(punto_destino)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"La distancia desde </span><span class="sc">{</span>punto_origen<span class="sc">.</span>nombre<span class="sc">}</span><span class="ss"> hasta </span><span class="sc">{</span>punto_destino<span class="sc">.</span>nombre<span class="sc">}</span><span class="ss"> es: </span><span class="sc">{</span>resultado_km<span class="sc">:.2f}</span><span class="ss"> km"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La distancia desde Bogotá hasta Medellín es: 246.14 km</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Truco de conversión: Pedimos el resultado en metros modificando el parámetro 'radio' a 6371000.0</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>resultado_metros <span class="op">=</span> punto_origen.distancia_hacia(punto_destino, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"O expresado en metros: </span><span class="sc">{</span>resultado_metros<span class="sc">:.2f}</span><span class="ss"> m"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>O expresado en metros: 246135.99 m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] MÉTODO GRÁFICO: Finalmente, le pedimos al objeto que dibuje el mapa de su ruta</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>mapa_final <span class="op">=</span> punto_origen.graficar_ruta(punto_destino)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">¡Mapa interactivo generado con éxito en la variable 'mapa_final'!"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
¡Mapa interactivo generado con éxito en la variable 'mapa_final'!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>mapa_final</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_4502779539493d53a207adf50939a1e0 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_4502779539493d53a207adf50939a1e0&quot; ></div>
        
</body>
<script>
    
    
            var map_4502779539493d53a207adf50939a1e0 = L.map(
                &quot;map_4502779539493d53a207adf50939a1e0&quot;,
                {
                    center: [5.42695, -74.83144999999999],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 6,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
}

                }
            );

            

        
    
            var tile_layer_bef47c6d979800209e0076a9daf0c978 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 19,
  &quot;maxNativeZoom&quot;: 19,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_bef47c6d979800209e0076a9daf0c978.addTo(map_4502779539493d53a207adf50939a1e0);
        
    
            var marker_803bd31ad2a00ec6f2d089db98bca30f = L.marker(
                [4.6097, -74.0817],
                {
}
            ).addTo(map_4502779539493d53a207adf50939a1e0);
        
    
        var popup_61de1b685c08af69e953b64fe5166369 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_189ce7abdef2f4118a7c8156f89a10fa = $(`<div id=&quot;html_189ce7abdef2f4118a7c8156f89a10fa&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>Bogotá</div>`)[0];
                popup_61de1b685c08af69e953b64fe5166369.setContent(html_189ce7abdef2f4118a7c8156f89a10fa);
            
        

        marker_803bd31ad2a00ec6f2d089db98bca30f.bindPopup(popup_61de1b685c08af69e953b64fe5166369)
        ;

        
    
    
            var marker_81ad809b60a82688d66b9059bba34d0e = L.marker(
                [6.2442, -75.5812],
                {
}
            ).addTo(map_4502779539493d53a207adf50939a1e0);
        
    
        var popup_20f761f0860df85814b6f2d53c5b3251 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_d0146f2fb18da5d1260dda7852289fb8 = $(`<div id=&quot;html_d0146f2fb18da5d1260dda7852289fb8&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>Medellín</div>`)[0];
                popup_20f761f0860df85814b6f2d53c5b3251.setContent(html_d0146f2fb18da5d1260dda7852289fb8);
            
        

        marker_81ad809b60a82688d66b9059bba34d0e.bindPopup(popup_20f761f0860df85814b6f2d53c5b3251)
        ;

        
    
    
            var poly_line_724b47f7cb2703b9c69208323bb7fa07 = L.polyline(
                [[4.6097, -74.0817], [6.2442, -75.5812]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;red&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_4502779539493d53a207adf50939a1e0);
        
    
            var marker_b0fd5916bf48288acfeadeb12b6824ef = L.marker(
                [5.42695, -74.83144999999999],
                {
}
            ).addTo(map_4502779539493d53a207adf50939a1e0);
        
    
            var div_icon_2cbb724b145fe530eb4caa9d2a525fbb = L.divIcon({
  &quot;html&quot;: &quot;&quot;,
  &quot;className&quot;: &quot;empty&quot;,
});
        
    
            marker_b0fd5916bf48288acfeadeb12b6824ef.bindTooltip(
                `<div>
                     Distancia: 246.14 km
                 </div>`,
                {
  &quot;permanent&quot;: true,
  &quot;direction&quot;: &quot;top&quot;,
  &quot;sticky&quot;: true,
}
            );
        
    
                marker_b0fd5916bf48288acfeadeb12b6824ef.setIcon(div_icon_2cbb724b145fe530eb4caa9d2a525fbb);
            
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos leaflet, la librería top para mapas base interactivos en R</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet) </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># R funciona diferente a Python. Usa un sistema llamado "S3" donde construimos </span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co"># listas normales y les pegamos una "etiqueta" invisible para volverlas objetos.</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 0. TRAEMOS NUESTRA MÁQUINA MATEMÁTICA ---</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>haversine <span class="ot">&lt;-</span> <span class="cf">function</span>(lat1, lon1, lat2, lon2, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    rad <span class="ot">&lt;-</span> <span class="cf">function</span>(g) { g <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span> }</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="fu">rad</span>(lat2 <span class="sc">-</span> lat1) <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">cos</span>(<span class="fu">rad</span>(lat1)) <span class="sc">*</span> <span class="fu">cos</span>(<span class="fu">rad</span>(lat2)) <span class="sc">*</span> <span class="fu">sin</span>(<span class="fu">rad</span>(lon2 <span class="sc">-</span> lon1) <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(radio <span class="sc">*</span> (<span class="dv">2</span> <span class="sc">*</span> <span class="fu">atan2</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="dv">1</span> <span class="sc">-</span> a))))</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (FUNCIÓN CONSTRUCTORA) ---</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] 1.1 EL CONSTRUCTOR INFORMAL</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="co"># En R, el "molde" es simplemente una función que empaca los datos</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>nuevo_punto_espacial <span class="ot">&lt;-</span> <span class="cf">function</span>(latitud, longitud, <span class="at">nombre =</span> <span class="st">"Punto sin nombre"</span>) {</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos una lista tradicional de R para guardar los atributos</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>    objeto <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">latitud =</span> latitud,</span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">longitud =</span> longitud,</span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">nombre =</span> nombre</span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># AQUÍ OCURRE LA MAGIA: Le pegamos la etiqueta de Clase "PuntoEspacial" a nuestra lista</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(objeto) <span class="ot">&lt;-</span> <span class="st">"PuntoEspacial"</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El objeto ya etiquetado y listo para usarse</span></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(objeto)</span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (Sobrescribir 'print')</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Le enseñamos a la función nativa print() de R qué hacer cuando reciba un "PuntoEspacial"</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>print.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj) {</span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Imprimimos un texto bonito en pantalla usando cat() y sprintf()</span></span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"[%s] (Lat: %.4f, Lon: %.4f)</span><span class="sc">\n</span><span class="st">"</span>, obj<span class="sc">$</span>nombre, obj<span class="sc">$</span>latitud, obj<span class="sc">$</span>longitud))</span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Primero creamos una "función genérica" vacía que avisa que este método existe,</span></span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a><span class="co"># y le agregamos el parámetro opcional 'radio' para poder convertir a metros.</span></span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>distancia_hacia <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"distancia_hacia"</span>)</span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Luego le decimos a R cómo debe funcionar ese método SOLO para la clase "PuntoEspacial"</span></span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>distancia_hacia.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extraemos los datos de ambos objetos y llamamos a nuestra máquina matemática</span></span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>    distancia <span class="ot">&lt;-</span> <span class="fu">haversine</span>(obj_origen<span class="sc">$</span>latitud, obj_origen<span class="sc">$</span>longitud, </span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>                           obj_destino<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>longitud, <span class="at">radio =</span> radio)</span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>                           </span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La distancia calculada</span></span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancia)</span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO (MAPA BASE CON ETIQUETA)</span></span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Declaramos la función genérica</span></span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>graficar_ruta <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino) {</span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"graficar_ruta"</span>)</span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el comportamiento específico para nuestros objetos</span></span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a>graficar_ruta.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino) {</span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos la distancia usando nuestro propio método analítico</span></span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>    distancia_calc <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(obj_origen, obj_destino)</span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el punto medio de la ruta para anclar el texto de la distancia</span></span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a>    mid_lat <span class="ot">&lt;-</span> (obj_origen<span class="sc">$</span>latitud <span class="sc">+</span> obj_destino<span class="sc">$</span>latitud) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a>    mid_lon <span class="ot">&lt;-</span> (obj_origen<span class="sc">$</span>longitud <span class="sc">+</span> obj_destino<span class="sc">$</span>longitud) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-75"><a href="#cb64-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos el lienzo, añadimos baldosas (OpenStreetMap) y los marcadores/líneas</span></span>
<span id="cb64-76"><a href="#cb64-76" aria-hidden="true" tabindex="-1"></a>    mapa <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb64-77"><a href="#cb64-77" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span>  <span class="co"># Añade el mapa base tradicional</span></span>
<span id="cb64-78"><a href="#cb64-78" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addMarkers</span>(<span class="at">lng =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>longitud, obj_destino<span class="sc">$</span>longitud), </span>
<span id="cb64-79"><a href="#cb64-79" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lat =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>latitud), </span>
<span id="cb64-80"><a href="#cb64-80" aria-hidden="true" tabindex="-1"></a>                   <span class="at">popup =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>nombre, obj_destino<span class="sc">$</span>nombre)) <span class="sc">%&gt;%</span></span>
<span id="cb64-81"><a href="#cb64-81" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addPolylines</span>(<span class="at">lng =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>longitud, obj_destino<span class="sc">$</span>longitud), </span>
<span id="cb64-82"><a href="#cb64-82" aria-hidden="true" tabindex="-1"></a>                     <span class="at">lat =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>latitud), </span>
<span id="cb64-83"><a href="#cb64-83" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">weight =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-84"><a href="#cb64-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ¡NUEVO!: Clavamos un popup fijo en el centro geométrico con el resultado</span></span>
<span id="cb64-85"><a href="#cb64-85" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addPopups</span>(<span class="at">lng =</span> mid_lon, <span class="at">lat =</span> mid_lat, </span>
<span id="cb64-86"><a href="#cb64-86" aria-hidden="true" tabindex="-1"></a>                  <span class="at">popup =</span> <span class="fu">sprintf</span>(<span class="st">"&lt;b&gt;Distancia:&lt;/b&gt; %.2f km"</span>, distancia_calc))</span>
<span id="cb64-87"><a href="#cb64-87" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb64-88"><a href="#cb64-88" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El mapa interactivo listo</span></span>
<span id="cb64-89"><a href="#cb64-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(mapa)</span>
<span id="cb64-90"><a href="#cb64-90" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-91"><a href="#cb64-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-92"><a href="#cb64-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-93"><a href="#cb64-93" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. CREACIÓN DE OBJETOS (INSTANCIACIÓN) ---</span></span>
<span id="cb64-94"><a href="#cb64-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-95"><a href="#cb64-95" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"--- Creando objetos a partir del molde ---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb64-96"><a href="#cb64-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-97"><a href="#cb64-97" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] INSTANCIACIÓN: Usamos nuestra función constructora para crear a Bogotá</span></span>
<span id="cb64-98"><a href="#cb64-98" aria-hidden="true" tabindex="-1"></a>punto_origen <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="st">"Bogotá"</span>)</span>
<span id="cb64-99"><a href="#cb64-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-100"><a href="#cb64-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos a Medellín</span></span>
<span id="cb64-101"><a href="#cb64-101" aria-hidden="true" tabindex="-1"></a>punto_destino <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="st">"Medellín"</span>)</span>
<span id="cb64-102"><a href="#cb64-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-103"><a href="#cb64-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un punto sin nombre para probar el valor por defecto</span></span>
<span id="cb64-104"><a href="#cb64-104" aria-hidden="true" tabindex="-1"></a>punto_misterioso <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">12.5847</span>, <span class="sc">-</span><span class="fl">81.7006</span>)</span>
<span id="cb64-105"><a href="#cb64-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-106"><a href="#cb64-106" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] REPRESENTACIÓN: Probamos nuestra modificación al comando print()</span></span>
<span id="cb64-107"><a href="#cb64-107" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_origen)</span>
<span id="cb64-108"><a href="#cb64-108" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_destino)</span>
<span id="cb64-109"><a href="#cb64-109" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_misterioso)</span>
<span id="cb64-110"><a href="#cb64-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-111"><a href="#cb64-111" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Usando los métodos del objeto ---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb64-112"><a href="#cb64-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-113"><a href="#cb64-113" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] MÉTODOS ANALÍTICOS: Ejecutamos nuestra función de clase enviando los dos objetos</span></span>
<span id="cb64-114"><a href="#cb64-114" aria-hidden="true" tabindex="-1"></a>resultado_km <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino)</span>
<span id="cb64-115"><a href="#cb64-115" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"La distancia desde %s hasta %s es: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb64-116"><a href="#cb64-116" aria-hidden="true" tabindex="-1"></a>            punto_origen<span class="sc">$</span>nombre, punto_destino<span class="sc">$</span>nombre, resultado_km))</span>
<span id="cb64-117"><a href="#cb64-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-118"><a href="#cb64-118" aria-hidden="true" tabindex="-1"></a><span class="co"># Truco de conversión: Forzamos que el método devuelva la respuesta en metros</span></span>
<span id="cb64-119"><a href="#cb64-119" aria-hidden="true" tabindex="-1"></a>resultado_metros <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino, <span class="at">radio =</span> <span class="fl">6371000.0</span>)</span>
<span id="cb64-120"><a href="#cb64-120" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"O expresado en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, resultado_metros))</span>
<span id="cb64-121"><a href="#cb64-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-122"><a href="#cb64-122" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] MÉTODO GRÁFICO: Lanzamos la creación del mapa</span></span>
<span id="cb64-123"><a href="#cb64-123" aria-hidden="true" tabindex="-1"></a>mapa_final <span class="ot">&lt;-</span> <span class="fu">graficar_ruta</span>(punto_origen, punto_destino)</span>
<span id="cb64-124"><a href="#cb64-124" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">¡Mapa interactivo generado con éxito en la variable 'mapa_final'!</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb64-125"><a href="#cb64-125" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimir 'mapa_final' en la consola o Quarto abrirá el visor web</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell" data-screenshot.opts="{&quot;delay&quot;:10}">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| eval: false</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># #| echo: false</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos leaflet, la librería top para mapas base interactivos en R</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet) </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># R funciona diferente a Python. Usa un sistema llamado "S3" donde construimos </span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co"># listas normales y les pegamos una "etiqueta" invisible para volverlas objetos.</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 0. TRAEMOS NUESTRA MÁQUINA MATEMÁTICA ---</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>haversine <span class="ot">&lt;-</span> <span class="cf">function</span>(lat1, lon1, lat2, lon2, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    rad <span class="ot">&lt;-</span> <span class="cf">function</span>(g) { g <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span> }</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="fu">rad</span>(lat2 <span class="sc">-</span> lat1) <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">cos</span>(<span class="fu">rad</span>(lat1)) <span class="sc">*</span> <span class="fu">cos</span>(<span class="fu">rad</span>(lat2)) <span class="sc">*</span> <span class="fu">sin</span>(<span class="fu">rad</span>(lon2 <span class="sc">-</span> lon1) <span class="sc">/</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(radio <span class="sc">*</span> (<span class="dv">2</span> <span class="sc">*</span> <span class="fu">atan2</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="dv">1</span> <span class="sc">-</span> a))))</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DEL MOLDE (FUNCIÓN CONSTRUCTORA) ---</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] 1.1 EL CONSTRUCTOR INFORMAL</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co"># En R, el "molde" es simplemente una función que empaca los datos</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>nuevo_punto_espacial <span class="ot">&lt;-</span> <span class="cf">function</span>(latitud, longitud, <span class="at">nombre =</span> <span class="st">"Punto sin nombre"</span>) {</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos una lista tradicional de R para guardar los atributos</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    objeto <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">latitud =</span> latitud,</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">longitud =</span> longitud,</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">nombre =</span> nombre</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># AQUÍ OCURRE LA MAGIA: Le pegamos la etiqueta de Clase "PuntoEspacial" a nuestra lista</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(objeto) <span class="ot">&lt;-</span> <span class="st">"PuntoEspacial"</span></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El objeto ya etiquetado y listo para usarse</span></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(objeto)</span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL (Sobrescribir 'print')</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Le enseñamos a la función nativa print() de R qué hacer cuando reciba un "PuntoEspacial"</span></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>print.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj) {</span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Imprimimos un texto bonito en pantalla usando cat() y sprintf()</span></span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"[%s] (Lat: %.4f, Lon: %.4f)</span><span class="sc">\n</span><span class="st">"</span>, obj<span class="sc">$</span>nombre, obj<span class="sc">$</span>latitud, obj<span class="sc">$</span>longitud))</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] 1.3 LOS MÉTODOS (COMPORTAMIENTO ANALÍTICO)</span></span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Primero creamos una "función genérica" vacía que avisa que este método existe,</span></span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a><span class="co"># y le agregamos el parámetro opcional 'radio' para poder convertir a metros.</span></span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a>distancia_hacia <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"distancia_hacia"</span>)</span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Luego le decimos a R cómo debe funcionar ese método SOLO para la clase "PuntoEspacial"</span></span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a>distancia_hacia.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino, <span class="at">radio =</span> <span class="fl">6371.0</span>) {</span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extraemos los datos de ambos objetos y llamamos a nuestra máquina matemática</span></span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a>    distancia <span class="ot">&lt;-</span> <span class="fu">haversine</span>(obj_origen<span class="sc">$</span>latitud, obj_origen<span class="sc">$</span>longitud, </span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a>                           obj_destino<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>longitud, <span class="at">radio =</span> radio)</span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a>                           </span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: La distancia calculada</span></span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(distancia)</span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] 1.4 EL MÉTODO GRÁFICO (MAPA BASE CON ETIQUETA)</span></span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Declaramos la función genérica</span></span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a>graficar_ruta <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino) {</span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">UseMethod</span>(<span class="st">"graficar_ruta"</span>)</span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el comportamiento específico para nuestros objetos</span></span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a>graficar_ruta.PuntoEspacial <span class="ot">&lt;-</span> <span class="cf">function</span>(obj_origen, obj_destino) {</span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos la distancia usando nuestro propio método analítico</span></span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a>    distancia_calc <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(obj_origen, obj_destino)</span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el punto medio de la ruta para anclar el texto de la distancia</span></span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a>    mid_lat <span class="ot">&lt;-</span> (obj_origen<span class="sc">$</span>latitud <span class="sc">+</span> obj_destino<span class="sc">$</span>latitud) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a>    mid_lon <span class="ot">&lt;-</span> (obj_origen<span class="sc">$</span>longitud <span class="sc">+</span> obj_destino<span class="sc">$</span>longitud) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos el lienzo, añadimos baldosas (OpenStreetMap) y los marcadores/líneas</span></span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a>    mapa <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span>  <span class="co"># Añade el mapa base tradicional</span></span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addMarkers</span>(<span class="at">lng =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>longitud, obj_destino<span class="sc">$</span>longitud), </span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lat =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>latitud), </span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a>                   <span class="at">popup =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>nombre, obj_destino<span class="sc">$</span>nombre)) <span class="sc">%&gt;%</span></span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addPolylines</span>(<span class="at">lng =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>longitud, obj_destino<span class="sc">$</span>longitud), </span>
<span id="cb65-84"><a href="#cb65-84" aria-hidden="true" tabindex="-1"></a>                     <span class="at">lat =</span> <span class="fu">c</span>(obj_origen<span class="sc">$</span>latitud, obj_destino<span class="sc">$</span>latitud), </span>
<span id="cb65-85"><a href="#cb65-85" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">weight =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-86"><a href="#cb65-86" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ¡NUEVO!: Clavamos un popup fijo en el centro geométrico con el resultado</span></span>
<span id="cb65-87"><a href="#cb65-87" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addPopups</span>(<span class="at">lng =</span> mid_lon, <span class="at">lat =</span> mid_lat, </span>
<span id="cb65-88"><a href="#cb65-88" aria-hidden="true" tabindex="-1"></a>                  <span class="at">popup =</span> <span class="fu">sprintf</span>(<span class="st">"&lt;b&gt;Distancia:&lt;/b&gt; %.2f km"</span>, distancia_calc))</span>
<span id="cb65-89"><a href="#cb65-89" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb65-90"><a href="#cb65-90" aria-hidden="true" tabindex="-1"></a>    <span class="co"># SACA: El mapa interactivo listo</span></span>
<span id="cb65-91"><a href="#cb65-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(mapa)</span>
<span id="cb65-92"><a href="#cb65-92" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-93"><a href="#cb65-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-94"><a href="#cb65-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-95"><a href="#cb65-95" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. CREACIÓN DE OBJETOS (INSTANCIACIÓN) ---</span></span>
<span id="cb65-96"><a href="#cb65-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-97"><a href="#cb65-97" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"--- Creando objetos a partir del molde ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Creando objetos a partir del molde ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] INSTANCIACIÓN: Usamos nuestra función constructora para crear a Bogotá</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>punto_origen <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">4.6097</span>, <span class="sc">-</span><span class="fl">74.0817</span>, <span class="st">"Bogotá"</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos a Medellín</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>punto_destino <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">6.2442</span>, <span class="sc">-</span><span class="fl">75.5812</span>, <span class="st">"Medellín"</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un punto sin nombre para probar el valor por defecto</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>punto_misterioso <span class="ot">&lt;-</span> <span class="fu">nuevo_punto_espacial</span>(<span class="fl">12.5847</span>, <span class="sc">-</span><span class="fl">81.7006</span>)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] REPRESENTACIÓN: Probamos nuestra modificación al comando print()</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_origen)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Bogotá] (Lat: 4.6097, Lon: -74.0817)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_destino)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Medellín] (Lat: 6.2442, Lon: -75.5812)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(punto_misterioso)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Punto sin nombre] (Lat: 12.5847, Lon: -81.7006)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Usando los métodos del objeto ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Usando los métodos del objeto ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] MÉTODOS ANALÍTICOS: Ejecutamos nuestra función de clase enviando los dos objetos</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>resultado_km <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"La distancia desde %s hasta %s es: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>            punto_origen<span class="sc">$</span>nombre, punto_destino<span class="sc">$</span>nombre, resultado_km))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La distancia desde Bogotá hasta Medellín es: 246.14 km</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Truco de conversión: Forzamos que el método devuelva la respuesta en metros</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>resultado_metros <span class="ot">&lt;-</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino, <span class="at">radio =</span> <span class="fl">6371000.0</span>)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"O expresado en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, resultado_metros))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>O expresado en metros: 246135.99 m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] MÉTODO GRÁFICO: Lanzamos la creación del mapa</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>mapa_final <span class="ot">&lt;-</span> <span class="fu">graficar_ruta</span>(punto_origen, punto_destino)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">¡Mapa interactivo generado con éxito en la variable 'mapa_final'!</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
¡Mapa interactivo generado con éxito en la variable 'mapa_final'!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>mapa_final</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-045e526e02e7e2a10044" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-045e526e02e7e2a10044">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[4.6097,6.2442],[-74.0817,-75.5812],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Bogotá","Medellín"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[-74.0817,-75.5812],"lat":[4.6097,6.2442]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":3,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPopups","args":[5.42695,-74.83144999999999,"<b>Distancia:<\/b> 246.14 km",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]}],"limits":{"lat":[4.6097,6.2442],"lng":[-75.5812,-74.0817]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
▷ CÓDIGO PURO (Copiar y Pegar)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 0. FUNCIÓN MATEMÁTICA DE APOYO ---</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Reutilizamos la fórmula del semiverseno (haversine) para el cálculo de distancias</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">haversine</span>(lat1, lon1, lat2, lon2; radio<span class="op">=</span><span class="fl">6371.0</span>)</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="fu">sin</span>(<span class="fu">deg2rad</span>(lat2 <span class="op">-</span> lat1) <span class="op">/</span> <span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">cos</span>(<span class="fu">deg2rad</span>(lat1)) <span class="op">*</span> <span class="fu">cos</span>(<span class="fu">deg2rad</span>(lat2)) <span class="op">*</span> <span class="fu">sin</span>(<span class="fu">deg2rad</span>(lon2 <span class="op">-</span> lon1) <span class="op">/</span> <span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> radio <span class="op">*</span> (<span class="fl">2</span> <span class="op">*</span> <span class="fu">atan</span>(<span class="fu">sqrt</span>(a), <span class="fu">sqrt</span>(<span class="fl">1</span> <span class="op">-</span> a)))</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. DEFINICIÓN DE LA CLASE (MOLDE) ---</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] 1.1 EL CONSTRUCTOR (LA ESTRUCTURA)</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a><span class="co"># En Julia, la programación orientada a objetos se basa en 'structs' (estructuras).</span></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí definimos las propiedades fundamentales que componen un punto espacial.</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> PuntoEspacial</span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    latitud<span class="op">::</span><span class="dt">Float64   </span><span class="co"># Coordenada Y</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a>    longitud<span class="op">::</span><span class="dt">Float64  </span><span class="co"># Coordenada X</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a>    nombre<span class="op">::</span><span class="dt">String     </span><span class="co"># Etiqueta o nombre del lugar</span></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos un método constructor adicional. Si el usuario no proporciona un nombre,</span></span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a><span class="co"># el objeto se creará automáticamente con la etiqueta "Punto sin nombre".</span></span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a><span class="fu">PuntoEspacial</span>(lat, lon) <span class="op">=</span> <span class="fu">PuntoEspacial</span>(lat, lon, <span class="st">"Punto sin nombre"</span>)</span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL</span></span>
<span id="cb82-28"><a href="#cb82-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobrescribimos la función 'show' de Julia. Esto nos permite controlar exactamente</span></span>
<span id="cb82-29"><a href="#cb82-29" aria-hidden="true" tabindex="-1"></a><span class="co"># cómo se imprimirá nuestro objeto en la consola cuando usemos print().</span></span>
<span id="cb82-30"><a href="#cb82-30" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">show</span>(io<span class="op">::</span><span class="dt">IO</span>, obj<span class="op">::</span><span class="dt">PuntoEspacial</span>)</span>
<span id="cb82-31"><a href="#cb82-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(io, <span class="st">"[</span><span class="sc">$</span>(obj.nombre)<span class="st">] (Lat: </span><span class="sc">$</span>(obj.latitud)<span class="st">, Lon: </span><span class="sc">$</span>(obj.longitud)<span class="st">)"</span>)</span>
<span id="cb82-32"><a href="#cb82-32" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb82-33"><a href="#cb82-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-34"><a href="#cb82-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-35"><a href="#cb82-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] 1.3 MÉTODOS ANALÍTICOS (DESPACHO MÚLTIPLE)</span></span>
<span id="cb82-36"><a href="#cb82-36" aria-hidden="true" tabindex="-1"></a><span class="co"># En lugar de encapsular la función dentro de la clase, en Julia pasamos el objeto</span></span>
<span id="cb82-37"><a href="#cb82-37" aria-hidden="true" tabindex="-1"></a><span class="co"># explícitamente definiendo su tipo (::PuntoEspacial).</span></span>
<span id="cb82-38"><a href="#cb82-38" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">distancia_hacia</span>(origen<span class="op">::</span><span class="dt">PuntoEspacial</span>, destino<span class="op">::</span><span class="dt">PuntoEspacial</span>; radio<span class="op">=</span><span class="fl">6371.0</span>)</span>
<span id="cb82-39"><a href="#cb82-39" aria-hidden="true" tabindex="-1"></a>    distancia <span class="op">=</span> <span class="fu">haversine</span>(origen.latitud, origen.longitud, destino.latitud, destino.longitud, radio<span class="op">=</span>radio)</span>
<span id="cb82-40"><a href="#cb82-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distancia</span>
<span id="cb82-41"><a href="#cb82-41" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb82-42"><a href="#cb82-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-43"><a href="#cb82-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-44"><a href="#cb82-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] 1.4 MÉTODO GRÁFICO (DIBUJO Y MANIPULACIÓN DE CADENAS)</span></span>
<span id="cb82-45"><a href="#cb82-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Este método enseña cómo leer datos espaciales crudos sin depender de librerías externas.</span></span>
<span id="cb82-46"><a href="#cb82-46" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">graficar_ruta</span>(origen<span class="op">::</span><span class="dt">PuntoEspacial</span>, destino<span class="op">::</span><span class="dt">PuntoEspacial</span>)</span>
<span id="cb82-47"><a href="#cb82-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-48"><a href="#cb82-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Calculamos la distancia usando el método analítico del objeto</span></span>
<span id="cb82-49"><a href="#cb82-49" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> <span class="fu">distancia_hacia</span>(origen, destino)</span>
<span id="cb82-50"><a href="#cb82-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-51"><a href="#cb82-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Preparamos vectores con las coordenadas para facilitar la gráfica</span></span>
<span id="cb82-52"><a href="#cb82-52" aria-hidden="true" tabindex="-1"></a>    lons <span class="op">=</span> [origen.longitud, destino.longitud]</span>
<span id="cb82-53"><a href="#cb82-53" aria-hidden="true" tabindex="-1"></a>    lats <span class="op">=</span> [origen.latitud, destino.latitud]</span>
<span id="cb82-54"><a href="#cb82-54" aria-hidden="true" tabindex="-1"></a>    nombres <span class="op">=</span> [origen.nombre, destino.nombre]</span>
<span id="cb82-55"><a href="#cb82-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-56"><a href="#cb82-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el punto medio para ubicar la etiqueta de la distancia</span></span>
<span id="cb82-57"><a href="#cb82-57" aria-hidden="true" tabindex="-1"></a>    mid_lon <span class="op">=</span> (origen.longitud <span class="op">+</span> destino.longitud) <span class="op">/</span> <span class="fl">2</span></span>
<span id="cb82-58"><a href="#cb82-58" aria-hidden="true" tabindex="-1"></a>    mid_lat <span class="op">=</span> (origen.latitud <span class="op">+</span> destino.latitud) <span class="op">/</span> <span class="fl">2</span></span>
<span id="cb82-59"><a href="#cb82-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-60"><a href="#cb82-60" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Preparamos el lienzo base</span></span>
<span id="cb82-61"><a href="#cb82-61" aria-hidden="true" tabindex="-1"></a>    mapa <span class="op">=</span> <span class="fu">plot</span>(aspect_ratio<span class="op">=:</span>equal, legend<span class="op">=</span><span class="cn">false</span>,</span>
<span id="cb82-62"><a href="#cb82-62" aria-hidden="true" tabindex="-1"></a>                xlabel<span class="op">=</span><span class="st">"Longitud"</span>, ylabel<span class="op">=</span><span class="st">"Latitud"</span>, title<span class="op">=</span><span class="st">"Mapa Cartográfico Estático"</span>)</span>
<span id="cb82-63"><a href="#cb82-63" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb82-64"><a href="#cb82-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Usamos un bloque try-catch para evitar que el programa falle si el archivo no existe</span></span>
<span id="cb82-65"><a href="#cb82-65" aria-hidden="true" tabindex="-1"></a>    try</span>
<span id="cb82-66"><a href="#cb82-66" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Leemos el archivo GeoJSON como texto plano (String). </span></span>
<span id="cb82-67"><a href="#cb82-67" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Usamos Base.read explícitamente para evitar ambigüedades con otras funciones.</span></span>
<span id="cb82-68"><a href="#cb82-68" aria-hidden="true" tabindex="-1"></a>        texto_json <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">read</span>(<span class="st">"./data/COL.geo.json"</span>, <span class="dt">String</span>)</span>
<span id="cb82-69"><a href="#cb82-69" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb82-70"><a href="#cb82-70" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Buscamos los delimitadores estructurales del arreglo de coordenadas en el JSON</span></span>
<span id="cb82-71"><a href="#cb82-71" aria-hidden="true" tabindex="-1"></a>        idx_inicio <span class="op">=</span> <span class="fu">findfirst</span>(<span class="st">"[[["</span>, texto_json)</span>
<span id="cb82-72"><a href="#cb82-72" aria-hidden="true" tabindex="-1"></a>        idx_fin <span class="op">=</span> <span class="fu">findlast</span>(<span class="st">"]]]"</span>, texto_json)</span>
<span id="cb82-73"><a href="#cb82-73" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb82-74"><a href="#cb82-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> idx_inicio <span class="op">!==</span> <span class="cn">nothing</span> <span class="op">&amp;&amp;</span> idx_fin <span class="op">!==</span> <span class="cn">nothing</span></span>
<span id="cb82-75"><a href="#cb82-75" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Aislamos únicamente el bloque de texto que contiene los números</span></span>
<span id="cb82-76"><a href="#cb82-76" aria-hidden="true" tabindex="-1"></a>            bloque <span class="op">=</span> texto_json[<span class="fu">last</span>(idx_inicio)<span class="op">+</span><span class="fl">1</span> <span class="op">:</span> <span class="fu">first</span>(idx_fin)<span class="op">-</span><span class="fl">1</span>]</span>
<span id="cb82-77"><a href="#cb82-77" aria-hidden="true" tabindex="-1"></a>            puntos <span class="op">=</span> <span class="fu">split</span>(bloque, <span class="st">"],["</span>)</span>
<span id="cb82-78"><a href="#cb82-78" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb82-79"><a href="#cb82-79" aria-hidden="true" tabindex="-1"></a>            xs <span class="op">=</span> <span class="dt">Float64</span>[]</span>
<span id="cb82-80"><a href="#cb82-80" aria-hidden="true" tabindex="-1"></a>            ys <span class="op">=</span> <span class="dt">Float64</span>[]</span>
<span id="cb82-81"><a href="#cb82-81" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb82-82"><a href="#cb82-82" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Iteramos sobre cada coordenada, limpiamos los caracteres extra y convertimos a número</span></span>
<span id="cb82-83"><a href="#cb82-83" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> pt <span class="kw">in</span> puntos</span>
<span id="cb82-84"><a href="#cb82-84" aria-hidden="true" tabindex="-1"></a>                limpio <span class="op">=</span> <span class="fu">replace</span>(pt, <span class="st">"["</span> <span class="op">=&gt;</span> <span class="st">""</span>, <span class="st">"]"</span> <span class="op">=&gt;</span> <span class="st">""</span>, <span class="st">" "</span> <span class="op">=&gt;</span> <span class="st">""</span>)</span>
<span id="cb82-85"><a href="#cb82-85" aria-hidden="true" tabindex="-1"></a>                vals <span class="op">=</span> <span class="fu">split</span>(limpio, <span class="st">","</span>)</span>
<span id="cb82-86"><a href="#cb82-86" aria-hidden="true" tabindex="-1"></a>                <span class="fu">push!</span>(xs, <span class="fu">parse</span>(<span class="dt">Float64</span>, vals[<span class="fl">1</span>]))</span>
<span id="cb82-87"><a href="#cb82-87" aria-hidden="true" tabindex="-1"></a>                <span class="fu">push!</span>(ys, <span class="fu">parse</span>(<span class="dt">Float64</span>, vals[<span class="fl">2</span>]))</span>
<span id="cb82-88"><a href="#cb82-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb82-89"><a href="#cb82-89" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb82-90"><a href="#cb82-90" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Dibujamos la geometría extraída (silueta del país)</span></span>
<span id="cb82-91"><a href="#cb82-91" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plot!</span>(mapa, xs, ys, seriestype<span class="op">=:</span>shape, fillcolor<span class="op">=:</span>lightgrey, linecolor<span class="op">=:</span>white)</span>
<span id="cb82-92"><a href="#cb82-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb82-93"><a href="#cb82-93" aria-hidden="true" tabindex="-1"></a>    catch <span class="cn">e</span></span>
<span id="cb82-94"><a href="#cb82-94" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Mensaje de respaldo si la lectura del mapa base falla</span></span>
<span id="cb82-95"><a href="#cb82-95" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate!</span>(mapa, mid_lon, mid_lat <span class="op">+</span> <span class="fl">1.5</span>, <span class="fu">text</span>(<span class="st">"(Sin mapa base)"</span>, <span class="op">:</span>gray, <span class="fl">9</span>))</span>
<span id="cb82-96"><a href="#cb82-96" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb82-97"><a href="#cb82-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-98"><a href="#cb82-98" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Trazamos la línea de la ruta que conecta los puntos</span></span>
<span id="cb82-99"><a href="#cb82-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot!</span>(mapa, lons, lats, linecolor<span class="op">=:</span>red, linewidth<span class="op">=</span><span class="fl">2</span>)</span>
<span id="cb82-100"><a href="#cb82-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-101"><a href="#cb82-101" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Añadimos los marcadores de las ciudades</span></span>
<span id="cb82-102"><a href="#cb82-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scatter!</span>(mapa, lons, lats, color<span class="op">=:</span>blue, markersize<span class="op">=</span><span class="fl">6</span>, </span>
<span id="cb82-103"><a href="#cb82-103" aria-hidden="true" tabindex="-1"></a>             series_annotations<span class="op">=</span><span class="fu">text</span>.(nombres, <span class="op">:</span>bottom))</span>
<span id="cb82-104"><a href="#cb82-104" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb82-105"><a href="#cb82-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Insertamos el texto con el resultado de la distancia en el centro</span></span>
<span id="cb82-106"><a href="#cb82-106" aria-hidden="true" tabindex="-1"></a>    texto_distancia <span class="op">=</span> <span class="st">" </span><span class="sc">$</span>(<span class="fu">round</span>(dist, digits<span class="op">=</span><span class="fl">2</span>))<span class="st"> km"</span></span>
<span id="cb82-107"><a href="#cb82-107" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate!</span>(mapa, mid_lon, mid_lat, <span class="fu">text</span>(texto_distancia, <span class="op">:</span>black, <span class="fl">10</span>, <span class="op">:</span>bottom))</span>
<span id="cb82-108"><a href="#cb82-108" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb82-109"><a href="#cb82-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mapa</span>
<span id="cb82-110"><a href="#cb82-110" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb82-111"><a href="#cb82-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-112"><a href="#cb82-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-113"><a href="#cb82-113" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. CREACIÓN DE OBJETOS (INSTANCIACIÓN) ---</span></span>
<span id="cb82-114"><a href="#cb82-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-115"><a href="#cb82-115" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"--- Creando objetos a partir del molde ---"</span>)</span>
<span id="cb82-116"><a href="#cb82-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-117"><a href="#cb82-117" aria-hidden="true" tabindex="-1"></a><span class="co"># [1 📍] INSTANCIACIÓN: Construyendo los objetos usando el 'struct'</span></span>
<span id="cb82-118"><a href="#cb82-118" aria-hidden="true" tabindex="-1"></a>punto_origen <span class="op">=</span> <span class="fu">PuntoEspacial</span>(<span class="fl">4.6097</span>, <span class="op">-</span><span class="fl">74.0817</span>, <span class="st">"Bogotá"</span>)</span>
<span id="cb82-119"><a href="#cb82-119" aria-hidden="true" tabindex="-1"></a>punto_destino <span class="op">=</span> <span class="fu">PuntoEspacial</span>(<span class="fl">6.2442</span>, <span class="op">-</span><span class="fl">75.5812</span>, <span class="st">"Medellín"</span>)</span>
<span id="cb82-120"><a href="#cb82-120" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un punto sin nombre para comprobar el comportamiento por defecto</span></span>
<span id="cb82-121"><a href="#cb82-121" aria-hidden="true" tabindex="-1"></a>punto_misterioso <span class="op">=</span> <span class="fu">PuntoEspacial</span>(<span class="fl">12.5847</span>, <span class="op">-</span><span class="fl">81.7006</span>)</span>
<span id="cb82-122"><a href="#cb82-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-123"><a href="#cb82-123" aria-hidden="true" tabindex="-1"></a><span class="co"># [2 💬] REPRESENTACIÓN: Al imprimir, Julia aplica el formato definido en Base.show</span></span>
<span id="cb82-124"><a href="#cb82-124" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(punto_origen)</span>
<span id="cb82-125"><a href="#cb82-125" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(punto_destino)</span>
<span id="cb82-126"><a href="#cb82-126" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(punto_misterioso)</span>
<span id="cb82-127"><a href="#cb82-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-128"><a href="#cb82-128" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Usando los métodos del objeto ---"</span>)</span>
<span id="cb82-129"><a href="#cb82-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-130"><a href="#cb82-130" aria-hidden="true" tabindex="-1"></a><span class="co"># [3 📐] MÉTODOS ANALÍTICOS: Calculamos las distancias dinámicamente</span></span>
<span id="cb82-131"><a href="#cb82-131" aria-hidden="true" tabindex="-1"></a>resultado_km <span class="op">=</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino)</span>
<span id="cb82-132"><a href="#cb82-132" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"La distancia desde %s hasta %s es: %.2f km</span><span class="sc">\n</span><span class="st">"</span>, punto_origen.nombre, punto_destino.nombre, resultado_km)</span>
<span id="cb82-133"><a href="#cb82-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-134"><a href="#cb82-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Truco de conversión</span></span>
<span id="cb82-135"><a href="#cb82-135" aria-hidden="true" tabindex="-1"></a>resultado_metros <span class="op">=</span> <span class="fu">distancia_hacia</span>(punto_origen, punto_destino, radio<span class="op">=</span><span class="fl">6371000.0</span>)</span>
<span id="cb82-136"><a href="#cb82-136" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"O expresado en metros: %.2f m</span><span class="sc">\n</span><span class="st">"</span>, resultado_metros)</span>
<span id="cb82-137"><a href="#cb82-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-138"><a href="#cb82-138" aria-hidden="true" tabindex="-1"></a><span class="co"># [4 🗺️📐] MÉTODO GRÁFICO: Generamos y visualizamos el mapa</span></span>
<span id="cb82-139"><a href="#cb82-139" aria-hidden="true" tabindex="-1"></a>mapa_final <span class="op">=</span> <span class="fu">graficar_ruta</span>(punto_origen, punto_destino)</span>
<span id="cb82-140"><a href="#cb82-140" aria-hidden="true" tabindex="-1"></a>mapa_final</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota Técnica: El Motor de Interoperabilidad Geomática
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si revisas el código fuente de este documento Quarto, notarás que en <strong>Julia</strong> estamos usando dos funciones especiales llamadas <code>j_eval()</code> y <code>j_plot()</code>, en lugar del bloque de código estándar. Esto se debe a que estamos usando un Motor de Interoperabilidad que conecta R y Julia por debajo. Para garantizar que la memoria se mantenga y el gráfico se exporte correctamente en el PDF/HTML, usamos <code>j_eval()</code> para compilar la lógica, y <code>j_plot()</code> <strong>únicamente</strong> al final para pedirle a la librería de gráficos que procese la imagen.</p>
</div>
</div>
<div class="cell" data-layout-align="center">
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- MAGIA NEGRA PARA DOCKER ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">ENV["GKSwstype"] = "100"</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">"100"

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">using Printf</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">using Plots</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- 0. FUNCIÓN MATEMÁTICA DE APOYO ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function haversine(lat1, lon1, lat2, lon2; radio=6371.0)</span>
       <span style="color:#008b8b;">    a = sin(deg2rad(lat2 - lat1) / 2)^2 + cos(deg2rad(lat1)) * cos(deg2rad(lat2)) * sin(deg2rad(lon2 - lon1) / 2)^2</span>
       <span style="color:#008b8b;">    return radio * (2 * atan(sqrt(a), sqrt(1 - a)))</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">haversine (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- 1. DEFINICIÓN DE LA CLASE (MOLDE) ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [1 📍] 1.1 EL CONSTRUCTOR (LA ESTRUCTURA)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">struct PuntoEspacial</span>
       <span style="color:#008b8b;">    latitud::Float64</span>
       <span style="color:#008b8b;">    longitud::Float64</span>
       <span style="color:#008b8b;">    nombre::String</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Constructor auxiliar para valores por defecto</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">PuntoEspacial(lat, lon) = PuntoEspacial(lat, lon, "Punto sin nombre")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">PuntoEspacial

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [2 💬] 1.2 LA REPRESENTACIÓN TEXTUAL</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># Sobrescribimos show para controlar cómo se ve el objeto al imprimirlo</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function Base.show(io::IO, obj::PuntoEspacial)</span>
       <span style="color:#008b8b;">    print(io, "[$(obj.nombre)] (Lat: $(obj.latitud), Lon: $(obj.longitud))")</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [3 📐] 1.3 MÉTODOS ANALÍTICOS (DESPACHO MÚLTIPLE)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function distancia_hacia(origen::PuntoEspacial, destino::PuntoEspacial; radio=6371.0)</span>
       <span style="color:#008b8b;">    return haversine(origen.latitud, origen.longitud, destino.latitud, destino.longitud, radio=radio)</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">distancia_hacia (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [4 🗺️📐] 1.4 MÉTODO GRÁFICO (GENERACIÓN DE MAPA)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">function graficar_ruta(origen::PuntoEspacial, destino::PuntoEspacial)</span>
       <span style="color:#008b8b;">    dist = distancia_hacia(origen, destino)</span>
       <span style="color:#008b8b;">    lons = [origen.longitud, destino.longitud]</span>
       <span style="color:#008b8b;">    lats = [origen.latitud, destino.latitud]</span>
       <span style="color:#008b8b;">    nombres = [origen.nombre, destino.nombre]</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    mid_lon = (origen.longitud + destino.longitud) / 2</span>
       <span style="color:#008b8b;">    mid_lat = (origen.latitud + destino.latitud) / 2</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    mapa = plot(aspect_ratio=:equal, legend=false,</span>
       <span style="color:#008b8b;">                xlabel="Longitud", ylabel="Latitud", title="Mapa Cartográfico Estático")</span>
       <span style="color:#008b8b;">                </span>
       <span style="color:#008b8b;">    try</span>
       <span style="color:#008b8b;">        texto_json = Base.read("./data/COL.geo.json", String)</span>
       <span style="color:#008b8b;">        idx_inicio = findfirst("[[[", texto_json)</span>
       <span style="color:#008b8b;">        idx_fin = findlast("]]]", texto_json)</span>
       <span style="color:#008b8b;">        </span>
       <span style="color:#008b8b;">        if idx_inicio !== nothing &amp;&amp; idx_fin !== nothing</span>
       <span style="color:#008b8b;">            bloque = texto_json[last(idx_inicio)+1 : first(idx_fin)-1]</span>
       <span style="color:#008b8b;">            puntos = split(bloque, "],[")</span>
       <span style="color:#008b8b;">            xs, ys = Float64[], Float64[]</span>
       <span style="color:#008b8b;">            </span>
       <span style="color:#008b8b;">            for pt in puntos</span>
       <span style="color:#008b8b;">                limpio = replace(pt, "[" =&gt; "", "]" =&gt; "", " " =&gt; "")</span>
       <span style="color:#008b8b;">                vals = split(limpio, ",")</span>
       <span style="color:#008b8b;">                push!(xs, parse(Float64, vals[1]))</span>
       <span style="color:#008b8b;">                push!(ys, parse(Float64, vals[2]))</span>
       <span style="color:#008b8b;">            end</span>
       <span style="color:#008b8b;">            plot!(mapa, xs, ys, seriestype=:shape, fillcolor=:lightgrey, linecolor=:white)</span>
       <span style="color:#008b8b;">        end</span>
       <span style="color:#008b8b;">    catch e</span>
       <span style="color:#008b8b;">        annotate!(mapa, mid_lon, mid_lat + 1.5, text("(Sin mapa base)", :gray, 9))</span>
       <span style="color:#008b8b;">    end</span>
       <span style="color:#008b8b;">    </span>
       <span style="color:#008b8b;">    plot!(mapa, lons, lats, linecolor=:red, linewidth=2)</span>
       <span style="color:#008b8b;">    scatter!(mapa, lons, lats, color=:blue, markersize=6, series_annotations=text.(nombres, :bottom))</span>
       <span style="color:#008b8b;">    annotate!(mapa, mid_lon, mid_lat, text(" $(round(dist, digits=2)) km", :black, 10, :bottom))</span>
       <span style="color:#008b8b;">             </span>
       <span style="color:#008b8b;">    return mapa</span>
       <span style="color:#008b8b;">end</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">graficar_ruta (generic function with 1 method)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># --- 2. CREACIÓN DE OBJETOS E INSTANCIACIÓN ---</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println("--- Creando objetos a partir del molde ---")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">--- Creando objetos a partir del molde ---

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [1 📍] INSTANCIACIÓN: Creamos los puntos origen y destino en la memoria global</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">global punto_origen = PuntoEspacial(4.6097, -74.0817, "Bogotá")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Bogotá] (Lat: 4.6097, Lon: -74.0817)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">global punto_destino = PuntoEspacial(6.2442, -75.5812, "Medellín")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Medellín] (Lat: 6.2442, Lon: -75.5812)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">global punto_misterioso = PuntoEspacial(12.5847, -81.7006)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Punto sin nombre] (Lat: 12.5847, Lon: -81.7006)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [2 💬] REPRESENTACIÓN: Julia activa automáticamente Base.show()</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println(punto_origen)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Bogotá] (Lat: 4.6097, Lon: -74.0817)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println(punto_destino)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Medellín] (Lat: 6.2442, Lon: -75.5812)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println(punto_misterioso)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">[Punto sin nombre] (Lat: 12.5847, Lon: -81.7006)

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">println("\n--- Usando los métodos del objeto ---")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">--- Usando los métodos del objeto ---

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [3 📐] MÉTODOS ANALÍTICOS: El despacho múltiple elige la función correcta</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">resultado_km = distancia_hacia(punto_origen, punto_destino)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">246.13598981951554

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("La distancia desde %s hasta %s es: %.2f km\n", punto_origen.nombre, punto_destino.nombre, resultado_km)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">La distancia desde Bogotá hasta Medellín es: 246.14 km

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">resultado_metros = distancia_hacia(punto_origen, punto_destino, radio=6371000.0)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">246135.98981951553

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">@printf("O expresado en metros: %.2f m\n", resultado_metros)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">O expresado en metros: 246135.99 m

</pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;"># [4 🗺️📐] MÉTODO GRÁFICO: Generamos el mapa y lo guardamos directamente en el disco</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">mapa_final = graficar_ruta(punto_origen, punto_destino)</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;"></pre>
<pre class="julia-code" style="display:block; background:#f4f6f8; border:1px solid #c0c8d0; border-radius:4px; padding:10px; margin-top:10px; margin-bottom:0; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#333;"><span style="color:#28a745; font-weight:bold;">julia&gt; </span><span style="color:#008b8b;">savefig(mapa_final, "mapa_julia_poo.png")</span>
</pre>
<pre class="julia-output" style="display:block; background:#ffffff; border:none; padding:10px 10px 10px 20px; margin-top:0; margin-bottom:15px; font-family:&quot;Lucida Console&quot;, Consolas, monospace; font-size:0.9em; white-space:pre-wrap; color:#000;">"/home/rstudio/work/01_prog_sig/mapa_julia_poo.png"

</pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="mapa_julia_poo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="los-pilares-de-la-poo-en-geomática-sin-complicaciones" class="level3">
<h3 class="anchored" data-anchor-id="los-pilares-de-la-poo-en-geomática-sin-complicaciones">Los pilares de la POO en Geomática (sin complicaciones)</h3>
<p>Aunque nuestro objetivo principal ha sido organizar el código, sin darte cuenta acabas de implementar los dos pilares más poderosos de la <strong>Programación Orientada a Objetos (POO)</strong>. No son conceptos abstractos de libros; son herramientas reales que acabas de usar en tus mapas:</p>
<section id="abstracción-el-arte-de-la-caja-negra" class="level4">
<h4 class="anchored" data-anchor-id="abstracción-el-arte-de-la-caja-negra">1. Abstracción: El arte de la “Caja Negra”</h4>
<p>Cuando llamaste al método <code>punto_origen.distancia_hacia(punto_destino)</code>, aplicaste la <strong>Abstracción</strong>.</p>
<ul>
<li><strong>Lo que ves:</strong> Una simple orden que te devuelve un número.</li>
<li><strong>Lo que ignoras:</strong> Los senos, cosenos, arcosenos y conversiones a radianes de la fórmula de Haversine.</li>
</ul>
<p>Abstraer es <strong>simplificar la realidad</strong>. En geomática, esto es vital: no queremos pensar en la curvatura de la Tierra cada vez que medimos un predio; queremos una herramienta que “sepa hacerlo” y nos entregue el resultado. Al crear la clase o estructura, convertiste una matemática compleja en un botón fácil de presionar.</p>
</section>
<section id="encapsulamiento-el-todo-incluido" class="level4">
<h4 class="anchored" data-anchor-id="encapsulamiento-el-todo-incluido">2. Encapsulamiento: El “Todo Incluido”</h4>
<p>Recuerda nuestra analogía del <strong>porta-comidas</strong> o el <strong>Food Truck</strong>. Al crear el objeto <code>PuntoEspacial</code>, aplicaste el <strong>Encapsulamiento</strong>.</p>
<p>En lugar de tener la latitud por un lado, el nombre por otro y la función de medir flotando en un archivo perdido, lo encerraste todo en una sola “cápsula”.</p>
<ul>
<li><strong>El beneficio:</strong> Tus datos están protegidos. Sabes que el método <code>distancia_hacia</code> solo funciona con los datos que están dentro de esa cápsula. Esto evita que, en un proyecto grande con miles de puntos, termines midiendo accidentalmente la distancia entre el nombre de una ciudad y la temperatura de otra.</li>
</ul>
<blockquote class="blockquote">
<p><strong>En resumen:</strong> La <strong>Abstracción</strong> oculta la complejidad matemática y el <strong>Encapsulamiento</strong> mantiene tus datos ordenados y seguros dentro de una misma entidad.</p>
</blockquote>
</section>
</section>
<section id="el-motor-bajo-el-capó-despacho-y-velocidad" class="level3">
<h3 class="anchored" data-anchor-id="el-motor-bajo-el-capó-despacho-y-velocidad">El motor bajo el capó: Despacho y Velocidad</h3>
<p>A lo largo del capítulo vimos cómo se estructuran las clases, pero queda una pregunta crítica: <strong>¿Por qué Julia es tan famoso por su velocidad frente a R y Python en cálculos científicos pesados?</strong> La respuesta no está en la sintaxis, sino en dos conceptos fundamentales que ocurren tras bambalinas: el tipo de despacho y el momento en que se procesa.</p>
<ol type="1">
<li><strong>Python (Despacho Interno):</strong> Actúa como un <strong>Food Truck autónomo</strong>. El objeto es el dueño de sus métodos. Cuando llamas a <code>punto.distancia()</code>, Python busca dentro del objeto <code>punto</code> y ejecuta su propia herramienta integrada. Es muy intuitivo, pero cargar “una cocina completa” dentro de cada objeto consume mucha memoria si tienes millones de ellos.</li>
<li><strong>R (Despacho Simple en Runtime):</strong> Actúa como un <strong>inspector de correos perezoso</strong>. R usa funciones genéricas; cuando llamas a <code>distancia(origen, destino)</code>, R solo mira el “post-it” (la clase) del <em>primer</em> argumento (<code>origen</code>). Luego, busca manualmente en su directorio qué función usar y la ejecuta. Como R hace esto en “Tiempo de Ejecución” (<em>Runtime</em>), si tienes un ciclo con un millón de coordenadas, R se detiene a leer el post-it un millón de veces. ¡Ese papeleo es lo que lo hace lento!</li>
<li><strong>Julia (Despacho Múltiple + Compilación JIT):</strong> Actúa como una <strong>fábrica industrial láser</strong>. Cuando llamas a <code>distancia(origen, destino)</code>, el compilador revisa con láser las etiquetas de <em>todos</em> los ingredientes al mismo tiempo. Pero el verdadero secreto es <em>cuándo</em> lo hace: la primera vez que Julia ve esa combinación, detiene el tiempo, traduce la receta a <strong>código de máquina nativo</strong> (ceros y unos hiper-optimizados) y construye un “tubo de ensamblaje” directo (Compilación <em>Just-In-Time</em> o JIT). Las siguientes 999,999 veces del ciclo, los datos pasan por el tubo a la velocidad de la luz sin leer etiquetas.</li>
</ol>
<p><em>La siguiente analogía visualiza las diferencias entre los tres motores de ejecución:</em></p>
<div id="fig-analogia-motores" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-analogia-motores-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/comparativa_despacho_python_r_julia.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-analogia-motores-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.11: <strong>Analogía de los motores de ejecución:</strong> El Food Truck autónomo (Python), la lenta Oficina de Correos de revisión manual (R) y la veloz Fábrica Industrial Láser (Julia).
</figcaption>
</figure>
</div>
<p>Técnicamente, podemos estructurar el flujo de decisiones de cada motor mediante el siguiente diagrama:</p>
<div class="cell" data-fig-width="10" data-out-width="100%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-diagrama-motores" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-diagrama-motores-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-diagrama-motores">flowchart LR
    %% ESTILOS DE LOS NODOS (Pasteles para que resalten)
    classDef python fill:#FDEBD0,stroke:#F39C12,stroke-width:2px,color:#7E5109,font-size:14px
    classDef rlang fill:#E8F8F5,stroke:#2ECC71,stroke-width:2px,color:#145A32,font-size:14px
    classDef julia fill:#EBDEF0,stroke:#8E44AD,stroke-width:2px,color:#512E5F,font-size:14px
    classDef action fill:#EAEDED,stroke:#34495E,stroke-width:1px,color:#2C3E50,font-size:13px
    classDef decision fill:#EAEDED,stroke:#34495E,stroke-width:1px,color:#2C3E50,font-size:13px,shape:diamond
    
    %% SUBGRAFO PYTHON
    subgraph PY ["🐍 PYTHON (POO Clásica)"]
        direction TB
        P1["Objeto llama a su método&lt;br/&gt;obj.distancia(destino)"]:::python
        P2["El objeto busca en su&lt;br/&gt;propio inventario interno"]:::action
        P3["Ejecución Estándar"]:::python
        P1 --&gt; P2 --&gt; P3
    end
    %% FUERZA BRUTA: Pintamos el fondo de la caja de Python de blanco
    style PY fill:#ffffff,stroke:#cccccc,stroke-width:2px,color:#000000

    %% SUBGRAFO R
    subgraph RL ["🔵 R (Despacho Simple + Runtime)"]
        direction TB
        R1["Función Genérica&lt;br/&gt;distancia(origen, destino)"]:::rlang
        R2["Revisa SÓLO la clase&lt;br/&gt;del PRIMER objeto"]:::action
        R3{"Búsqueda&lt;br/&gt;en manual"}:::decision
        R4["Ejecución lenta&lt;br/&gt;(Se repite en cada ciclo)"]:::rlang
        R1 --&gt; R2 --&gt; R3 --&gt; R4
    end
    %% FUERZA BRUTA: Pintamos el fondo de la caja de R de blanco
    style RL fill:#ffffff,stroke:#cccccc,stroke-width:2px,color:#000000

    %% SUBGRAFO JULIA
    subgraph JU ["🟣 JULIA (Despacho Múltiple + JIT)"]
        direction TB
        J1["Función Libre&lt;br/&gt;distancia(origen, destino)"]:::julia
        J2["Escanea los tipos exactos&lt;br/&gt;de TODOS los argumentos"]:::action
        J3{"1ra Vez:&lt;br/&gt;Compila a&lt;br/&gt;Código Máquina"}:::decision
        J4["Ejecución Velocidad Luz&lt;br/&gt;(Pasa directo por el tubo)"]:::julia
        J1 --&gt; J2 --&gt; J3 --&gt; J4
    end
    %% FUERZA BRUTA: Pintamos el fondo de la caja de Julia de blanco
    style JU fill:#ffffff,stroke:#cccccc,stroke-width:2px,color:#000000

    %% ALINEACIÓN HORIZONTAL
    PY ~~~ RL ~~~ JU
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diagrama-motores-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;9.12: Flujo lógico de los motores de ejecución: Python, R y Julia.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="resumen-de-sintaxis-programación-orientada-a-objetos" class="level3">
<h3 class="anchored" data-anchor-id="resumen-de-sintaxis-programación-orientada-a-objetos">Resumen de sintaxis: programación orientada a objetos</h3>
<p>Como pudiste observar, cada lenguaje aborda las clases con una filosofía arquitectónica distinta: Python encapsula los métodos dentro del objeto, R usa funciones sueltas que leen etiquetas invisibles (S3), y Julia usa estructuras rígidas con funciones que exigen el tipo de dato exacto (despacho múltiple).</p>
<div id="tbl-clases_objetos" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-clases_objetos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;9.2: Diferencias en la creación de Clases y Objetos
</figcaption>
<div aria-describedby="tbl-clases_objetos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 26%">
<col style="width: 27%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Característica</th>
<th style="text-align: left;">Python (POO Clásica)</th>
<th style="text-align: left;">R (Sistema S3)</th>
<th style="text-align: left;">Julia (Despacho Múltiple)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Definir Molde</strong></td>
<td style="text-align: left;"><code>class Objeto:</code></td>
<td style="text-align: left;">Función que retorna una <code>list()</code></td>
<td style="text-align: left;"><code>struct Objeto ... end</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Constructor</strong></td>
<td style="text-align: left;"><code>def __init__(self):</code></td>
<td style="text-align: left;">Asignar etiqueta: <code>class(obj) &lt;- 'Tipo'</code></td>
<td style="text-align: left;"><code>Objeto()</code> (Automático o explícito)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Auto-referencia</strong></td>
<td style="text-align: left;">Usa la palabra <code>self</code></td>
<td style="text-align: left;">Pasa el objeto <code>obj</code> como argumento</td>
<td style="text-align: left;">Pasa el objeto tipado <code>obj::Tipo</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Métodos</strong></td>
<td style="text-align: left;">Van dentro de <code>class</code></td>
<td style="text-align: left;">Genérico (<code>UseMethod</code>) + <code>metodo.Clase</code></td>
<td style="text-align: left;">Funciones independientes enrutadas por tipo</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Representación</strong></td>
<td style="text-align: left;"><code>def __str__(self):</code></td>
<td style="text-align: left;"><code>print.Clase &lt;- function(obj)</code></td>
<td style="text-align: left;"><code>Base.show(io, obj::Clase)</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="guías-de-diseño-para-funciones-y-clases" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="guías-de-diseño-para-funciones-y-clases"><span class="header-section-number">9.6</span> Guías de diseño para funciones y clases</h2>
<p>Escribir código que la máquina entienda es fácil; escribir código que otro ser humano (o usted mismo en seis meses) pueda entender, es un arte. Ya sea que esté usando el molde estricto de Python, las etiquetas de R o los chefs de Julia, existen reglas de oro universales para que su arquitectura sea sólida, limpia y profesional.</p>
<p>A continuación, presentamos los mandamientos del buen diseño de software para la ciencia de datos.</p>
<section id="el-diseño-de-funciones-los-obreros-de-la-obra" class="level3">
<h3 class="anchored" data-anchor-id="el-diseño-de-funciones-los-obreros-de-la-obra">1. El diseño de Funciones: los obreros de la obra</h3>
<p>Las funciones son la unidad básica de acción en su código. Si sus funciones son un enredo, todo el proyecto lo será.</p>
<ul>
<li><strong>Hagan una sola cosa (Single Responsibility):</strong> Una función debe tener un único propósito claro. Si su función descarga los datos, los limpia, calcula la distancia y de paso le imprime un mapa, está haciendo demasiado. Divídala en cuatro funciones pequeñas. La navaja suiza es útil para acampar, pero en programación es un peligro.</li>
<li><strong>Nombres que cuenten la historia:</strong> El nombre de una función debe ser un verbo que describa exactamente su acción. Evite abreviaturas jeroglíficas. Es preferible escribir <code>calcular_distancia_km()</code> que <code>calc_dist()</code>.</li>
<li><strong>Evite las “novelas” (Mantenlas cortas):</strong> Si el cuerpo de su función no cabe en la pantalla de su monitor sin hacer <em>scroll</em>, es momento de machetearla y dividirla. Las funciones cortas son fáciles de testear y rara vez esconden errores.</li>
<li><strong>Sin efectos secundarios (Pureza):</strong> Lo ideal es que una función reciba datos, haga su trabajo y devuelva un resultado sin alterar silenciosamente variables globales u otras partes del sistema. Lo que pasa en la función, se queda en la función.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="La regla DRY (Don't Repeat Yourself)">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
La regla DRY (Don’t Repeat Yourself)
</div>
</div>
<div class="callout-body-container callout-body">
<p>“No te repitas”. Si usted se descubre copiando y pegando el mismo bloque de código tres veces seguidas y solo cambiándole una variable, deténgase. Ese bloque debe convertirse inmediatamente en una función.</p>
</div>
</div>
<hr>
</section>
<section id="el-diseño-de-clases-y-estructuras-los-cimientos-del-edificio" class="level3">
<h3 class="anchored" data-anchor-id="el-diseño-de-clases-y-estructuras-los-cimientos-del-edificio">2. El diseño de Clases (y Estructuras): los cimientos del edificio</h3>
<p>Cuando decida agrupar sus datos y funciones en un objeto o estructura, hágalo con prudencia. No todo necesita ser una clase.</p>
<ul>
<li><strong>Alta cohesión:</strong> Todo lo que viva dentro de su clase (o <code>struct</code>) debe estar íntimamente relacionado. Siguiendo nuestra analogía, no meta la receta del sancocho en el molde de las arepas. Si un <code>PuntoEspacial</code> tiene latitud y longitud, perfecto; pero si también le agrega un atributo para el “color_favorito_del_usuario”, está rompiendo la cohesión.</li>
<li><strong>Oculte las tuberías (Encapsulamiento):</strong> El usuario de su objeto no necesita saber cómo funcionan las matemáticas internamente, solo necesita el resultado. Exponga únicamente los métodos y atributos que son estrictamente necesarios para usar el objeto (la interfaz pública) y mantenga la complejidad “escondida” en el motor.</li>
<li><strong>Evite el “Síndrome de Dios”:</strong> Una “clase Dios” es aquella que sabe demasiado y hace de todo (ej. <code>GestorDeMapasYDatosYCalculos</code>). Si su clase maneja toda la lógica del proyecto, divídala en objetos más pequeños y delegue responsabilidades. Un objeto <code>Coordenada</code> interactúa con un objeto <code>Mapa</code>, no son el mismo ente.</li>
<li><strong>Si no hay estado, no hay clase:</strong> Especialmente en Python y R. Si usted crea una clase que solo tiene métodos pero no guarda ningún dato (atributos), no necesita una clase; lo que usted necesita es un simple archivo con funciones sueltas.</li>
</ul>
</section>
<section id="comentarios-y-documentación" class="level3">
<h3 class="anchored" data-anchor-id="comentarios-y-documentación">3. Comentarios y documentación</h3>
<ul>
<li><strong>El código explica el <em>Qué</em>, el comentario explica el <em>Por qué</em>:</strong> No escriba comentarios obvios como <code># Esto suma 2 + 2</code>. Use los comentarios para explicar decisiones de negocio o atajos matemáticos: <code># Usamos la fórmula de Haversine porque es más precisa para distancias cortas</code>.</li>
<li><strong>Docstrings siempre:</strong> Todo molde (clase/struct) y toda función importante debe tener una breve cadena de documentación en la parte superior explicando qué recibe (argumentos) y qué devuelve (retorno).</li>
</ul>
</section>
</section>
<section id="resumen-de-aprendizajes-cheat-sheet" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="resumen-de-aprendizajes-cheat-sheet"><span class="header-section-number">9.7</span> Resumen de aprendizajes (cheat sheet)</h2>
<p>¡Felicidades! Has completado uno de los capítulos más densos y fundamentales para tu carrera como analista espacial. Al dominar las funciones y los objetos, has pasado de escribir “scripts desechables” a construir herramientas profesionales.</p>
<p>Repasemos los conceptos clave que te llevas en la mochila:</p>
<ul>
<li><strong>Las funciones son máquinas:</strong> Reciben ingredientes (parámetros), aplican una lógica interna sin afectar el entorno exterior (pureza), y devuelven un resultado procesado. Son la máxima expresión de la regla DRY (<em>Don’t Repeat Yourself</em>).</li>
<li><strong>Parámetros dinámicos:</strong> Aprendiste a usar <code>**kwargs</code> (Python), <code>...</code> (R) y <code>kwargs...</code> (Julia) para atrapar un número indefinido de variables, dándole flexibilidad total a tus herramientas.</li>
<li><strong>La POO no es igual en todas partes:</strong>
<ul>
<li><strong>Python (Molde estricto):</strong> Usa Clases formales. El objeto lleva sus propios datos y herramientas por dentro. El despacho es interno (<code>objeto.metodo()</code>).</li>
<li><strong>R (Sistema S3 flexible):</strong> Construye listas estándar y les pega una “etiqueta” (post-it). Las funciones genéricas leen la etiqueta y despachan el trabajo a la herramienta adecuada.</li>
<li><strong>Julia (Estructuras y Despacho Múltiple):</strong> Separa radicalmente los datos (en <code>structs</code> rígidos) de las funciones. El Jefe de Cocina (compilador) escanea los tipos de todos los ingredientes y compila una tubería de alta velocidad (JIT) para ejecutarlos.</li>
</ul></li>
<li><strong>Diseño limpio:</strong> Un buen código se lee como un buen libro. Mantén tus funciones enfocadas en una sola tarea, diseña clases con alta cohesión y nunca olvides explicar el <em>por qué</em> en tus comentarios.</li>
</ul>
<p>A continuación, se presenta tu <strong>Hoja de Referencia (Cheat Sheet)</strong> para traducir la sintaxis de estos conceptos entre Python, R y Julia.</p>
<section id="estructura-de-funciones" class="level3">
<h3 class="anchored" data-anchor-id="estructura-de-funciones">1. Estructura de funciones</h3>
<div id="tbl-funciones_argumentos" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-funciones_argumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;9.3: Diferencias en el empaquetado y argumentos de funciones
</figcaption>
<div aria-describedby="tbl-funciones_argumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Característica</th>
<th style="text-align: left;">Python</th>
<th style="text-align: left;">R</th>
<th style="text-align: left;">Julia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Declaración</strong></td>
<td style="text-align: left;"><code>def calc(x):</code></td>
<td style="text-align: left;"><code>calc &lt;- function(x) { }</code></td>
<td style="text-align: left;"><code>function calc(x) ... end</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Retorno</strong></td>
<td style="text-align: left;"><code>return y</code></td>
<td style="text-align: left;"><code>return(y)</code></td>
<td style="text-align: left;"><code>return y</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Parámetro x defecto</strong></td>
<td style="text-align: left;"><code>def calc(r=6371):</code></td>
<td style="text-align: left;"><code>function(r=6371)</code></td>
<td style="text-align: left;"><code>function calc(; r=6371)</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Múltiples args extra</strong></td>
<td style="text-align: left;"><code>**kwargs</code></td>
<td style="text-align: left;"><code>...</code></td>
<td style="text-align: left;"><code>kwargs...</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="programación-orientada-a-objetos-poo" class="level3">
<h3 class="anchored" data-anchor-id="programación-orientada-a-objetos-poo">2. Programación Orientada a Objetos (POO)</h3>
<div id="tbl-clases_objetos" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-clases_objetos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;9.4: Diferencias en la creación de Clases y Objetos
</figcaption>
<div aria-describedby="tbl-clases_objetos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 26%">
<col style="width: 27%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Característica</th>
<th style="text-align: left;">Python (POO Clásica)</th>
<th style="text-align: left;">R (Sistema S3)</th>
<th style="text-align: left;">Julia (Despacho Múltiple)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Definir Molde</strong></td>
<td style="text-align: left;"><code>class Objeto:</code></td>
<td style="text-align: left;">Función que retorna una <code>list()</code></td>
<td style="text-align: left;"><code>struct Objeto ... end</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Constructor</strong></td>
<td style="text-align: left;"><code>def __init__(self):</code></td>
<td style="text-align: left;">Asignar etiqueta: <code>class(obj) &lt;- 'Tipo'</code></td>
<td style="text-align: left;"><code>Objeto()</code> (Automático o explícito)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Auto-referencia</strong></td>
<td style="text-align: left;">Usa la palabra <code>self</code></td>
<td style="text-align: left;">Pasa el objeto <code>obj</code> como argumento</td>
<td style="text-align: left;">Pasa el objeto tipado <code>obj::Tipo</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Métodos</strong></td>
<td style="text-align: left;">Van dentro de <code>class</code></td>
<td style="text-align: left;">Genérico (<code>UseMethod</code>) + <code>metodo.Clase</code></td>
<td style="text-align: left;">Funciones independientes enrutadas por tipo</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Representación</strong></td>
<td style="text-align: left;"><code>def __str__(self):</code></td>
<td style="text-align: left;"><code>print.Clase &lt;- function(obj)</code></td>
<td style="text-align: left;"><code>Base.show(io, obj::Clase)</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="ejercicios" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="ejercicios"><span class="header-section-number">9.8</span> Ejercicios</h2>
<p>Para poner en práctica los conceptos aprendidos sobre encapsulamiento y diseño de objetos, deberás resolver los siguientes dos ejercicios. Puedes elegir resolverlos en <strong>Python, R o Julia</strong> (o implementar la solución en varios lenguajes si deseas retarte).</p>
<section id="ejercicio-1-el-cazador-de-coordenadas-funciones-y-abstracción" class="level3">
<h3 class="anchored" data-anchor-id="ejercicio-1-el-cazador-de-coordenadas-funciones-y-abstracción">Ejercicio 1: El cazador de coordenadas (Funciones y abstracción)</h3>
<p>En geomática, a menudo necesitamos saber cuál es la “caja delimitadora” (<em>Bounding Box</em>) de un conjunto de puntos para encuadrar un mapa.</p>
<ul>
<li>Escribe una función pura llamada <code>calcular_bbox</code> que reciba una lista de múltiples coordenadas (latitud, longitud).</li>
<li>La función debe recorrer la lista internamente y devolver cuatro valores: la latitud mínima, la latitud máxima, la longitud mínima y la longitud máxima.</li>
<li>Asegúrate de que la función incluya una cadena de documentación (Docstring) o comentarios claros explicando qué entra y qué sale.</li>
</ul>
</section>
<section id="ejercicio-2-modelando-una-ruta-espacial-clases-e-interacción" class="level3">
<h3 class="anchored" data-anchor-id="ejercicio-2-modelando-una-ruta-espacial-clases-e-interacción">Ejercicio 2: Modelando una ruta espacial (Clases e interacción)</h3>
<p>Vamos a llevar los objetos al siguiente nivel haciendo que interactúen entre sí. Toma el código base del <code>PuntoEspacial</code> que desarrollamos en este capítulo y crea una nueva estructura superior:</p>
<ul>
<li>Crea una clase (o sistema S3 / struct en Julia) llamada <code>RutaGeografica</code>.</li>
<li>Su constructor debe recibir un nombre (ej. “Ruta de los Andes”) y una lista vacía que almacenará objetos del tipo <code>PuntoEspacial</code>.</li>
<li>Escribe un método <code>agregar_punto()</code> que reciba un objeto <code>PuntoEspacial</code> y lo guarde en la lista interna de la ruta.</li>
<li>Escribe un método <code>medir_distancia_total()</code> que use un ciclo para sumar la distancia de todos los tramos de la ruta, llamando al método <code>distancia_hacia()</code> que los puntos ya tienen integrado.</li>
</ul>
</section>
<section id="entregables-y-criterios-de-evaluación" class="level3">
<h3 class="anchored" data-anchor-id="entregables-y-criterios-de-evaluación">Entregables y criterios de evaluación</h3>
<p>El objetivo de esta evaluación no es solo que el código funcione, sino que seas capaz de documentar y explicar tus decisiones de arquitectura de software y el comportamiento del motor de ejecución subyacente.</p>
<p><strong>1. Archivos de Código:</strong> Debes desarrollar los algoritmos en al menos uno de los siguientes formatos de archivo:</p>
<ul>
<li>Script tradicional (<code>.py</code>, <code>.R</code>, <code>.jl</code>)</li>
<li>Notebook interactivo (<code>.ipynb</code>)</li>
<li>Documento computacional (<code>.qmd</code> con <em>chunks</em> de código)</li>
</ul>
<p><strong>2. Documento Analítico (Quarto):</strong> Independientemente del formato de tu código fuente, <strong>debes redactar un documento en Quarto (<code>.qmd</code>) y renderizarlo tanto en HTML como en PDF</strong>. En este documento debes incluir tus bloques de código y responder argumentativamente a las siguientes preguntas:</p>
<ul>
<li><strong>Sobre el Ejercicio 1 (Regla DRY y Pureza):</strong> Explica con tus propias palabras qué es la regla DRY (<em>Don’t Repeat Yourself</em>). ¿Por qué es un riesgo para la mantenibilidad de un proyecto copiar y pegar la gran fórmula matemática de Haversine en múltiples partes de tu código en lugar de usar la función que creaste?</li>
<li><strong>Sobre el Ejercicio 2 (Paradigmas de POO):</strong> Si resolviste (o resolvieras) este ejercicio en <strong>Python</strong>, ¿dónde “viven” físicamente los métodos analíticos como <code>medir_distancia_total()</code>? Contrasta esta filosofía con el enfoque del <strong>Sistema S3 de R</strong>. Usa la analogía del “Molde” vs el “Post-it” vista en clase para explicarlo.</li>
<li><strong>Pregunta General (Eficiencia y Motores):</strong> Imagina que tu <code>RutaGeografica</code> tiene 5 millones de puntos recolectados por un GPS y necesitas calcular la distancia total. Si usarás <strong>Julia</strong>, explica brevemente cómo la combinación del <strong>Despacho Múltiple</strong> y la <strong>Compilación JIT</strong> lograría ejecutar este cálculo masivo mucho más rápido que el intérprete estándar de R.</li>
</ul>
<p><strong>3. Repositorio en GitHub:</strong> Sube tu carpeta del proyecto (que debe contener tus scripts, el archivo <code>.qmd</code> y los renders finales en HTML y PDF) a un repositorio público en tu cuenta personal de <strong>GitHub</strong>.</p>
<ul>
<li><strong>Entrega:</strong> Deberás enviar únicamente el enlace (URL) a tu repositorio de GitHub para la calificación.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./08-ciclos_condicionales.html" class="pagination-link" aria-label="Bucles y Declaraciones Condicionales">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Bucles y Declaraciones Condicionales</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./12-introduccion_python_r_julia.html" class="pagination-link" aria-label="Introducción a Python, R y Julia">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introducción a Python, R y Julia</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>